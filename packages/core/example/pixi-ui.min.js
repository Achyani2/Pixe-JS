!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("pixi.js"),require("emoji-regex")):"function"==typeof define&&define.amd?define(["exports","pixi.js","emoji-regex"],e):e((t=t||self).PUXI={},t.PIXI,t.emojiRegex)}(this,(function(t,e,i){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function o(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var r=function(){function t(t){var i=this;this._onDragStart=function(t){var e=i,n=e.obj,o=e.start,r=e._onDragMove,s=e._onDragEnd;i.id=t.data.identifier,i.onPress.call(n,t,!0),i.bound||(o.copyFrom(t.data.global),n.stage.on("mousemove",r),n.stage.on("touchmove",r),n.stage.on("mouseup",s),n.stage.on("mouseupoutside",s),n.stage.on("touchend",s),n.stage.on("touchendoutside",s),n.stage.on("touchcancel",s),i.bound=!0),t.data.originalEvent.preventDefault()},this._onDragMove=function(t){if(t.data.identifier===i.id){var e=i,n=e.mouse,o=e.offset,r=e.start,s=e.obj;if(n.copyFrom(t.data.global),o.set(n.x-r.x,n.y-r.y),!i.dragging){if(i.movementX=Math.abs(o.x),i.movementY=Math.abs(o.y),0===i.movementX&&0===i.movementY||Math.max(i.movementX,i.movementY)<s.dragThreshold)return;if(null!==s.dragRestrictAxis&&(i.cancel=!1,("x"===s.dragRestrictAxis&&i.movementY>i.movementX||"y"===s.dragRestrictAxis&&i.movementY<=i.movementX)&&(i.cancel=!0),i.cancel))return void i._onDragEnd(t);i.onDragStart.call(s,t),i.dragging=!0}i.onDragMove.call(s,t,o)}},this._onDragEnd=function(t){if(t.data.identifier===i.id){var e=i,n=e.obj,o=e._onDragMove,r=e._onDragEnd;i.bound&&(n.stage.removeListener("mousemove",o),n.stage.removeListener("touchmove",o),n.stage.removeListener("mouseup",r),n.stage.removeListener("mouseupoutside",r),n.stage.removeListener("touchend",r),n.stage.removeListener("touchendoutside",r),n.stage.removeListener("touchcancel",r),i.dragging=!1,i.bound=!1,i.onDragEnd.call(n,t),i.onPress.call(n,t,!1))}},this.bound=!1,this.start=new e.Point,this.offset=new e.Point,this.mouse=new e.Point,this.movementX=0,this.movementY=0,this.cancel=!1,this.dragging=!1,this.id=0,this.obj=t,this.obj.interactive=!0,this.startEvent()}return t.prototype.stopEvent=function(){var t=this.obj,e=this._onDragStart,i=this._onDragMove,n=this._onDragEnd;this.bound&&(t.stage.removeListener("mousemove",i),t.stage.removeListener("touchmove",i),t.stage.removeListener("mouseup",n),t.stage.removeListener("mouseupoutside",n),t.stage.removeListener("touchend",n),t.stage.removeListener("touchendoutside",n),this.bound=!1),t.contentContainer.removeListener("mousedown",e),t.contentContainer.removeListener("touchstart",e)},t.prototype.startEvent=function(){var t=this.obj,e=this._onDragStart;t.contentContainer.on("mousedown",e),t.contentContainer.on("touchstart",e)},t.prototype.onPress=function(t,e){},t.prototype.onDragStart=function(t){},t.prototype.onDragMove=function(t,e){},t.prototype.onDragEnd=function(t){},t}();const s=[],a={add:(t,e)=>(t._dragDropEventId=e.data.identifier,-1===s.indexOf(t)&&(s.push(t),!0)),getItem(t){let e,i=null;for(let n=0;n<s.length;n++)if(s[n]===t){i=s[n],e=n;break}return null!==i&&(s.splice(e,1),i)},getEventItem(t,e){let i,n=null;const o=t.data.identifier;for(let t=0;t<s.length;t++)if(s[t]._dragDropEventId===o){if(e!==s[t].dragGroup)return!1;n=s[t],i=t;break}return null!==n&&(s.splice(i,1),n)}};var h,l=function(){function t(){this.reset(),this.dirtyId=0}return t.prototype.reset=function(){this.left=-1,this.top=-1,this.right=-1,this.bottom=-1},t}();(h=t.ALIGN||(t.ALIGN={}))[h.LEFT=0]="LEFT",h[h.TOP=0]="TOP",h[h.MIDDLE=4081]="MIDDLE",h[h.CENTER=4081]="CENTER",h[h.RIGHT=1048561]="RIGHT",h[h.BOTTOM=1048561]="BOTTOM",h[h.NONE=4294967295]="NONE";var c,d=function(){function t(e,i){void 0===e&&(e=t.WRAP_CONTENT),void 0===i&&(i=t.WRAP_CONTENT),this.width=e,this.height=i,this.markers={}}return Object.defineProperty(t.prototype,"marginLeft",{get:function(){return this._marginLeft||0},set:function(t){this._marginLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginTop",{get:function(){return this._marginTop||0},set:function(t){this._marginTop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginRight",{get:function(){return this._marginRight||0},set:function(t){this._marginRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginBottom",{get:function(){return this._marginBottom||0},set:function(t){this._marginBottom=t},enumerable:!0,configurable:!0}),t.prototype.setMargin=function(t,e,i,n){this._marginLeft=t,this._marginTop=e,this._marginRight=i,this._marginBottom=n},t.FILL_PARENT=4294967281,t.WRAP_CONTENT=4294967282,t.MAX_DIMEN=4294967280,t.DEFAULT=new t,t}(),u=function(e){function i(i,n,o,r,s,a){void 0===s&&(s=t.ALIGN.NONE),void 0===a&&(a=t.ALIGN.NONE);var h=e.call(this,d.WRAP_CONTENT,d.WRAP_CONTENT)||this;return h.anchorLeft=i,h.anchorTop=n,h.anchorBottom=r,h.anchorRight=o,h.horizontalAlign=s,h.verticalAlign=a,h}return o(i,e),i}(d),p=function(t){function i(e,n,o,r,s){void 0===o&&(o=0),void 0===r&&(r=0);var a=t.call(this,e,n)||this;return a.x=o,a.y=r,a.anchor=s||i.DEFAULT_ANCHOR.clone(),a}return o(i,t),i.DEFAULT_ANCHOR=new e.Point(0,0),i.CENTER_ANCHOR=new e.Point(.5,.5),i}(d);(c=t.MeasureMode||(t.MeasureMode={}))[c.UNBOUNDED=0]="UNBOUNDED",c[c.EXACTLY=1]="EXACTLY",c[c.AT_MOST=2]="AT_MOST";var f,g=function(i){function n(){var t=i.call(this)||this;return t.insetContainer=new e.Container,t.contentContainer=t.insetContainer.addChild(new e.Container),t.widgetChildren=[],t.stage=null,t.layoutMeasure=new l,t.initialized=!1,t.dragInitialized=!1,t.dropInitialized=!1,t.dirty=!0,t._oldWidth=-1,t._oldHeight=-1,t.pixelPerfect=!0,t._paddingLeft=0,t._paddingTop=0,t._paddingRight=0,t._paddingBottom=0,t.tint=0,t.blendMode=e.BLEND_MODES.NORMAL,t._dragPosition=null,t}return o(n,i),n.prototype.getBackground=function(){return this.background},n.prototype.setBackground=function(t){return this.background||this.insetContainer.removeChild(this.background),this.background=t,t&&this.insetContainer.addChildAt(t,0),this},Object.defineProperty(n.prototype,"measuredWidth",{get:function(){return this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"measuredHeight",{get:function(){return this._measuredHeight},enumerable:!0,configurable:!0}),n.prototype.getMeasuredWidth=function(){return this._measuredWidth},n.prototype.getMeasuredHeight=function(){return this._measuredHeight},n.prototype.onMeasure=function(e,i,n,o){var r=this.contentContainer.width+this.paddingHorizontal,s=this.contentContainer.height+this.paddingVertical;switch(n){case t.MeasureMode.EXACTLY:this._measuredWidth=e;break;case t.MeasureMode.UNBOUNDED:this._measuredWidth=r;break;case t.MeasureMode.AT_MOST:this._measuredWidth=Math.min(e,r)}switch(o){case t.MeasureMode.EXACTLY:this._measuredHeight=i;break;case t.MeasureMode.UNBOUNDED:this._measuredHeight=s;break;case t.MeasureMode.AT_MOST:this._measuredHeight=Math.min(i,s)}},n.prototype.measure=function(e,i,n,o){this.onMeasure(e,i,n,o);for(var r=0;r<this.widgetChildren.length;r++){var s=this.widgetChildren[r],a=s.layoutOptions||d.DEFAULT,h=a.width===d.FILL_PARENT||a.width===d.WRAP_CONTENT?this.measuredWidth:0,l=a.height===d.FILL_PARENT||a.height===d.WRAP_CONTENT?this.measuredHeight:0;s.measure(h,l,h?t.MeasureMode.AT_MOST:t.MeasureMode.UNBOUNDED,l?t.MeasureMode.AT_MOST:t.MeasureMode.UNBOUNDED)}},n.prototype.layout=function(t,e,i,n,o){void 0===e&&(e=t),void 0===i&&(i=t),void 0===n&&(n=e),this.layoutMeasure.left=t,this.layoutMeasure.top=e,this.layoutMeasure.right=i,this.layoutMeasure.bottom=n,this._width=i-t,this._height=n-e,this.background&&(this.background.x=0,this.background.y=0,this.background.width=i-t,this.background.height=n-e),this.insetContainer.x=t,this.insetContainer.y=e,this.contentContainer.x=this._paddingLeft,this.contentContainer.y=this._paddingTop},n.prototype.setLayoutOptions=function(t){return this.layoutOptions=t,this},Object.defineProperty(n.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){this._paddingLeft=t,this.dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){this._paddingTop=t,this.dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){this._paddingRight=t,this.dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){this._paddingBottom=t,this.dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingHorizontal",{get:function(){return this._paddingLeft+this._paddingRight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingVertical",{get:function(){return this._paddingTop+this._paddingBottom},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"interactive",{get:function(){return this.insetContainer.interactive},set:function(t){this.insetContainer.interactive=!0,this.contentContainer.interactive=!0},enumerable:!0,configurable:!0}),n.prototype.setPadding=function(t,e,i,n){return this._paddingLeft=t,this._paddingTop=e,this._paddingRight=i,this._paddingBottom=n,this.dirty=!0,this},n.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.contentContainer.addChild(t.insetContainer),this.widgetChildren.push(t);return t},n.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.widgetChildren.indexOf(t);if(-1!==n){t.parent,t.container.parent;t.container.parent.removeChild(t.insetContainer),this.widgetChildren.splice(n,1),t.parent=null}}},n.prototype.initialize=function(){this.initialized=!0,this.stage=this.parent.stage,this.draggable&&this.initDraggable(),this.droppable&&this.initDroppable()},n.prototype.clearDraggable=function(){this.dragInitialized&&(this.dragInitialized=!1,this.drag.stopEvent())},n.prototype.initDraggable=function(){if(!this.dragInitialized){this.dragInitialized=!0;var t=new e.Point,i=new e.Point,n=this;this._dragPosition=new e.Point,this.drag=new r(this),this.drag.onDragStart=function(e){var n=a.add(this,e);if(!this.dragging&&n){if(this.dragging=!0,this.container.interactive=!1,t.copy(this.container.position),this.dragContainer){var o=this.dragContainer.container?this.dragContainer.container:this.dragContainer;o&&(i.set(o.worldTransform.tx-this.parent.container.worldTransform.tx,o.worldTransform.ty-this.parent.container.worldTransform.ty),o.addChild(this.container))}else i.set(0);this.emit("draggablestart",e)}},this.drag.onDragMove=function(e,n){this.dragging&&(this._dragPosition.set(t.x+n.x-i.x,t.y+n.y-i.y),this.x=this._dragPosition.x,this.y=this._dragPosition.y,this.emit("draggablemove",e))},this.drag.onDragEnd=function(t){this.dragging&&(this.dragging=!1,setTimeout((function(){if(n.contentContainer.interactive=!0,a.getItem(n)){var e=n.parent===n.stage?n.stage:n.parent.contentContainer;e.toLocal(n.contentContainer.position,n.contentContainer.parent,n),e!=n.contentContainer&&n.parent.addChild(n)}n.emit("draggableend",t)}),0))}}},n.prototype.clearDroppable=function(){this.dropInitialized&&(this.dropInitialized=!1,this.contentContainer.removeListener("mouseup",this.onDrop),this.contentContainer.removeListener("touchend",this.onDrop))},n.prototype.initDroppable=function(){if(!this.dropInitialized){this.dropInitialized=!0;var t=this.contentContainer,e=this;this.contentContainer.interactive=!0,this.onDrop=function(t){var i=a.getEventItem(t,e.dropGroup);if(i&&i.dragging){i.dragging=!1,i.container.interactive=!0;var n=null!==e.droppableReparent?e.droppableReparent:e;n.container.toLocal(i.container.position,i.container.parent,i),n.container!=i.container.parent&&n.addChild(i)}},t.on("mouseup",this.onDrop),t.on("touchend",this.onDrop)}},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this.insetContainer.alpha},set:function(t){this.insetContainer.alpha=t},enumerable:!0,configurable:!0}),n}(e.utils.EventEmitter),m=function(){function t(t,i,n,o){var r=this;this._onMouseDown=function(t){var e=r,i=e.obj,n=e.eventname_mouseup,o=e._onMouseUp,s=e.eventname_mouseupoutside,a=e._onMouseUpOutside,h=e.right;if(r.mouse.copyFrom(t.data.global),r.id=t.data.identifier,r.onPress.call(r.obj,t,!0),r.bound||(i.contentContainer.on(n,o),i.contentContainer.on(s,a),h||(i.contentContainer.on("touchend",o),i.contentContainer.on("touchendoutside",a)),r.bound=!0),r.double){var l=performance.now();l-r.time<210?r.onClick.call(i,t):r.time=l}t.data.originalEvent.preventDefault()},this._mouseUpAll=function(t){var e=r,i=e.obj,n=e.eventname_mouseup,o=e._onMouseUp,s=e.eventname_mouseupoutside,a=e._onMouseUpOutside;t.data.identifier===r.id&&(r.offset.set(t.data.global.x-r.mouse.x,t.data.global.y-r.mouse.y),r.bound&&(i.contentContainer.removeListener(n,o),i.contentContainer.removeListener(s,a),r.right||(i.contentContainer.removeListener("touchend",o),i.contentContainer.removeListener("touchendoutside",a)),r.bound=!1),r.onPress.call(i,t,!1))},this._onMouseUp=function(t){t.data.identifier===r.id&&(r._mouseUpAll(t),r.obj.dragThreshold&&(r.movementX=Math.abs(r.offset.x),r.movementY=Math.abs(r.offset.y),Math.max(r.movementX,r.movementY)>r.obj.dragThreshold)||r.double||r.onClick.call(r.obj,t))},this._onMouseUpOutside=function(t){t.data.identifier===r.id&&r._mouseUpAll(t)},this._onMouseOver=function(t){r.ishover||(r.ishover=!0,r.obj.contentContainer.on("mousemove",r._onMouseMove),r.obj.contentContainer.on("touchmove",r._onMouseMove),r.onHover.call(r.obj,t,!0))},this._onMouseOut=function(t){r.ishover&&(r.ishover=!1,r.obj.contentContainer.removeListener("mousemove",r._onMouseMove),r.obj.contentContainer.removeListener("touchmove",r._onMouseMove),r.onHover.call(r.obj,t,!1))},this._onMouseMove=function(t){r.onMove.call(r.obj,t)},this.stopEvent=function(){var t=r,e=t.obj,i=t.eventname_mouseup,n=t._onMouseUp,o=t.eventname_mouseupoutside,s=t._onMouseUpOutside,a=t._onMouseDown,h=t._onMouseOver,l=t._onMouseOut,c=t._onMouseMove;r.bound&&(e.contentContainer.removeListener(i,n),e.contentContainer.removeListener(o,s),r.right||(e.contentContainer.removeListener("touchend",n),e.contentContainer.removeListener("touchendoutside",s)),r.bound=!1),e.contentContainer.removeListener(eventname_mousedown,a),r.right||e.contentContainer.removeListener("touchstart",a),r.hover&&(e.contentContainer.removeListener("mouseover",h),e.contentContainer.removeListener("mouseout",l),e.contentContainer.removeListener("mousemove",c),e.contentContainer.removeListener("touchmove",c))},this.startEvent=function(){var t=r,e=t.obj,i=t.eventname_mousedown,n=t._onMouseDown,o=t._onMouseOver,s=t._onMouseOut;e.contentContainer.on(i,n),r.right||e.contentContainer.on("touchstart",n),r.hover&&(e.contentContainer.on("mouseover",o),e.contentContainer.on("mouseout",s))},this.obj=t,this.bound=!1,this.id=0,this.ishover=!1,this.mouse=new e.Point,this.offset=new e.Point,this.movementX=0,this.movementY=0,this.right=void 0!==n&&n,this.hover=void 0===i||i,this.double=void 0!==o&&o,this.eventname_mousedown=this.right?"rightdown":"mousedown",this.eventname_mouseup=this.right?"rightup":"mouseup",this.eventname_mouseupoutside=this.right?"rightupoutside":"mouseupoutside",t.interactive=!0,this.time=0,this.startEvent()}return t.prototype.onHover=function(t,e){},t.prototype.onPress=function(t,e){},t.prototype.onClick=function(t){},t.prototype.onMove=function(t){},t}(),v={},_={},y={},w={registrer:function(t,e,i){var n=i||"default",o=v[n];o||(o=v[n]=[]),-1===o.indexOf(t)&&(t._tabIndex=void 0!==e?e:-1,t._tabGroup=o,o.push(t),o.sort((function(t,e){return t._tabIndex<e._tabIndex?-1:t._tabIndex>e._tabIndex?1:0})))},set:function(t){this.blur(),f=t},clear:function(){f=void 0},blur:function(){f&&"function"==typeof f.blur&&f.blur()},fireTab:function(){if(f){var t=f._tabGroup.indexOf(f)+1;t>=f._tabGroup.length&&(t=0),f._tabGroup[t].focus()}},fireNext:function(){if(f){var t=f._tabGroup.indexOf(f)+1;t>=f._tabGroup.length&&(t=f._tabGroup.length-1),f._tabGroup[t].focus()}},firePrev:function(){if(f){var t=f._tabGroup.indexOf(f)-1;t<0&&(t=0),f._tabGroup[t].focus()}},registrerCheckGroup:function(t){var e=t.checkGroup,i=_[e];i||(i=_[e]={}),i[t.value]=t,t.checked&&(y[e]=t.value)},updateCheckGroupSelected:function(t){var e=_[t.checkGroup];for(var i in e){var n=e[i];n!==t&&(n.checked=!1)}y[t.checkGroup]=t.value},getCheckGroupSelectedValue:function(t){return y[t]?y[t]:""},setCheckGroupSelectedValue:function(t,e){var i=_[t];if(i){var n=i[e];n&&(n.checked=!0)}}},b=function(){function e(){}return e.prototype.onAttach=function(t){this.host=t},e.prototype.onDetach=function(){this.host=null},e.prototype.onMeasure=function(e,i,n,o){this._measuredWidth=e,this._measuredHeight=i;for(var r=this.host.widgetChildren,s=0,a=r.length;s<a;s++){var h=(v=r[s]).layoutOptions||d.DEFAULT,l=this.getChildMeasureMode(h.width,n),c=this.getChildMeasureMode(h.height,o),u=Math.abs(h.width)<1?h.width*e:h.width,p=Math.abs(h.height)<1?h.height*i:h.height;v.measure(l===t.MeasureMode.EXACTLY?u:e,c===t.MeasureMode.EXACTLY?p:i,l,c)}if(n===t.MeasureMode.UNBOUNDED||n===t.MeasureMode.AT_MOST){this._measuredWidth=0;for(s=0,a=r.length;s<a;s++){var f=(v=r[s]).getMeasuredWidth(),g=(h=v.layoutOptions||d.DEFAULT).x?h.x:0,m=f+(Math.abs(g)<1?f/(1-g):g);this._measuredWidth=Math.max(this._measuredWidth,m)}n===t.MeasureMode.AT_MOST&&(this._measuredWidth=Math.min(e,this._measuredWidth))}if(o===t.MeasureMode.UNBOUNDED||o===t.MeasureMode.AT_MOST){this._measuredHeight=0;for(s=0,a=r.length;s<a;s++){var v,_=(v=r[s]).getMeasuredHeight(),y=(h=v.layoutOptions||d.DEFAULT).y?h.y:0,w=_+(Math.abs(y)<1?_/(1-y):y);this._measuredHeight=Math.max(this._measuredHeight,w)}o===t.MeasureMode.AT_MOST&&(this._measuredHeight=Math.min(i,this._measuredHeight))}},e.prototype.getChildMeasureMode=function(e,i){return i===t.MeasureMode.UNBOUNDED?t.MeasureMode.UNBOUNDED:e===d.FILL_PARENT||e===d.WRAP_CONTENT?t.MeasureMode.AT_MOST:t.MeasureMode.EXACTLY},e.prototype.onLayout=function(){for(var t=this.host,e=t.width,i=t.height,n=t.widgetChildren,o=0,r=n.length;o<r;o++){var s=n[o],a=s.layoutOptions||d.DEFAULT,h=a.x?a.x:0,l=a.y?a.y:0;Math.abs(h)<1&&(h*=e),Math.abs(l)<1&&(l*=i);var c=a.anchor||p.DEFAULT_ANCHOR,u=h-c.x*s.getMeasuredWidth(),f=l-c.y*s.getMeasuredHeight();s.layout(u,f,u+s.getMeasuredWidth(),f+s.getMeasuredHeight())}},e.prototype.getMeasuredWidth=function(){return this._measuredWidth},e.prototype.getMeasuredHeight=function(){return this._measuredHeight},e}(),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.useLayout=function(t){this.layoutMgr&&this.layoutMgr.onDetach(),this.layoutMgr=t,t&&this.layoutMgr.onAttach(this)},e.prototype.useDefaultLayout=function(){this.useLayout(new b)},e.prototype.measure=function(e,i,n,o){t.prototype.measure.call(this,e,i,n,o),0!==this.widgetChildren.length&&(this.layoutMgr||this.useDefaultLayout(),this.layoutMgr.onMeasure(e,i,n,o),this._measuredWidth=Math.max(this.measuredWidth,this.layoutMgr.getMeasuredWidth()),this._measuredHeight=Math.max(this.measuredHeight,this.layoutMgr.getMeasuredHeight()))},e.prototype.layout=function(e,i,n,o,r){void 0===r&&(r=!0),t.prototype.layout.call(this,e,i,n,o,r),0!==this.widgetChildren.length&&(this.layoutMgr||this.useDefaultLayout(),this.layoutMgr.onLayout())},e}(g),M=function(t){function e(e){void 0===e&&(e={});var i=t.call(this)||this;i.keyDownEvent=function(t){9===t.which?i._useTab&&(w.fireTab(),t.preventDefault()):38===t.which?i._usePrev&&(w.firePrev(),t.preventDefault()):40===t.which&&i._useNext&&(w.fireNext(),t.preventDefault()),i.emit("keydown")},i.documentMouseDown=function(){i.__down||i.blur()},i._bindEvents=function(){null!==i.stage&&i.stage.on("pointerdown",i.documentMouseDown),document.addEventListener("keydown",i.keyDownEvent)},i._clearEvents=function(){null!==i.stage&&i.stage.off("pointerdown",i.documentMouseDown),document.removeEventListener("keydown",i.keyDownEvent)},e.background&&t.prototype.setBackground.call(i,e.background);var n=e.tabIndex,o=e.tabGroup;return i._focused=!1,i._useTab=i._usePrev=i._useNext=!0,i.interactive=!0,w.registrer(i,n||0,o||0),i.insetContainer.on("pointerdown",(function(t){i.focus(),i.__down=!0})),i.contentContainer.on("pointerup",(function(t){i.__down=!1})),i.contentContainer.on("pointerupoutside",(function(t){i.__down=!1})),i}return o(e,t),e.prototype.blur=function(){this._focused&&(w.clear(),this._focused=!1,this._clearEvents(),this.emit("focusChanged",!1),this.emit("blur"))},e.prototype.focus=function(){this._focused||(this._focused=!0,this._bindEvents(),w.set(this),this.emit("focusChanged",!0),this.emit("focus"))},e}(x),C=function(t){function i(e){var i=t.call(this,e.width||(e.background?e.background.width:100),e.height||(e.background?e.background.height:100),e.tabIndex||0,e.tabGroup||0)||this;return i.background=e.background,i.background&&(i.background.width="100%",i.background.height="100%",i.background.pivot=.5,i.background.verticalAlign="middle",i.background.horizontalAlign="center",i.addChild(i.background)),i.isHover=!1,i.textWidget=e.text.setLayoutOptions(new p(d.WRAP_CONTENT,d.WRAP_CONTENT,.5,.5,p.CENTER_ANCHOR)),i.textWidget&&i.addChild(i.textWidget),i.contentContainer.buttonMode=!0,i}return o(i,t),i.prototype.setupClick=function(){var i=this,n=new m(this);n.onHover=function(t,e){i.isHover=e,i.emit("hover",e)},n.onPress=function(t,e){e&&(i.focus(),t.data.originalEvent.preventDefault()),i.emit("press",e)},n.onClick=function(t){i.click()},this.click=function(){i.emit("click")},this.focus=function(){i._focused||M.prototype.focus.call(i)},this.blur=function(){i._focused&&M.prototype.blur.call(i)},this.initialize=function(){t.prototype.initialize.call(i),i.contentContainer.interactiveChildren=!1,setTimeout((function(){var t=i.contentContainer.getLocalBounds();i.contentContainer.hitArea=new e.Rectangle(t.x<0?t.x:0,t.y<0?t.y:0,Math.max(t.x+t.width+(t.x<0?-t.x:0),i._width),Math.max(t.y+t.height+(t.y<0?-t.y:0),i._height))}),20)}},i.prototype.update=function(){},Object.defineProperty(i.prototype,"value",{get:function(){return this.textWidget?this.textWidget.text:""},set:function(t){this.textWidget&&(this.textWidget.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.textWidget},set:function(t){this.value=t},enumerable:!0,configurable:!0}),i}(M),T=function(t){function i(){var i=t.call(this)||this;return i.hitArea=new e.Rectangle,i.insetContainer.hitArea=i.hitArea,i}return o(i,t),i.prototype.update=function(){},i.prototype.layout=function(e,i,n,o,r){t.prototype.layout.call(this,e,i,n,o,r),this.hitArea.width=this.width,this.hitArea.height=this.height},i}(x),k=function(t){function e(e){var i=t.call(this,e)||this;i._checked=void 0!==e.checked&&e.checked,i._value=e.value||"",i.checkGroup=e.checkgroup||null,i.checkmark=new T,i.checkmark.contentContainer.addChild(e.checkmark),i.checkmark.setLayoutOptions(new p(d.WRAP_CONTENT,d.WRAP_CONTENT,.5,.5,p.CENTER_ANCHOR)),i.checkmark.alpha=i._checked?1:0,i.contentContainer.buttonMode=!0,null!==i.checkGroup&&w.registrerCheckGroup(i);var n=new m(i);return n.onHover=function(t,e){i.emit("hover",e)},n.onPress=function(t,e){e&&(i.focus(),t.data.originalEvent.preventDefault()),i.emit("press",e)},n.onClick=function(t){i.click()},i.change=function(t){i.checkmark&&(i.checkmark.alpha=t?1:0)},i.click=function(){i.emit("click"),null!==i.checkGroup&&i.checked||(i.checked=!i.checked,i.emit("change",i.checked))},i.focus=function(){i._focused||t.prototype.focus.call(i)},i.blur=function(){i._focused&&t.prototype.blur.call(i)},i}return o(e,t),e.prototype.update=function(){},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){t!==this._checked&&(null!==this.checkGroup&&t&&w.updateCheckGroupSelected(this),this._checked=t,this.change(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.checked&&w.updateCheckGroupSelected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){return w.getCheckGroupSelectedValue(this.checkGroup)},set:function(t){w.setCheckGroupSelectedValue(this.checkGroup,t)},enumerable:!0,configurable:!0}),e}(M);function L(t){this.respectDirty=!0,this._parent=t||null,this._scale=1,this._align="left",this._fontFamily="Arial",this._fontSize=26,this._fontWeight="normal",this._fontStyle="normal",this._letterSpacing=0,this._lineHeight=0,this._verticalAlign=0,this._rotation=0,this._skew=0,this._tint="#FFFFFF",this._fill="#FFFFFF",this._shadow="",this._stroke=0,this._strokeFill="",this._strokeShadow="",this._wrap=!0,this._breakWords=!1,this._overflowX="visible",this._overflowY="visible",this._ellipsis=!1;let e=null;this.ellipsisSize=function(t){return this.ellipsis?(null===e&&(e=3*(t.getCharObject(".",this).width+this.letterSpacing)),e):0}}function E(){this.style=null,this.data=null,this.space=!1,this.newline=!1,this.emoji=!1,this.charcode=0,this.value="",this.wordIndex=-1,this.lineIndex=-1}L.prototype.clone=function(){const t=new L;return t.merge(this),t},L.prototype.merge=function(t){if("object"==typeof t){this.respectDirty=!1;for(const e in t){"function"!=typeof t[e]&&"respectDirty"!==e&&"_parent"!==e&&(this[e]=t[e])}this.respectDirty=!0,this._dirty=!0}},L.prototype.ctxKey=function(t){return[t,this.fill,this.shadow,this.stroke,this.strokeFill,this.strokeShadow].join("|")},L.prototype.ctxFont=function(){const t=`${Math.min(200,Math.max(1,this.fontSize||26))}px `;return("bold"===this.fontWeight?`${this.fontWeight} `:"")+("italic"===this.fontStyle||"oblique"===this.fontStyle?`${this.fontStyle} `:"")+t+this.fontFamily},L.prototype.constructor=L,Object.defineProperties(L.prototype,{_dirty:{set(t){this.respectDirty&&null!==this._parent&&(this._parent.dirtyStyle=t,this._parent.update())}},scale:{get(){return this._scale},set(t){t!==this._scale&&(this._scale=t,this._dirty=!0)}},align:{get(){return this._align},set(t){t!==this._align&&(this._align=t,this._dirty=!0)}},fontFamily:{get(){return this._fontFamily},set(t){t!==this._fontFamily&&(this._fontFamily=t,this._dirty=!0)}},fontSize:{get(){return this._fontSize},set(t){t!==this._fontSize&&(this._fontSize=t,this._dirty=!0)}},fontWeight:{get(){return this._fontWeight},set(t){t!==this._fontWeight&&(this._fontWeight=t,this._dirty=!0)}},fontStyle:{get(){return this._fontStyle},set(t){t!==this._fontStyle&&(this._fontStyle=t,this._dirty=!0)}},letterSpacing:{get(){return this._letterSpacing},set(t){t!==this._letterSpacing&&(this._letterSpacing=t,this._dirty=!0)}},lineHeight:{get(){return this._lineHeight},set(t){t!==this._lineHeight&&(this._lineHeight=t,this._dirty=!0)}},verticalAlign:{get(){return this._verticalAlign},set(t){t!==this._verticalAlign&&(this._verticalAlign=t,this._dirty=!0)}},rotation:{get(){return this._rotation},set(t){t!==this._rotation&&(this._rotation=t,this._dirty=!0)}},skew:{get(){return this._skew},set(t){t!==this._skew&&(this._skew=t,this._dirty=!0)}},tint:{get(){return this._tint},set(t){t!==this._tint&&(this._tint=t,this._dirty=!0)}},fill:{get(){return this._fill},set(t){t!==this._fill&&(this._fill=t,this._dirty=!0)}},shadow:{get(){return this._shadow},set(t){t!==this._shadow&&(this._shadow=t,this._dirty=!0)}},stroke:{get(){return this._stroke},set(t){t!==this._stroke&&(this._stroke=t,this._dirty=!0)}},strokeFill:{get(){return this._strokeFill},set(t){t!==this._strokeFill&&(this._strokeFill=t,this._dirty=!0)}},strokeShadow:{get(){return this._strokeShadow},set(t){t!==this._strokeShadow&&(this._strokeShadow=t,this._dirty=!0)}},wrap:{get(){return this._wrap},set(t){t!==this._wrap&&(this._wrap=t,this._dirty=!0)}},breakWords:{get(){return this._breakWords},set(t){t!==this._breakWords&&(this._breakWords=t,this._dirty=!0)}},overflowX:{get(){return this._overflowX},set(t){t!==this._overflowX&&(this._overflowX=t,this._dirty=!0)}},overflowY:{get(){return this._overflowY},set(t){t!==this._overflowY&&(this._overflowY=t,this._dirty=!0)}},ellipsis:{get(){return this._ellipsis},set(t){t!==this._ellipsis&&(this._ellipsis=t,this._dirty=!0)}}}),E.prototype.constructor=E;let O=null;function S(t,e){e=e||{},g.call(this,e.width||0,e.height||0),null===O&&(O=new P(1));const n=!e.width,o=!e.height,r=this._style=new L(this);r.merge(e.style);const s=this.chars=[],a=[],h=[],l=new PIXI.Container;this.container.addChild(l),this._inputText=t;let c=0,d=0;this.dirtyText=!0,this.dirtyStyle=!0,this.dirtyRender=!0;const u=[],p=[],f=[],m=[];let v=0,_=0;const y=[],w=[];this.render=function(){let t,e,i=0,r=0,s=-1;if(h.length>v)for(t=v;t<h.length;t++){const e=h[t];e&&(e.visible=!1)}let c=0,d=0,g=0;for(t=0;t<v;t++){if(e=a[t],s!==e.lineIndex){switch(s=e.lineIndex,c=u[s],d=p[s],i+=d,m[s]){case"right":r=this._width-c;break;case"center":r=.5*(this._width-c);break;default:r=0}g=Math.max(c,g)}if(!e.data.texture||e.space||e.newline){h[t]&&(h[t].visible=!1);continue}const n=e.data.texture;let o=h[t];o?o.texture=n:(o=h[t]=new PIXI.Sprite(n),o.anchor.set(.5)),o.visible=!0,o.x=e.x+r+.5*n.width,o.y=e.y+i-.5*n.height-(d-f[s]),o.tint=e.emoji?16777215:R(e.style.tint,16777215),o.rotation=A(e.style.rotation,0),o.skew.x=A(e.style.skew,0),o.parent||l.addChild(o)}n&&(this.width=g),o&&(this.height=i)},this.prepareForRender=function(){const t=new PIXI.Point;let e,i,o=0,h=0,l=0,c=0,d=r.align,g=-1,b=0,x=0,M=!1,C=0,T=!1,k=!1;for(i=0;i<_;i++){const v=s[i],L=s[i-1];if(e=v.style,h=Math.max(h,r.lineHeight||e.lineHeight||v.data.lineHeight),"visible"!==e.overflowY&&h+x>this._height&&"hidden"===e.overflowY)break;v.newline&&(k=!1),v.space||v.newline?o++:v.wordIndex=o,l=Math.max(l,e.fontSize),v.lineIndex=c,e.align!==r.align&&(d=e.align),v.space&&(g=i,b=t.x);const S=Math.round(v.data.width)+A(e.letterSpacing,0);if(!n&&!M&&!v.newline&&t.x+S>this._width){if(e.wrap)if(v.space)M=!0;else{if(-1!==g){C-=i-g,i=g-1,g=-1,t.x=b,M=!0;continue}if(e.breakWords){L&&(t.x-=L.style.letterSpacing,t.x-=L.data.width),i-=2,C--,M=!0;continue}}if("hidden"==e.overflowX&&!M&&(k=!0,e.ellipsis&&!T)){T=!0;let i=y[c];i||(i=y[c]=[new E,new E,new E]);for(let n=0;n<3;n++){const o=i[n];o.value=".",o.data=O.getCharObject(o.value,e),o.style=e,o.x=t.x+v.data.xOffset,o.y=parseFloat(e.verticalAlign)+o.data.yOffset,o.lineIndex=c,t.x+=Math.round(o.data.width)+A(e.letterSpacing,0),a[C]=o,C++}}}k||(v.x=t.x+v.data.xOffset,v.y=parseFloat(e.verticalAlign)+v.data.yOffset,t.x+=S,a[C]=v,C++),(M||v.newline||i===_-1)&&(L&&(t.x-=L.style.letterSpacing),v.space&&(t.x-=v.data.width,t.x-=A(e.letterSpacing,0)),x+=h,w[c]=T,u[c]=t.x,p[c]=h,f[c]=l,m[c]=d,h=t.x=b=l=0,d=r.align,g=-1,c++,M=k=T=!1)}v=C};const b=["</i>","</b>","</font>","</center>"];this.processInputText=function(){const t=[r];let n=0,o=0;const a=Array.from(this._inputText);for(let r=0;r<a.length;r++){style=t[t.length-1];let h=a[r];h.charCodeAt(0);let l=!1,c=!1,d=!1;if(/(?:\r\n|\r|\n)/.test(h))l=!0;else if(/(\s)/.test(h))c=!0;else if(e.allowTags&&"<"===h){let e=this._inputText.substring(o);e=e.slice(0,e.indexOf(">")+1);let i=!0;if(e.length){if("<i>"===e)style=style.clone(),style.fontStyle="italic",t.push(style);else if("<b>"===e)style=style.clone(),style.fontWeight="bold",t.push(style);else if("<center>"===e)style=style.clone(),style.align="center",t.push(style);else if(-1!==b.indexOf(e))t.length>1&&t.splice(t.length-1,1);else if(e.startsWith("<font ")){const i=/(\w+)\s*=\s*((["'])(.*?)\3|([^>\s]*)(?=\s|\/>))(?=[^<]*>)/g;let n=i.exec(e);if(null!==n){for(style=style.clone();null!==n;){switch(n[1]){case"family":n[1]="fontFamily";break;case"size":n[1]="fontSize";break;case"weight":n[1]="fontWeight";break;case"style":n[1]="fontStyle";break;case"valign":n[1]="verticalAlign";break;case"spacing":n[1]="letterSpacing";break;case"color":n[1]="tint"}style[n[1]]=n[4],n=i.exec(e)}t.push(style)}}else i=!1;if(i){o+=e.length,r+=e.length-1;continue}}}else{let t=i().exec(h);if(null!==t){for(r--,h="";null!==t&&h!==t[0];)r++,h=t[0],t=i().exec(h+a[r+1]);d=!0}}let u=s[n];u||(u=new E,s[n]=u),u.style=style,d&&(u.style=u.style.clone(),u.style.fontFamily=S.settings.defaultEmojiFont),u.data=O.getCharObject(h,u.style),u.value=h,u.space=c,u.newline=l,u.emoji=d,n++,o+=h.length}_=n},this.lazyUpdate=null;const x=this;this.update=function(){null===x.lazyUpdate&&(x.lazyUpdate=setTimeout((function(){const t=!n&&(x._width!=c||x._height!=d||x.dirtyText);(x.dirtyText||x.dirtyStyle)&&(x.dirtyText=x.dirtyStyle=!1,x.dirtyRender=!0,x.processInputText()),(t||x.dirtyRender)&&(x.dirtyRender=!1,c=x._width,d=x.height,x.prepareForRender(),x.render()),x.lazyUpdate=null}),0))}}S.prototype=Object.create(g.prototype),S.prototype.constructor=S,S.settings={debugSpriteSheet:!1,defaultEmojiFont:"Segoe UI Emoji"},Object.defineProperties(S.prototype,{value:{get(){return this._inputText},set(t){t!==this._inputText&&(this._inputText=t,this.dirtyText=!0,this.update())}},text:{get(){return this.value},set(t){this.value=t}},style:{get(){return this._style},set(t){const e=new L(this);e.merge(t),this._style.merge(e),this.dirtyStyle=!0,this.update()}}});const D=document.createElement("canvas"),I=D.getContext("2d");D.width=100,D.height=100;var P=function(t){let e,i,n,o,r,s,a,h=[];var l=function(t,e){const i=this.children=[];this.rect=new PIXI.Rectangle(0,0,t||0,e||0),this.data=null,this.insert=function(t,e,n){if(i.length>0){const o=i[0].insert(t,e,n);return null!==o?o:i[1].insert(t,e,n)}if(null!==this.data)return null;if(t>this.rect.width||e>this.rect.height)return null;if(t==this.rect.width&&e==this.rect.height)return this.data=n,n.frame.x=this.rect.x,n.frame.y=this.rect.y,this;return i.push(new l),i.push(new l),this.rect.width-t>this.rect.height-e?(i[0].rect=new PIXI.Rectangle(this.rect.x,this.rect.y,t,this.rect.height),i[1].rect=new PIXI.Rectangle(this.rect.x+t,this.rect.y,this.rect.width-t,this.rect.height)):(i[0].rect=new PIXI.Rectangle(this.rect.x,this.rect.y,this.rect.width,e),i[1].rect=new PIXI.Rectangle(this.rect.x,this.rect.y+e,this.rect.width,this.rect.height-e)),i[0].insert(t,e,n)}};const c=function(){e=document.createElement("canvas"),i=e.getContext("2d"),a=256,e.width=e.height=a,s=new l(a,a),n=[],o=PIXI.BaseTexture.fromCanvas(e),o.mipmap=!1,o.resolution=1,o.update(),S.settings.debugSpriteSheet&&(e.className="DynamicText_SpriteSheet",document.body.appendChild(e))};this.fontFamilyCache={};const d=function(t,e){e&&o.update();for(let e=0;e<t.length;e++)u(t[e])};var u=function(t){i.drawImage(t._cache,t.frame.x,t.frame.y),t.texture.frame=t.frame,t.texture.update()};this.getCharObject=function(t,i){const n=i.ctxFont();let s=this.fontFamilyCache[n];s||(s={},this.fontFamilyCache[n]=s);const a=i.ctxKey(t);let l=s[a];if(!l){const c=m(t,i);c.rect&&(e.width<c.rect.width||e.height<c.rect.height)&&(e.width=e.height=Math.max(c.rect.width,c.rect.height),o.update()),l={metrics:c,font:n,value:t,frame:c.rect,baseTexture:c.rect?o:null,xOffset:c.bounds?c.bounds.minx:0,yOffset:c.descent||0,width:c.width||0,lineHeight:c.lineHeight||0,_cache:c.canvas,texture:c.rect?new PIXI.Texture(o,c.rect):null},s[a]=l,c.rect&&(h.push(l),void 0===r&&(r=setTimeout((function(){f(),r=void 0}),0)))}return l};const p=function(t,e){return t.frame.height<e.frame.height?1:t.frame.height>e.frame.height?-1:t.frame.width<e.frame.width?1:t.frame.width>e.frame.width?-1:0};var f=function(){h.sort(p);let e=!1,i=!1;for(let r=0;r<h.length;r++){const l=h[r];null===s.insert(l.frame.width+t,l.frame.height+t,l)?(r--,a<2048?(e=!0,g(2*a)):(d(n,e),c(),i=!0,e=!1)):(i&&(l.texture.baseTexture=o),n.push(l))}d(e||i?n:h,e),h=[]},g=function(i){e.width=e.height=a=i,s=new l(i,i),n.sort(p);for(let e=0;e<n.length;e++){const i=n[e];s.insert(i.frame.width+t,i.frame.height+t,i)}},m=function(t,e){const i=Math.max(1,(n=e.fontSize,o=26,isNaN(n)?o:parseInt(n)));var n,o;const r=1.25*i,s={fontSize:i,lineHeight:r,width:0};if(!t||/(?:\r\n|\r|\n)/.test(t))return s;const a=e.ctxFont();if(I.font=a,s.width=Math.round(I.measureText(t).width),/(\s)/.test(t))return s;const h=Math.round(.7*i),l=Math.max(5,Math.round(.7*i));D.width=Math.ceil(s.width)+2*l,D.height=1.5*i;const c=D.width,d=D.height,u=d/2+.5*h;I.font=a,I.clearRect(0,0,c,d),I.save();const p=function(t){const e=t.trim().split(" ");return{color:N(e[0],"#000000"),alpha:A(e[1],.5),xOffset:A(e[2],3),yOffset:A(e[3],3),blur:A(e[4],5)}},f=function(t){const e=t.trim().split(" "),i=N(e[0],"#FFFFFF"),n=A(e[1],1);return{color:i,alpha:n,position:A(e[2],-1),rgba:j(i,n)}},g=function(t){const e=t.split(",").filter((function(t){return""!==t}));let n;for(n=0;n<e.length;n++)e[n]=f(e[n]);switch(e.length){case 0:return"white";case 1:return e[0].rgba?e[0].rgba:e[0].color||"#FFFFFF";default:try{const t=u+r-i,o=I.createLinearGradient(0,t-i,0,t);for(n=0;n<e.length;n++)o.addColorStop(-1!==e[n].position?e[n].position:n/(e.length-1),e[n].rgba||e[n].color);return o}catch(t){return"#FFFFFF"}}},m=function(i,n){const o=i.trim().split(",").filter((function(t){return""!==t}));if(o.length){for(let i=0;i<o.length;i++){const r=p(o[i]);I.globalAlpha=r.alpha,I.shadowColor=r.color,I.shadowOffsetX=r.xOffset+c,I.shadowOffsetY=r.yOffset,I.shadowBlur=r.blur,n?(I.lineWidth=e.stroke,I.strokeText(t,l-c,u)):I.fillText(t,l-c,u)}I.restore()}};e.shadow.length&&m(e.shadow,!1),e.stroke&&e.strokeShadow.length&&m(e.strokeShadow,!0),I.fillStyle=g(N(e.fill,"#000000")),I.fillText(t,l,u),I.restore(),e.stroke&&(I.strokeStyle=g(N(e.strokeFill,"#000000")),I.lineWidth=e.stroke,I.strokeText(t,l,u),I.restore());const v=I.getImageData(0,0,c,d).data;let _=3;const y=4*c,w=v.length;for(;_<w&&!v[_];)_+=4;const b=_/y|0;if(_<w){for(_=w-1;_>0&&!v[_];)_-=4;const t=_/y|0;for(_=3;_<w&&!v[_];)_+=y,_>=w&&(_=_-w+4);const e=_%y/4|0;let i=1;for(_=w-1;_>=0&&!v[_];)_-=y,_<0&&(_=w-1-4*i++);const n=_%y/4+1|0;s.ascent=Math.round(u-b),s.descent=Math.round(t-u),s.height=1+Math.round(t-b),s.bounds={minx:e-l,maxx:n-l,miny:0,maxy:t-b},s.rect={x:s.bounds.minx,y:-s.ascent-2,width:s.bounds.maxx-s.bounds.minx+2,height:s.ascent+s.descent+4},s.canvas=document.createElement("canvas"),s.canvas.width=s.rect.width,s.canvas.height=s.rect.height,s.canvas.getContext("2d").drawImage(D,-l-s.rect.x,-u-s.rect.y),s.rect.x=s.rect.y=0}return s};c()};function A(t,e){return isNaN(t)?e:parseFloat(t)}function N(t,e){return"string"==typeof t&&t.length?t:e}function R(t,e){if("number"==typeof t)return t;const i=parseInt(t.replace("#","0x"));return isNaN(i)?e:i}function j(t,e){const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e=A(e,1),!!i&&`rgba(${parseInt(i[1],16)},${parseInt(i[2],16)},${parseInt(i[3],16)},${e})`}function H(){this.getPosition=function(t){return t}}function F(t,e,i){const n=t,o=e&&i?3:i?1:2;this.getPosition=function(t){let e=1===o?1-t:2===o?t:t<.5?2*t:2*(1-t);return 1===n?e*=e:2===n?e*=e*e:3===n?e*=e*e*e:4===n&&(e*=e*e*e*e),1===o?1-e:2===o?e:t<.5?e/2:1-e/2}}H.prototype.constructor=H,F.prototype=Object.create(H.prototype),F.prototype.constructor=F;const B={},W=.5*Math.PI;function U(t){const e=Object.create(H.prototype);return e.getPosition=t,e}function X(t,e,i){return{easeIn:t,easeOut:e,easeInOut:i}}B.Linear=new H,B.Power0={easeNone:B.Linear},B.Power1=B.Quad=X(new F(1,1,0),new F(1,0,1),new F(1,1,1)),B.Power2=B.Cubic=X(new F(2,1,0),new F(2,0,1),new F(2,1,1)),B.Power3=B.Quart=X(new F(3,1,0),new F(3,0,1),new F(3,1,1)),B.Power4=B.Quint=X(new F(4,1,0),new F(4,0,1),new F(4,1,1)),B.Bounce={BounceIn:U((function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),BounceOut:U((function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),BounceInOut:U((function(t){const e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))},B.Circ={CircIn:U((function(t){return-(Math.sqrt(1-t*t)-1)})),CircOut:U((function(t){return Math.sqrt(1-(t-=1)*t)})),CircInOut:U((function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))},B.Expo={ExpoIn:U((function(t){return Math.pow(2,10*(t-1))-.001})),ExpoOut:U((function(t){return 1-Math.pow(2,-10*t)})),ExpoInOut:U((function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))},B.Sine={SineIn:U((function(t){return 1-Math.cos(t*W)})),SineOut:U((function(t){return Math.sin(t*W)})),SineInOut:U((function(t){return-.5*(Math.cos(Math.PI*t)-1)}))};var G=function(){function t(t,i){var n=this;this.onMouseScrollImpl=function(t){var e=n,i=e.obj,o=e.preventDefault,r=e.delta;o&&event.preventDefault(),void 0!==t.deltaX?r.set(t.deltaX,t.deltaY):r.set(1===t.axis?60*t.detail:0,2===t.axis?60*t.detail:0),n.onMouseScroll.call(i,event,r)},this.onHoverImpl=function(t){var e=n.onMouseScrollImpl;n.bound||(document.addEventListener("mousewheel",e,!1),document.addEventListener("DOMMouseScroll",e,!1),n.bound=!0)},this.onMouseOutImpl=function(t){var e=n.onMouseScrollImpl;n.bound&&(document.removeEventListener("mousewheel",e),document.removeEventListener("DOMMouseScroll",e),n.bound=!1)},this.onMouseScroll=function(t,e){},this.bound=!1,this.delta=new e.Point,this.obj=t,this.preventDefault=i,this.startEvent()}return t.prototype.stopEvent=function(){var t=this.obj,e=this.onMouseScrollImpl,i=this.onHoverImpl,n=this.onMouseOutImpl;this.bound&&(document.removeEventListener("mousewheel",e),document.removeEventListener("DOMMouseScroll",e),this.bound=!1),t.contentContainer.removeListener("mouseover",i),t.contentContainer.removeListener("mouseout",n)},t.prototype.startEvent=function(){var t=this.obj,e=this.onHoverImpl,i=this.onMouseOutImpl;t.contentContainer.on("mouseover",e),t.contentContainer.on("mouseout",i)},t}();const V={ClickEvent:m,DragEvent:r,InputController:w,MouseScrollEvent:G};var z={Lerp:function(t,e,i){return i>1?i=1:i<0&&(i=0),t+(e-t)*i},Round:function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},componentToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},rgbToHex:function(t,e,i){return"#"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(i)},rgbToNumber:function(t,e,i){return 65536*t+256*e+i},numberToRgb:function(t){return{r:Math.floor(t/65536),g:Math.floor(t/256)%256,b:t%256}},hexToRgb:function(t){if(null===t&&(t=16777215),!isNaN(t))return this.numberToRgb(t);t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},Y=[],K=[],$={},q={},Q=1,J=function(t){this.object=t,this.tweens={},this.active=!1,this.onUpdate=null},Z=function(){function t(){this._ready=!1,this.obj=null,this.parent=null,this.key="",this.time=0,this.callback=null,this.currentTime=0}return t.prototype.remove=function(){this._ready=!0,delete this.parent.tweens[this.key],Object.keys(this.parent.tweens).length||(this.parent.active=!1,this.parent.onUpdate=null,delete q[this.obj._tweenObjectId])},t.prototype.set=function(t,e,i){this.obj=t.object,this.obj._currentCallbackID?this.obj._currentCallbackID++:this.obj._currentCallbackID=1,this.time=i,this.parent=t,this.callback=e,this._ready=!1,this.key="cb_"+this.obj._currentCallbackID,this.currentTime=0,this.parent.active||(this.parent.active=!0,q[this.obj._tweenObjectId]=this.parent)},t.prototype.update=function(t){this.currentTime+=t,this.currentTime>=this.time&&(this.remove(),this.callback.call(this.parent))},t}(),tt=function(){function t(){this._ready=!1,this.parent=null,this.obj=null,this.key="",this.from=0,this.to=0,this.time=0,this.ease=0,this.currentTime=0,this.t=0,this.isColor=!1}return t.prototype.remove=function(){this._ready=!0,delete this.parent.tweens[this.key],Object.keys(this.parent.tweens).length||(this.parent.active=!1,delete q[this.obj._tweenObjectId])},t.prototype.set=function(t,e,i,n,o,r){this.isColor=isNaN(i)&&"#"===i[0]||isNaN(n)&&"#"===n[0],this.parent=t,this.obj=t.object,this.key=e,this.surfix=function(t){if(isNaN(t)&&-1!==t.indexOf("%"))return"%"}(n),this.isColor?(this.to=z.hexToRgb(n),this.from=z.hexToRgb(i),this.currentColor={r:this.from.r,g:this.from.g,b:this.from.b}):(this.to=function(t){if(!isNaN(t))return t;if(isNaN(t)&&-1!==t.indexOf("%"))return parseFloat(t.replace("%",""))}(n),this.from=function(t,e,i,n){if(!isNaN(t)&&!isNaN(e))return t;if(isNaN(t)&&isNaN(e)&&-1!==t.indexOf("%")&&-1!==e.indexOf("%"))return parseFloat(t.replace("%",""));if(isNaN(t)&&!isNaN(e)&&-1!==t.indexOf("%"))return-1!==et.indexOf(n)?i.parent._width*(.01*parseFloat(t.replace("%",""))):-1!==it.indexOf(n)?i.parent._height*(.01*parseFloat(t.replace("%",""))):0;if(!isNaN(t)&&isNaN(e)&&-1!==e.indexOf("%"))return-1!==et.indexOf(n)?t/i.parent._width*100:-1!==it.indexOf(n)?t/i.parent._height*100:0;return 0}(i,n,this.obj,e)),this.time=o,this.currentTime=0,this.ease=r,this._ready=!1,this.parent.active||(this.parent.active=!0,q[this.obj._tweenObjectId]=this.parent)},t.prototype.update=function(t){if(this.currentTime+=t,this.t=Math.min(this.currentTime,this.time)/this.time,this.ease&&(this.t=this.ease.getPosition(this.t)),this.isColor)this.currentColor.r=Math.round(z.Lerp(this.from.r,this.to.r,this.t)),this.currentColor.g=Math.round(z.Lerp(this.from.g,this.to.g,this.t)),this.currentColor.b=Math.round(z.Lerp(this.from.b,this.to.b,this.t)),this.obj[this.key]=z.rgbToNumber(this.currentColor.r,this.currentColor.g,this.currentColor.b);else{var e=z.Lerp(this.from,this.to,this.t);this.obj[this.key]=this.surfix?e+this.surfix:e}this.currentTime>=this.time&&this.remove()},t}(),et=["width","minWidth","maxWidth","anchorLeft","anchorRight","left","right","x"],it=["height","minHeight","maxHeight","anchorTop","anchorBottom","top","bottom","y"];function nt(t){t._tweenObjectId||(t._tweenObjectId=Q,Q++);var e=$[t._tweenObjectId];return e||(e=$[t._tweenObjectId]=new J(t)),e}function ot(){for(var t=0;t<Y.length;t++)if(Y[t]._ready)return Y[t];var e=new tt;return Y.push(e),e}function rt(){for(var t=0;t<K.length;t++)if(K[t]._ready)return K[t];var e=new Z;return K.push(e),e}var at={to:function(t,e,i,n){var o=nt(t),r=null;for(var s in i)if("onComplete"!==s)if("onUpdate"!==s){if(e){var a=i[s]===t[s];if(void 0===t[s])continue;a?o.tweens[s]&&o.tweens[s].remove():(o.tweens[s]||(o.tweens[s]=ot()),o.tweens[s].set(o,s,t[s],i[s],e,n))}}else r=i[s];else{var h=rt();h.set(o,i[s],e),o.tweens[h.key]=h}e?o.onUpdate=r:this.set(t,i)},from:function(t,e,i,n){var o=nt(t),r=null;for(var s in i)if("onComplete"!==s)if("onUpdate"!==s){if(e){var a=i[s]==t[s];if(void 0===t[s])continue;a?o.tweens[s]&&o.tweens[s].remove():(o.tweens[s]||(o.tweens[s]=ot()),o.tweens[s].set(o,s,i[s],t[s],e,n))}}else r=i[s];else{var h=rt();h.set(o,i[s],e),o.tweens[h.key]=h}e?o.onUpdate=r:this.set(t,i)},fromTo:function(t,e,i,n,o){var r=nt(t),s=null;for(var a in n)if("onComplete"!==a)if("onUpdate"!==a){if(e){var h=i[a]==n[a];if(void 0===t[a]||void 0===i[a])continue;h?(r.tweens[a]&&r.tweens[a].remove(),t[a]=n[a]):(r.tweens[a]||(r.tweens[a]=ot()),r.tweens[a].set(r,a,i[a],n[a],e,o))}}else s=n[a];else{var l=rt();l.set(r,n[a],e),r.tweens[l.key]=l}e?r.onUpdate=s:this.set(t,n)},set:function(t,e){var i=nt(t);for(var n in e)void 0!==t[n]&&(i.tweens[n]&&i.tweens[n].remove(),t[n]=e[n])},_update:function(t){for(var e in q){var i=q[e];for(var n in i.tweens)i.tweens[n].update(t);i.onUpdate&&i.onUpdate.call(i.object,t)}}},ht=function(t){function i(e){var i=t.call(this,0,0)||this;return i._amt=0,i._disabled=!1,i.track=e.track,i.handle=e.handle,i.fill=e.fill||null,i._minValue=e.minValue||0,i._maxValue=e.maxValue||100,i.decimals=e.decimals||0,i.vertical=e.vertical||!1,i.onValueChange=e.onValueChange||null,i.onValueChanging=e.onValueChanging||null,i.value=e.value||50,i.handle.pivot=.5,i.addChild(i.track),i.fill&&i.track.addChild(i.fill),i.addChild(i.handle),i.handle.contentContainer.buttonMode=!0,i.vertical?(i.height="100%",i.width=i.track.width,i.track.height="100%",i.handle.horizontalAlign="center",i.fill&&(i.fill.horizontalAlign="center")):(i.width="100%",i.height=i.track.height,i.track.width="100%",i.handle.verticalAlign="middle",i.fill&&(i.fill.verticalAlign="middle")),i}return o(i,t),i.prototype.update=function(t){var e,i;void 0===t&&(t=0),this.vertical?(e=this.handle._height||this.handle.contentContainer.height,i=(this._height-e)*this._amt+.5*e,t?(at.to(this.handle,.3,{top:i},B.Power2.easeOut),this.fill&&at.to(this.fill,.3,{height:i},B.Power2.easeOut)):(at.set(this.handle,{top:i}),this.fill&&at.set(this.fill,{height:i}))):(e=this.handle._width||this.handle.contentContainer.width,i=(this._width-e)*this._amt+.5*e,t?(at.to(this.handle,.3,{left:i},B.Power2.easeOut),this.fill&&at.to(this.fill,.3,{width:i},B.Power2.easeOut)):(at.set(this.handle,{left:i}),this.fill&&at.set(this.fill,{width:i})))},i.prototype.initialize=function(){var i=this;t.prototype.initialize.call(this);var n,o=new e.Point,s=0,a=function(){i.emit("change",i.value),i._lastChange!=i.value&&(i._lastChange=i.value,"function"==typeof i.onValueChange&&i.onValueChange(i.value))},h=function(){i.emit("changing",i.value),i._lastChanging!=i.value&&(i._lastChanging=i.value,"function"==typeof i.onValueChanging&&i.onValueChanging(i.value))},l=function(t,e){i.track.contentContainer.toLocal(t,null,o,!0);var n=i.vertical?o.y-.5*i.handle._height:o.x-.5*i.handle._width,r=i.vertical?i._height-i.handle._height:i._width-i.handle._width;i._amt=r?Math.max(0,Math.min(1,n/r)):0,i.update(e),h()},c=new r(this.handle);c.onPress=function(t,e){t.stopPropagation()},c.onDragStart=function(t){s=i._amt,n=i.vertical?i._height-i.handle._height:i._width-i.handle._width},c.onDragMove=function(t,e){i._amt=n?Math.max(0,Math.min(1,s+(i.vertical?e.y:e.x)/n)):0,h(),i.update()},c.onDragEnd=function(){a(),this.update()};var d=new r(this.track);d.onPress=function(t,e){e&&l(t.data.global,!0),t.stopPropagation()},d.onDragMove=function(t){l(t.data.global,!1)},d.onDragEnd=function(){a()}},Object.defineProperty(i.prototype,"value",{get:function(){return z.Round(z.Lerp(this._minValue,this._maxValue,this._amt),this.decimals)},set:function(t){this._amt=(Math.max(this._minValue,Math.min(this._maxValue,t))-this._minValue)/(this._maxValue-this._minValue),"function"==typeof this.onValueChange&&this.onValueChange(this.value),"function"==typeof this.onValueChanging&&this.onValueChanging(this.value),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minValue",{get:function(){return this._minValue},set:function(t){this._minValue=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){this._maxValue=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!==this._disabled&&(this._disabled=t,this.handle.contentContainer.buttonMode=!t,this.handle.contentContainer.interactive=!t,this.track.contentContainer.interactive=!t)},enumerable:!0,configurable:!0}),i}(g),lt=function(t){function e(e){var i=t.call(this,{track:e.track,handle:e.handle,fill:null,vertical:e.vertical})||this;return i.scrollingContainer=e.scrollingContainer,i.autohide=e.autohide,i._hidden=!1,i}return o(e,t),e.prototype.initialize=function(){var e=this;t.prototype.initialize.call(this),this.decimals=3,this.onValueChanging=function(t){(e.scrollingContainer._height/e.scrollingContainer.innerContainer.height||.001)<1&&e.scrollingContainer.forcePctPosition(e.vertical?"y":"x",e._amt)},this.scrollingContainer._scrollBars.push(this)},e.prototype.alignToContainer=function(){var t,e,i=this.vertical?"y":"x",n=this.vertical?"height":"width",o=this.vertical?"top":"left",r=this.scrollingContainer.innerContainer[n]?-this.scrollingContainer.innerContainer[i]/this.scrollingContainer.innerContainer[n]:0,s=this.scrollingContainer.innerContainer[n]?this.scrollingContainer["_"+n]/this.scrollingContainer.innerContainer[n]:1,a=this.scrollingContainer.innerContainer[n]-this.scrollingContainer["_"+n];this._amt=this.scrollingContainer["_"+n]&&a?-this.scrollingContainer.innerContainer[i]/a:0,s>=1?(e=this["_"+n],this.handle[o]=.5*e,this.toggleHidden(!0)):(e=this["_"+n]*s,this._amt>1?e-=(this["_"+n]-e)*(this._amt-1):this._amt<0&&(e-=(this["_"+n]-e)*-this._amt),t=this._amt<0?.5*e:this._amt>1?this["_"+n]-.5*e:r*this.scrollingContainer["_"+n]+.5*e,this.handle[o]=t,this.toggleHidden(!1)),this.handle[n]=e},e.prototype.toggleHidden=function(t){this.autohide&&(t&&!this._hidden?(at.to(this,.2,{alpha:0}),this._hidden=!0):!t&&this._hidden&&(at.to(this,.2,{alpha:1}),this._hidden=!1))},e}(ht),ct=function(t){function e(i){var n=t.call(this)||this;return n._disabled=!0,n._now=0,n.DeltaTime=0,n.Time=performance.now(),n.Ms=0,i&&(n.disabled=!1),e.shared=n,n}return o(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled?(this._disabled=!1,e.shared=this,this.update(performance.now(),!0)):this._disabled=!0},enumerable:!0,configurable:!0}),e.prototype.update=function(t){e.shared._now=t,e.shared.Ms=e.shared._now-e.shared.Time,e.shared.Time=e.shared._now,e.shared.DeltaTime=.001*e.shared.Ms,e.shared.emit("update",e.shared.DeltaTime),at._update(e.shared.DeltaTime),e.shared._disabled||requestAnimationFrame(e.shared.update)},e.on=function(t,i,n){e.shared.on(t,i,n)},e.once=function(t,i,n){e.shared.once(t,i,n)},e.removeListener=function(t,i){e.shared.removeListener(t,i)},e}(e.utils.EventEmitter);ct.shared=new ct(!0);var dt,ut=function(t){function i(i){void 0===i&&(i={});var n=t.call(this)||this;return n.mask=new e.Graphics,n.innerContainer=new e.Container,n.innerBounds=new e.Rectangle,n.contentContainer.addChild(n.mask),n.contentContainer.addChild(n.innerContainer),n.contentContainer.mask=n.mask,n.scrollX=void 0!==i.scrollX&&i.scrollX,n.scrollY=void 0!==i.scrollY&&i.scrollY,n.dragScrolling=void 0===i.dragScrolling||i.dragScrolling,n.softness=void 0!==i.softness?Math.max(Math.min(i.softness||0,1),0):.5,n.radius=i.radius||0,n.expandMask=i.expandMask||0,n.overflowY=i.overflowY||0,n.overflowX=i.overflowX||0,n.animating=!1,n.scrolling=!1,n._scrollBars=[],n.boundCached=performance.now()-1e3,n.initScrolling(),n}return o(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),(this.scrollX||this.scrollY)&&this.initScrolling()},i.prototype.update=function(){if(t.prototype.update.call(this),this._lastWidth!==this._width||this._lastHeight!==this._height){var e=this.expandMask;this.mask.clear(),this.mask.lineStyle(0),this.mask.beginFill(16777215,1),0===this.radius?this.mask.drawRect(-e,-e,this._width+e,this._height+e):this.mask.drawRoundedRect(-e,-e,this._width+e,this.height+e,this.radius),this.mask.endFill(),this._lastWidth=this._width,this._lastHeight=this._height}this.setScrollPosition&&this.setScrollPosition()},i.prototype.addChild=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var n=0;n<e.length;n++)t.prototype.addChild.call(this,e[n]),this.innerContainer.addChild(e[n].contentContainer);return this.getInnerBounds(!0),e[0]},i.prototype.updateScrollBars=function(){for(var t=0;t<this._scrollBars.length;t++)this._scrollBars[t].alignToContainer()},i.prototype.getInnerBounds=function(t){return(t||performance.now()-this.boundCached>1e3)&&(this.innerContainer.getLocalBounds(this.innerBounds),this.innerContainer.getLocalBounds(this.innerBounds),this.innerBounds.height=this.innerBounds.y+this.innerContainer.height,this.innerBounds.width=this.innerBounds.x+this.innerContainer.width,this.boundCached=performance.now()),this.innerBounds},i.prototype.initScrolling=function(){var t,i=this,n=this.innerContainer,o=new e.Point,s=new e.Point,a=new e.Point,h=new e.Point,l=new e.Point;if(this.forcePctPosition=function(t,e){var o=i.getInnerBounds();i.scrollX&&"x"===t&&(n.position[t]=-(o.width-i._width)*e),i.scrollY&&"y"===t&&(n.position[t]=-(o.height-i._height)*e),h[t]=s[t]=n.position[t]},this.focusPosition=function(t){var e,o=i.getInnerBounds();if(i.scrollX){var r=Math.max(0,Math.min(o.width,t.x));r+n.x>i._width?(e=r-i._width,n.x=-e):r+n.x<0&&(e=r+n.x,n.x-=e)}if(i.scrollY){var l=Math.max(0,Math.min(o.height,t.y));l+n.y>i._height?(e=l-i._height,n.y=-e):l+n.y<0&&(e=l+n.y,n.y-=e)}a.copyFrom(n.position),s.copyFrom(n.position),h.copyFrom(n.position),i.updateScrollBars()},this.setScrollPosition=function(t){t&&(l=t),i.animating||(i.animating=!0,a.copyFrom(n.position),s.copyFrom(n.position),ct.on("update",i.updateScrollPosition,i))},this.updateScrollPosition=function(e){t=!0,i.scrollX&&i.updateDirection("x",e),i.scrollY&&i.updateDirection("y",e),t&&(ct.removeListener("update",i.updateScrollPosition),i.animating=!1)},this.updateDirection=function(e,o){var r,c=i.getInnerBounds();if(r="y"===e?Math.round(Math.min(0,i._height-c.height)):Math.round(Math.min(0,i._width-c.width)),i.scrolling||0===Math.round(l[e])||(s[e]+=l[e],l[e]=z.Lerp(l[e],0,(5+2.5/Math.max(i.softness,.01))*o),s[e]>0?s[e]=0:s[e]<r&&(s[e]=r)),!i.scrolling&&0===Math.round(l[e])&&(n[e]>0||n[e]<r)){var d=h[e]>0?0:r;h[e]=z.Lerp(h[e],d,(40-30*i.softness)*o),t=!1}else(i.scrolling||0!==Math.round(l[e]))&&(i.scrolling&&(l[e]=h[e]-a[e],a.copyFrom(h)),s[e]>0?(l[e]=0,h[e]=100*i.softness*(1-Math.exp(s[e]/-200))):s[e]<r?(l[e]=0,h[e]=r-100*i.softness*(1-Math.exp((r-s[e])/-200))):h[e]=s[e],t=!1);n.position[e]=Math.round(h[e]),i.updateScrollBars()},this.dragScrolling){var c=new r(this);c.onDragStart=function(t){i.scrolling||(o.copyFrom(n.position),h.copyFrom(n.position),i.scrolling=!0,i.setScrollPosition(),i.emit("dragStart",t))},c.onDragMove=function(t,e){i.scrollX&&(s.x=o.x+e.x),i.scrollY&&(s.y=o.y+e.y)},c.onDragEnd=function(t){i.scrolling&&(i.scrolling=!1,i.emit("dragEnd",t))}}var d=new e.Point;new G(this,!0).onMouseScroll=function(t,e){d.set(.2*-e.x,.2*-e.y),i.setScrollPosition(d)},this.updateScrollBars()},i}(T),pt=function(t){function e(e,i,n){var o=t.call(this,0,0)||this;return o.desc=void 0!==e&&e,o.tweenTime=i||0,o.tweenEase=n,o.items=[],o}return o(e,t),e.prototype.addChild=function(e,i,n){t.prototype.addChild.call(this,e),-1===this.items.indexOf(e)&&this.items.push(e),"function"==typeof i&&(e._sortListValue=i),"function"==typeof n&&(e._sortListThenByValue=n),e._sortListRnd||(e._sortListRnd=Math.random()),this.sort()},e.prototype.removeChild=function(e){if(arguments.length>1)for(var i=0;i<arguments.length;i++)this.removeChild(arguments[i]);else{t.prototype.removeChild.call(this,e);var n=this.items.indexOf(e);-1!==n&&this.items.splice(n,1),this.sort()}},e.prototype.sort=function(t){var e=this;void 0===t&&(t=!1),clearTimeout(this._sortTimeout),t?this._sort():this._sortTimeout=setTimeout((function(){e._sort()}),0)},e.prototype._sort=function(){var t=this,e=this.desc,i=0,n=!0;this.items.sort((function(t,i){var n=t._sortListValue()<i._sortListValue()?e?1:-1:t._sortListValue()>i._sortListValue()?e?-1:1:0;return 0===n&&t._sortListThenByValue&&i._sortListThenByValue&&(n=t._sortListThenByValue()<i._sortListThenByValue()?e?1:-1:t._sortListThenByValue()>i._sortListThenByValue()?e?-1:1:0),0===n&&(n=t._sortListRnd>i._sortListRnd?1:t._sortListRnd<i._sortListRnd?-1:0),n}));for(var o=0;o<this.items.length;o++){var r=this.items[o];n=!n,this.tweenTime>0?at.fromTo(r,this.tweenTime,{x:r.x,y:r.y},{x:0,y:i},this.tweenEase):(r.x=0,r.y=i),i+=r.height,"function"==typeof r.altering&&r.altering(n)}this.tweenTime>0&&setTimeout((function(){t.updatesettings(!1,!0)}),1e3*this.tweenTime)},e}(T),ft=function(t){function i(e,i,n,o,r){var s=t.call(this,e.width,e.height)||this;return s.bw=i||5,s.vs=void 0===o||o,s.hs=void 0===n||n,s.t=e.baseTexture,s.f=e.frame,s.tile=r,s.hs&&(s.setting.minWidth=2*i),s.vs&&(s.setting.minHeight=2*i),s.update=function(){this.initialized&&(vs&&hs?(str.x=sbr.x=sr.x=this._width-bw,sbl.y=sbr.y=sb.y=this._height-bw,sf.width=st.width=sb.width=this._width-2*bw,sf.height=sl.height=sr.height=this._height-2*bw):hs?(sr.x=this._width-bw,sl.height=sr.height=sf.height=this._height,sf.width=this._width-2*bw):(sb.y=this._height-bw,st.width=sb.width=sf.width=this._width,sf.height=this._height-2*bw),null!==this.tint&&(sf.tint=this.tint,vs&&hs&&(stl.tint=str.tint=sbl.tint=sbr.tint=this.tint),hs&&(sl.tint=sr.tint=this.tint),vs&&(st.tint=sb.tint=this.tint)),null!==this.blendMode&&(sf.blendMode=this.blendMode,vs&&hs&&(stl.blendMode=str.blendMode=sbl.blendMode=sbr.blendMode=this.blendMode),hs&&(sl.blendMode=sr.blendMode=this.blendMode),vs&&(st.blendMode=sb.blendMode=this.blendMode)))},s}return o(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this);var i=this.f,n=this.bw;this.vs&&this.hs?(this.ftl=new e.Rectangle(i.x,i.y,n,n),this.ftr=new e.Rectangle(i.x+i.width-n,i.y,n,n),this.fbl=new e.Rectangle(i.x,i.y+i.height-n,n,n),this.fbr=new e.Rectangle(i.x+i.width-n,i.y+i.height-n,n,n),this.ft=new e.Rectangle(i.x+n,i.y,i.width-2*n,n),this.fb=new e.Rectangle(i.x+n,i.y+i.height-n,i.width-2*n,n),this.fl=new e.Rectangle(i.x,i.y+n,n,i.height-2*n),this.fr=new e.Rectangle(i.x+i.width-n,i.y+n,n,i.height-2*n),this.ff=new e.Rectangle(i.x+n,i.y+n,i.width-2*n,i.height-2*n)):this.hs?(this.fl=new e.Rectangle(this.f.x,i.y,n,i.height),this.fr=new e.Rectangle(i.x+i.width-n,i.y,n,i.height),this.ff=new e.Rectangle(i.x+n,i.y,i.width-2*n,i.height)):(this.ft=new e.Rectangle(i.x,i.y,i.width,n),this.fb=new e.Rectangle(i.x,i.y+i.height-n,i.width,n),this.ff=new e.Rectangle(i.x,i.y+n,i.width,i.height-2*n));var o=this,r=o.t,s=o.ff,a=o.fl,h=o.fr,l=o.ft,c=o.fb;this.sf=this.tile?new e.extras.TilingSprite(new e.Texture(r,s)):new e.Sprite(new e.Texture(r,s)),this.contentContainer.addChildAt(this.sf,0),this.vs&&this.hs&&(this.stl=new e.Sprite(new e.Texture(r,this.ftl)),this.str=new e.Sprite(new e.Texture(r,this.ftr)),this.sbl=new e.Sprite(new e.Texture(r,this.fbl)),this.sbr=new e.Sprite(new e.Texture(r,this.fbr)),this.contentContainer.addChildAt(this.stl,0),this.contentContainer.addChildAt(this.str,0),this.contentContainer.addChildAt(this.sbl,0),this.contentContainer.addChildAt(this.sbr,0)),hs&&(this.sl=this.tile?new e.extras.TilingSprite(new e.Texture(r,a)):new e.Sprite(new e.Texture(r,a)),this.sr=this.tile?new e.extras.TilingSprite(new e.Texture(r,h)):new e.Sprite(new e.Texture(r,h)),this.contentContainer.addChildAt(this.sl,0),this.contentContainer.addChildAt(this.sr,0)),this.vs&&(this.st=this.tile?new e.extras.TilingSprite(new e.Texture(r,l)):new e.Sprite(new e.Texture(r,l)),this.sb=this.tile?new e.extras.TilingSprite(new e.Texture(r,c)):new e.Sprite(new e.Texture(r,c)),this.contentContainer.addChildAt(this.st,0),this.contentContainer.addChildAt(this.sb,0)),this.vs&&this.hs&&(this.st.x=n,this.sb.x=n,this.sl.y=n,this.sr.y=n,this.stl.width=n,this.str.width=n,this.sbl.width=n,this.sbr.width=n,this.stl.height=n,this.str.height=n,this.sbl.height=n,this.sbr.height=n),this.hs&&(this.sf.x=this.sl.width=this.sr.width=n),this.vs&&(this.sf.y=this.st.height=this.sb.height=n)},i.prototype.update=function(){},i}(g),gt=function(t){function i(i){var n=t.call(this)||this;return n.spriteDisplay=new e.Sprite(i),n.contentContainer.addChild(n.spriteDisplay),n}return o(i,t),i.prototype.update=function(){null!==this.tint&&(this.spriteDisplay.tint=this.tint),null!==this.blendMode&&(this.spriteDisplay.blendMode=this.blendMode)},i.fromImage=function(t){return new i(new e.Texture(new e.BaseTexture(t)))},i}(g),mt=function(i){function n(t,n){var o=i.call(this)||this;return o.__width=t,o.__height=n,o.minWidth=0,o.minHeight=0,o.widgetChildren=[],o.interactive=!0,o.stage=o,o.hitArea=new e.Rectangle(0,0,0,0),o.initialized=!0,o.resize(t,n),o}return o(n,i),n.prototype.measureAndLayout=function(){for(var e=0,i=this.widgetChildren.length;e<i;e++){var n=this.widgetChildren[e],o=n.layoutOptions||d.DEFAULT,r=o.width<d.MAX_DIMEN?t.MeasureMode.EXACTLY:t.MeasureMode.AT_MOST,s=o.height<d.MAX_DIMEN?t.MeasureMode.EXACTLY:t.MeasureMode.AT_MOST,a=Math.abs(o.width)<1?o.width*this._width:o.width,h=Math.abs(o.height)<1?o.height*this._height:o.height;n.measure(r===t.MeasureMode.EXACTLY?a:this._width,s===t.MeasureMode.EXACTLY?h:this._height,r,s);var l=o.x?o.x:0,c=o.y?o.y:0;Math.abs(l)<1&&(l*=this._width),Math.abs(c)<1&&(c*=this._height);var u=o.anchor||p.DEFAULT_ANCHOR,f=l-u.x*n.getMeasuredWidth(),g=c-u.y*n.getMeasuredHeight();n.layout(f,g,f+n.getMeasuredWidth(),g+n.getMeasuredHeight(),!0)}},n.prototype.getBackground=function(){return this.background},n.prototype.setBackground=function(t){this.background&&i.prototype.removeChild.call(this,this.background),this.background=t,t&&i.prototype.addChildAt.call(this,t,0)},n.prototype.update=function(t){for(var e=0,i=t.length;e<i;e++)this.update(t[e].widgetChildren),t[e].update()},n.prototype.render=function(t){this.update(this.widgetChildren),i.prototype.render.call(this,t)},n.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.widgetChildren.push(t),i.prototype.addChild.call(this,t.insetContainer);this.measureAndLayout()},n.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.removeChild(arguments[n]);else{i.prototype.removeChild.call(this,t.insetContainer);var o=this.widgetChildren.indexOf(t);-1!==o&&(this.children.splice(o,1),t.parent=null)}this.measureAndLayout()},n.prototype.resize=function(t,e){if(isNaN(e)||(this.__height=e),isNaN(t)||(this.__width=t),this.minWidth||this.minHeight){var i=1,n=1;t&&t<this.minWidth&&(i=this.minWidth/t),e&&e<this.minHeight&&(n=this.minHeight/e),i>n&&i>1?(this.scale.set(1/i),this.__height*=i,this.__width*=i):n>1?(this.scale.set(1/n),this.__width*=n,this.__height*=n):1!==this.scale.x&&this.scale.set(1)}this.hitArea&&(this.hitArea.width=this.__width,this.hitArea.height=this.__height);for(var o=0;o<this.widgetChildren.length;o++)this.widgetChildren[o].updatesettings(!0,!1);this.measureAndLayout()},Object.defineProperty(n.prototype,"_width",{get:function(){return this.__width},set:function(t){isNaN(t)||(this.__width=t,this.resize())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_height",{get:function(){return this.__height},set:function(t){isNaN(t)||(this.__height=t,this.resize())},enumerable:!0,configurable:!0}),n}(e.Container),vt=function(t){function i(i,n){var o=t.call(this)||this;return o.textDisplay=new e.Text(i,n),o.contentContainer.addChild(o.textDisplay),o}return o(i,t),i.prototype.update=function(){null!==this.tint&&(this.textDisplay.tint=this.tint),null!==this.blendMode&&(this.textDisplay.blendMode=this.blendMode)},Object.defineProperty(i.prototype,"value",{get:function(){return this.textDisplay.text},set:function(t){this.textDisplay.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!0,configurable:!0}),i}(g),_t=function(t){function i(i){var n=t.call(this,i)||this;n.keyDownEvent=function(t){if(t.which!==n.ctrlKey&&t.which!==n.cmdKey||(n.ctrlDown=!0),t.which===n.shiftKey&&(n.shiftDown=!0),n.emit("keydown",t),!t.defaultPrevented){if(13===t.which)return n.insertTextAtCaret("\n"),void t.preventDefault();if(n.ctrlDown){if(65===t.which)return n.select(),void t.preventDefault();if(90===t.which)return n.value!=n._lastValue&&(n.valueEvent=n._lastValue),n.setCaretIndex(n._lastValue.length+1),void t.preventDefault()}if(8===t.which)return n.deleteSelection()||(n.caret._index>0||1===n.chars.length&&n.caret._atEnd)&&(n.caret._atEnd?(n.valueEvent=n.value.slice(0,n.chars.length-1),n.setCaretIndex(n.caret._index)):(n.valueEvent=n.value.slice(0,n.caret._index-1)+n.value.slice(n.caret._index),n.setCaretIndex(n.caret._index-1))),void t.preventDefault();if(46===t.which)return n.deleteSelection()||n.caret._atEnd||(n.valueEvent=n.value.slice(0,n.caret._index)+n.value.slice(n.caret._index+1),n.setCaretIndex(n.caret._index)),void t.preventDefault();if(37!==t.which&&39!==t.which)return!n.multiLine||38!==t.which&&40!==t.which?void 0:(n.vrdd=38===t.which,n.shiftDown?n.hasSelection?(n.de.y=Math.max(0,Math.min(n.textHeightPX,n.de.y+(n.vrdd?-n.lineHeight:n.lineHeight))),n.updateClosestIndex(n.de,!1),Math.abs(n.si-n.ei)<=1?n.setCaretIndex(n.sie?n.si+1:n.si):(n.caret._index=(n.eie?n.ei+1:n.ei)+(n.caret._down?-1:0),n.selectRange(n.caret._down?n.si:n.si-1,n.caret._index))):(n.si=n.caret._index,n.sie=!1,n.de.copyFrom(n.caret),n.de.y=Math.max(0,Math.min(n.textHeightPX,n.de.y+(n.vrdd?-n.lineHeight:n.lineHeight))),n.updateClosestIndex(n.de,!1),n.caret._index=(n.eie?n.ei+1:ei)-(n.vrdd?0:1),n.selectRange(n.vrdd?n.si-1:n.si,n.caret._index),n.caret._down=!n.vrdd):n.hasSelection?n.setCaretIndex(n.vrdd?n.selectionStart:n.selectionEnd+1):(n.ds.copyFrom(n.caret),n.ds.y+=n.vrdd?-n.lineHeight:n.lineHeight,n.ds.x+=1,n.updateClosestIndex(n.ds,!0),n.setCaretIndex(n.sie?n.si+1:n.si)),void t.preventDefault());if(n.rdd=37===t.which,n.shiftDown)if(n.hasSelection){if(n.selectionStart===n.caret._index)if(n.selectionStart===n.selectionEnd&&n.rdd===n.caret._forward)n.setCaretIndex(n.caret._forward?n.caret._index:n.caret._index+1);else{var e=n.rdd?n.caret._index-1:n.caret._index+1;n.selectRange(e,n.selectionEnd),n.caret._index=Math.min(n.chars.length-1,Math.max(0,e))}else{var i=n.rdd?n.caret._index-1:n.caret._index+1;n.selectRange(n.selectionStart,i),n.caret._index=Math.min(n.chars.length-1,Math.max(0,i))}}else{var o=n.caret._atEnd?n.caret._index+1:n.caret._index,r=n.rdd?o-1:o;n.selectRange(r,r),n.caret._index=r,n.caret._forward=!rdd}else n.hasSelection?n.setCaretIndex(n.rdd?n.selectionStart:n.selectionEnd+1):n.setCaretIndex(n.caret._index+(n.rdd?n.caret._atEnd?0:-1:1));t.preventDefault()}},n.keyUpEvent=function(t){t.which!==n.ctrlKey&&t.which!==n.cmdKey||(n.ctrlDown=!1),t.which===n.shiftKey&&(n.shiftDown=!1),n.emit("keyup",t),t.defaultPrevented},n.copyEvent=function(t){if(n.emit("copy",t),!t.defaultPrevented){if(n.hasSelection)(t.clipboardData||window.clipboardData).setData("Text",n.value.slice(n.selectionStart,n.selectionEnd+1));t.preventDefault()}},n.cutEvent=function(t){n.emit("cut",t),t.defaultPrevented||(n.hasSelection&&(n.copyEvent(t),n.deleteSelection()),t.preventDefault())},n.pasteEvent=function(t){if(n.emit("paste",t),!t.defaultPrevented){var e=t.clipboardData||window.clipboardData;n.insertTextAtCaret(e.getData("Text")),t.preventDefault()}},n.inputEvent=function(t){var e=dt.value;e.length&&(n.insertTextAtCaret(e),dt.value=""),t.preventDefault()},n.inputBlurEvent=function(t){n.blur()},n.focus=function(){if(!n._focused){t.prototype.focus.call(n);var e=n.contentContainer.worldTransform.tx+"px",i=n.contentContainer.worldTransform.ty+"px",o=n.contentContainer.height+"px",r=n.contentContainer.width+"px";dt.setAttribute("style","position:fixed; left:"+e+"; top:"+i+"; height:"+o+"; width:"+r+";"),dt.value="",dt.focus(),dt.setAttribute("style","position:fixed; left:-10px; top:-10px; width:0px; height: 0px;"),n.innerContainer.cacheAsBitmap=!1,dt.addEventListener("blur",n.inputBlurEvent,!1),document.addEventListener("keydown",n.keyDownEvent,!1),document.addEventListener("keyup",n.keyUpEvent,!1),document.addEventListener("paste",n.pasteEvent,!1),document.addEventListener("copy",n.copyEvent,!1),document.addEventListener("cut",n.cutEvent,!1),dt.addEventListener("input",n.inputEvent,!1),setTimeout((function(){n.caret.visible||n.selection.visible||n.multiLine||n.setCaretIndex(n.chars.length)}),0)}},n.blur=function(){n._focused&&(t.prototype.blur.call(n),n.ctrlDown=!1,n.shiftDown=!1,n.hideCaret(),n.clearSelection(),n.chars.length>1&&(n.innerContainer.cacheAsBitmap=!0),dt.removeEventListener("blur",n.inputBlurEvent),document.removeEventListener("keydown",n.keyDownEvent),document.removeEventListener("keyup",n.keyUpEvent),document.removeEventListener("paste",n.pasteEvent),document.removeEventListener("copy",n.copyEvent),document.removeEventListener("cut",n.cutEvent),dt.removeEventListener("input",n.inputEvent),dt.blur()),n.multiLine||n.resetScrollPosition()},n.setCaretIndex=function(t){if(n.caret._atEnd=t>=n.chars.length,n.caret._index=Math.max(0,Math.min(n.chars.length-1,t)),n.chars.length&&t>0){var e=Math.max(0,Math.min(t,n.chars.length-1)),i=n.chars[e];i&&i.wrapped?(n.caret.x=i.x,n.caret.y=i.y):(e=Math.max(0,Math.min(t-1,n.chars.length-1)),i=n.chars[e],n.caret.x=n.chars[e].x+n.chars[e].width,n.caret.y=n.chars[e].lineIndex*n.lineHeight+.5*(n.lineHeight-n.textHeight))}else n.caret.x=0,n.caret.y=.5*(n.lineHeight-n.textHeight);n.scrollToPosition(n.caret),n.showCaret()},n.select=function(){n.selectRange(0,n.chars.length-1)},n.selectWord=function(t){for(var e=n.chars.length,i=0,o=0;o<n.chars.length;o++)n.chars[o].wordIndex===t&&(o<e&&(e=o),o>i&&(i=o));n.selectRange(e,i)},n.selectRange=function(t,e){if(t>-1&&e>-1){var i=Math.min(t,e,n.chars.length-1),o=Math.min(Math.max(t,e),n.chars.length-1);i===n.selectionStart&&o===n.selectionEnd||(n.hasSelection=!0,n.selection.visible=!0,n.selectionStart=i,n.selectionEnd=o,n.hideCaret(),n.updateSelectionGraphics(),n.updateSelectionColors()),n.focus()}else n.clearSelection()},n.clearSelection=function(){n.hasSelection&&(n.hasSelection=!1,n.selection.visible=!1,n.selectionStart=-1,n.selectionEnd=-1,n.updateSelectionColors())},n.updateSelectionGraphics=function(){var t=n.chars[n.selectionStart];if(void 0!==t){var e=t.x,i=t.y,o=0,r=n.textHeight,s=t.lineIndex;n.selection.clear();for(var a=n.selectionStart;a<=n.selectionEnd;a++){var h=n.chars[a];h.lineIndex!=s&&(n.drawSelectionRect(e,i,o,r),e=h.x,i=h.y,s=h.lineIndex,o=0),o+=h.width}n.drawSelectionRect(e,i,o,r),n.innerContainer.addChildAt(n.selection,0)}},n.drawSelectionRect=function(t,e,i,o){n.selection.beginFill("0x"+n.selectedBackgroundColor.slice(1),1),n.selection.moveTo(t,e),n.selection.lineTo(t+i,e),n.selection.lineTo(t+i,e+o),n.selection.lineTo(t,e+o),n.selection.endFill()},void 0===dt&&((dt=document.createElement("INPUT")).setAttribute("type","text"),dt.setAttribute("id","_pui_tempInput"),dt.setAttribute("style","position:fixed; left:-10px; top:-10px; width:0px; height: 0px;"),document.body.appendChild(dt)),n.options=i,n._dirtyText=!0,n.maxLength=i.maxLength||0,n._value=n._lastValue=i.value||"",n.maxLength&&(n._value=n._value.slice(0,n.maxLength)),n.chars=[],n.multiLine=void 0!==i.multiLine&&i.multiLine,n.color=i.style&&i.style.fill?i.style.fill:"#000000",n.selectedColor=i.selectedColor||"#ffffff",n.selectedBackgroundColor=i.selectedBackgroundColor||"#318cfa",n.tempText=new e.Text("1",i.style),n.textHeight=n.tempText.height,n.lineHeight=i.lineHeight||n.textHeight||n._height,n.tempText.destroy(),n.selection=new e.Graphics,n.selection.visible=!1,n.selection._startIndex=0,n.selection._endIndex=0,n.caret=new e.Graphics,n.caret.visible=!1,n.caret._index=0,n.caret.lineStyle(i.caretWidth||1,"#ffffff",1),n.caret.moveTo(0,0),n.caret.lineTo(0,n.textHeight);var o=void 0!==i.paddingLeft?i.paddingLeft:i.padding,r=void 0!==i.paddingRight?i.paddingRight:i.padding,s=void 0!==i.paddingBottom?i.paddingBottom:i.padding,a=void 0!==i.paddingTop?i.paddingTop:i.padding;return n.textContainer=new ut({scrollX:!n.multiLine,scrollY:n.multiLine,dragScrolling:n.multiLine,expandMask:2,softness:.2,overflowX:40,overflowY:40}).setPadding(o||3,a||3,r||3,s||3),n.addChild(n.textContainer),n.multiLine&&(n._useNext=n._usePrev=!1,n.textContainer.dragRestrictAxis="y",n.textContainer.dragThreshold=5,n.dragRestrictAxis="x",n.dragThreshold=5),n.sp=new e.Point,n._sp=new e.Point,n.ds=new e.Point,n.de=new e.Point,n.rdd=!1,n.vrdd=!1,n.selectionStart=-1,n.selectionEnd=-1,n.hasSelection=!1,n.t=performance.now(),n.cc=0,n.textLengthPX=0,n.textHeightPX=0,n.lineIndexMax=0,n.ctrlDown=!1,n.shiftDown=!1,n.shiftKey=16,n.ctrlKey=17,n.cmdKey=91,n.setupDrag(),n}return o(i,t),i.prototype.setupDrag=function(){var t=this,e=new r(this);e.onPress=function(e,i){if(i){var n=performance.now()-t.t;if(t.t=performance.now(),n<250)if(t.cc++,t.cc>1)t.select();else{t.innerContainer.toLocal(t.sp,void 0,t.ds,!0),t.updateClosestIndex(t.ds,!0);var o=t.chars[t.si];o&&(-1!=o.wordIndex?t.selectWord(o.wordIndex):t.selectRange(t.si,t.si))}else t.cc=0,t.sp.copyFrom(e.data.global),t.innerContainer.toLocal(t.sp,void 0,t.ds,!0),t.chars.length&&(t.updateClosestIndex(t.ds,!0),t.setCaretIndex(t.sie?t.si+1:t.si))}e.data.originalEvent.preventDefault()},e.onDragMove=function(e,i){t.chars.length&&t._focused&&(t.de.x=t.sp.x+i.x,t.de.y=t.sp.y+i.y,t.innerContainer.toLocal(t.de,void 0,t.de,!0),t.updateClosestIndex(t.de,!1),t.si<t.ei?(t.selectRange(t.sie?t.si+1:t.si,t.eie?t.ei:t.ei-1),t.caret._index=t.eie?t.ei:t.ei-1):t.si>t.ei?(t.selectRange(t.ei,t.sie?t.si:t.si-1),t.caret._index=t.ei):t.sie===t.eie?t.setCaretIndex(t.sie?t.si+1:t.si):(t.selectRange(t.si,t.ei),t.caret._index=t.ei),t.caret._forward=t.si<=t.ei,t.caret._down=i.y>0,t.scrollToPosition(t.de))}},Object.defineProperty(i.prototype,"innerContainer",{get:function(){return this.textContainer.innerContainer},enumerable:!0,configurable:!0}),i.prototype.update=function(){this.width!==this._lastWidth&&(this._lastWidth=this._width,this.multiLine&&(this.updateText(),this.caret.visible&&this.setCaretIndex(this.caret._index),this.hasSelection&&this.updateSelectionGraphics())),this._dirtyText&&(this.updateText(),this._dirtyText=!1)},i.prototype.updateText=function(){this.textLengthPX=0,this.textHeightPX=0,this.lineIndexMax=0;var t=0,i=this._value.length,n=0,o=.5*(this.lineHeight-this.textHeight),r=0;if(this.chars.length>i){for(r=this.chars.length-1;r>=i;r--)this.innerContainer.removeChild(this.chars[r]),this.chars[r].destroy();this.chars.splice(i,this.chars.length-i)}var s=!1,a=!1,h=0,l=-1,c=!1;for(r=0;r<this._value.length;r++){(s||a)&&(l=r,h++);var d=this._value[r];s=" "===d,(a="\n"===d)&&(d="");var u=this.chars[r];u?u.text=d:(u=new e.Text(d,this.options.style),this.innerContainer.addChild(u),this.chars.push(u)),u.scale.x=a?0:1,u.wrapped=c,c=!1,!(a||this.multiLine&&n+u.width>=this._width-this.paddingLeft-this.paddingRight)||(t++,n=0,o+=this.lineHeight,-1===l||a)?(u.lineIndex=t,u.x=n,u.y=o,u.wordIndex=s||a?-1:h,(n+=u.width)>this.textLengthPX&&(this.textLengthPX=n),o>this.textHeightPX&&(this.textHeightPX=o)):(r=l-1,l=-1,c=!0)}this.lineIndexMax=t,this.innerContainer.addChild(this.caret),this.innerContainer.cacheAsBitmap&&(this.innerContainer.cacheAsBitmap=!1,this.innerContainer.cacheAsBitmap=!0),this.textContainer.update()},i.prototype.updateClosestIndex=function(t,e){var i=99999,n=-1,o=!1,r=0;this.lineIndexMax>0&&(r=Math.max(0,Math.min(this.lineIndexMax,Math.floor(t.y/this.lineHeight))));for(var s=0;s<this.chars.length;s++){var a=this.chars[s];if(a.lineIndex===r){var h=Math.abs(t.x-(a.x+.5*a.width));h<i&&(i=h,n=s,o=t.x>a.x+.5*a.width)}}e?(this.si=n,this.sie=o):(this.ei=n,this.eie=o)},i.prototype.deleteSelection=function(){return!!this.hasSelection&&(this.value=this.value.slice(0,this.selectionStart)+this.value.slice(this.selectionEnd+1),this.setCaretIndex(this.selectionStart),!0)},i.prototype.updateSelectionColors=function(){for(var t=0;t<this.chars.length;t++)t>=this.selectionStart&&t<=this.selectionEnd?this.chars[t].style.fill=this.selectedColor:this.chars[t].style.fill=this.color},i.prototype.scrollToPosition=function(t){this._sp.x=t.x,this._sp.y=t.y,this.multiLine&&this._sp.y>=this.lineHeight&&(this._sp.y+=this.lineHeight),this.textContainer.focusPosition(this._sp)},i.prototype.resetScrollPosition=function(){this._sp.set(0,0),this.textContainer.focusPosition(this._sp)},i.prototype.hideCaret=function(){this.caret.visible=!1,clearInterval(this.caretInterval)},i.prototype.showCaret=function(){var t=this;this.clearSelection(),clearInterval(this.caretInterval),this.caret.alpha=1,this.caret.visible=!0,this.caretInterval=setInterval((function(){t.caret.alpha=0===t.caret.alpha?1:0}),500)},i.prototype.insertTextAtCaret=function(t){if(this.multiLine||-1===t.indexOf("\n")||(t=t.replace(/\n/g,"")),this.hasSelection&&this.deleteSelection(),!this.maxLength||this.chars.length<this.maxLength)if(this.caret._atEnd)this.valueEvent+=t,this.setCaretIndex(this.chars.length);else{var e=Math.min(this.chars.length-1,this.caret._index);this.valueEvent=this.value.slice(0,e)+t+this.value.slice(e),this.setCaretIndex(e+t.length)}},Object.defineProperty(i.prototype,"valueEvent",{get:function(){return this._value},set:function(t){this.maxLength&&(t=t.slice(0,this.maxLength)),this._value!=t&&(this.value=t,this.emit("change"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){this.maxLength&&(t=t.slice(0,this.maxLength)),this._value!=t&&(this._lastValue=this._value,this._value=t,this._dirtyText=!0,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.value},set:function(t){this.value=t},enumerable:!0,configurable:!0}),i}(M),yt=function(t){function i(i,n,o){var r=this,s=new e.extras.TilingSprite(i);return(r=t.call(this,n||s.width,o||s.height)||this).sprite=s,r.contentContainer.addChild(r.sprite),r}return o(i,t),i.prototype.update=function(){null!==this.tint&&(this.sprite.tint=this.tint),null!==this.blendMode&&(this.sprite.blendMode=this.blendMode),this.sprite.width=this._width,this.sprite.height=this._height},Object.defineProperty(i.prototype,"tilePosition",{get:function(){return this.sprite.tilePosition},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tilingPosition",{set:function(t){this.sprite.tilePosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tileScale",{get:function(){return this.sprite.tileScale},set:function(t){this.sprite.tileScale=t},enumerable:!0,configurable:!0}),i}(g),wt=function(){function e(){this.noPercents=!1}return e.prototype.onAttach=function(t){this.host=t},e.prototype.onDetach=function(){this.host=null},e.prototype.measureChild=function(e,i,n,o,r){var s,a,h=e.layoutOptions||d.DEFAULT,l=h.anchorLeft||0,c=h.anchorTop||0,u=h.anchorRight||0,p=h.anchorBottom||0,f=0,g=0;this.noPercents||Math.abs(l)>1&&Math.abs(u)>1?(f=Math.ceil(u)-Math.floor(l),s=t.MeasureMode.AT_MOST):Math.abs(l)<1&&Math.abs(u)<1?(f=i*(u-l),s=o===t.MeasureMode.UNBOUNDED?t.MeasureMode.UNBOUNDED:t.MeasureMode.AT_MOST):Math.abs(l)<1?(f=u,s=t.MeasureMode.AT_MOST):(f=i*u-l,s=o===t.MeasureMode.UNBOUNDED?t.MeasureMode.UNBOUNDED:t.MeasureMode.AT_MOST),this.noPercents||Math.abs(c)>1&&Math.abs(p)>1?(g=Math.ceil(p)-Math.floor(c),a=t.MeasureMode.AT_MOST):Math.abs(c)<1&&Math.abs(p)<1?(g=n*(p-c),a=r===t.MeasureMode.UNBOUNDED?t.MeasureMode.UNBOUNDED:t.MeasureMode.AT_MOST):Math.abs(c)<1?(g=p,a=t.MeasureMode.AT_MOST):(g=n*p-c,a=r===t.MeasureMode.UNBOUNDED?t.MeasureMode.UNBOUNDED:t.MeasureMode.AT_MOST),e.measure(f,g,s,a)},e.prototype.measureStretch=function(t,e,i){return this.noPercents||Math.abs(e)>1&&Math.abs(t)>1?Math.max(t,e):Math.abs(t)<1&&Math.abs(e)<1?i/(e-t):Math.abs(t)<1?e:(i+t)/e},e.prototype.measureChildren=function(t,e,i,n){for(var o=this.host.widgetChildren,r=0,s=o.length;r<s;r++)this.measureChild(o[r],t,e,i,n)},e.prototype.onMeasure=function(e,i,n,o){n===t.MeasureMode.EXACTLY&&o===t.MeasureMode.EXACTLY&&(this.measuredWidth=e,this.measuredHeight=i,this.measureChildren(this.measuredWidth,this.measuredHeight,t.MeasureMode.EXACTLY,t.MeasureMode.EXACTLY));var r=0,s=0,a=this.host.widgetChildren;this.measureChildren(e,i,n,o);for(var h=0,l=a.length;h<l;h++){var c=a[h],u=c.layoutOptions||d.DEFAULT,p=u.anchorLeft||0,f=u.anchorTop||0,g=u.anchorRight||0,m=u.anchorBottom||0;r=Math.max(r,this.measureStretch(p,g,c.getMeasuredWidth())),s=Math.max(s,this.measureStretch(f,m,c.getMeasuredHeight()))}n===t.MeasureMode.EXACTLY?this.measuredWidth=e:n===t.MeasureMode.AT_MOST?this.measuredWidth=Math.min(r,e):this.measuredWidth=r,o===t.MeasureMode.EXACTLY?this.measuredHeight=i:o===t.MeasureMode.AT_MOST?this.measuredHeight=Math.min(s,i):this.measuredHeight=s,this.measureChildren(this.measuredWidth,this.measuredHeight,t.MeasureMode.EXACTLY,t.MeasureMode.EXACTLY)},e.prototype.getMeasuredWidth=function(){return this.measuredWidth},e.prototype.getMeasuredHeight=function(){return this.measuredHeight},e.prototype.onLayout=function(){for(var e=this.host,i=e.widgetChildren,n=0;n<i.length;n++){var o=i[n],r=o.layoutOptions||{},s=o.measuredWidth,a=o.measuredHeight,h=r.anchorLeft||0,l=r.anchorTop||0,c=r.anchorRight||0,d=r.anchorBottom||0;h>-1&&h<=1&&(h*=e.width),l>-1&&l<=1&&(l*=e.height),c>-1&&c<=1&&(c*=e.width),d>-1&&d<=1&&(d*=e.height);var u=0,p=0;if(0!==s)switch(r.horizontalAlign||t.ALIGN.NONE){case t.ALIGN.LEFT:u=h;break;case t.ALIGN.MIDDLE:u=(c-h-s)/2;break;case t.ALIGN.RIGHT:u=c-s}else u=h,s=c-h;if(0!==a)switch(r.verticalAlign||t.ALIGN.NONE){case t.ALIGN.TOP:p=l;break;case t.ALIGN.MIDDLE:p=(d-l-a)/2;break;case t.ALIGN.RIGHT:p=d-s}else p=c,a=d-l;o.layout(u,p,u+s,p+a)}},e}();t.AnchorLayout=wt,t.AnchorLayoutOptions=u,t.Button=C,t.CheckBox=k,t.DynamicText=S,t.DynamicTextStyle=L,t.Ease=B,t.FastLayoutOptions=p,t.Helpers=z,t.Insets=l,t.Interaction=V,t.InteractiveGroup=T,t.LayoutOptions=d,t.ScrollBar=lt,t.ScrollingContainer=ut,t.SliceSprite=ft,t.Slider=ht,t.SortableList=pt,t.Sprite=gt,t.Stage=mt,t.Text=vt,t.TextInput=_t,t.Ticker=ct,t.TilingSprite=yt,t.Tween=at,t.Widget=g,t.WidgetGroup=x,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=pixi-ui.min.js.map

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],e):e((t=t||self).PUXI={},t.PIXI)}(this,(function(t,e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){this.width=0,this.height=0,this.minWidth=0,this.minHeight=0,this.maxWidth=null,this.maxHeight=null,this.left=null,this.right=null,this.top=null,this.bottom=null,this.anchorLeft=null,this.anchorRight=null,this.anchorTop=null,this.anchorBottom=null,this.widthPct=null,this.heightPct=null,this.minWidthPct=null,this.minHeightPct=null,this.maxWidthPct=null,this.maxHeightPct=null,this.leftPct=null,this.rightPct=null,this.topPct=null,this.bottomPct=null,this.anchorLeftPct=null,this.anchorRightPct=null,this.anchorTopPct=null,this.anchorBottomPct=null,this.pivotX=0,this.pivotY=0,this.scaleX=1,this.scaleY=1,this.verticalAlign=null,this.horizontalAlign=null,this.rotation=null,this.blendMode=null,this.tint=null,this.alpha=1,this.draggable=null,this.dragRestricted=!1,this.dragRestrictAxis=null,this.dragThreshold=0,this.dragGroup=null,this.dragContainer=null,this.droppable=null,this.droppableReparent=null,this.dropGroup=null},o=function(){function t(t){var i=this;this._onDragStart=function(t){var e=i,n=e.obj,u=e.start,o=e._onDragMove,s=e._onDragEnd;i.id=t.data.identifier,i.onPress.call(n,t,!0),i.bound||(u.copyFrom(t.data.global),n.stage.on("mousemove",o),n.stage.on("touchmove",o),n.stage.on("mouseup",s),n.stage.on("mouseupoutside",s),n.stage.on("touchend",s),n.stage.on("touchendoutside",s),n.stage.on("touchcancel",s),i.bound=!0),t.data.originalEvent.preventDefault()},this._onDragMove=function(t){if(t.data.identifier===i.id){var e=i,n=e.mouse,u=e.offset,o=e.start,s=e.obj;if(n.copyFrom(t.data.global),u.set(n.x-o.x,n.y-o.y),!i.dragging){if(i.movementX=Math.abs(u.x),i.movementY=Math.abs(u.y),0===i.movementX&&0===i.movementY||Math.max(i.movementX,i.movementY)<s.dragThreshold)return;if(null!==s.dragRestrictAxis&&(i.cancel=!1,("x"===s.dragRestrictAxis&&i.movementY>i.movementX||"y"===s.dragRestrictAxis&&i.movementY<=i.movementX)&&(i.cancel=!0),i.cancel))return void i._onDragEnd(t);i.onDragStart.call(s,t),i.dragging=!0}i.onDragMove.call(s,t,u)}},this._onDragEnd=function(t){if(t.data.identifier===i.id){var e=i,n=e.obj,u=e._onDragMove,o=e._onDragEnd;i.bound&&(n.stage.removeListener("mousemove",u),n.stage.removeListener("touchmove",u),n.stage.removeListener("mouseup",o),n.stage.removeListener("mouseupoutside",o),n.stage.removeListener("touchend",o),n.stage.removeListener("touchendoutside",o),n.stage.removeListener("touchcancel",o),i.dragging=!1,i.bound=!1,i.onDragEnd.call(n,t),i.onPress.call(n,t,!1))}},this.bound=!1,this.start=new e.Point,this.offset=new e.Point,this.mouse=new e.Point,this.movementX=0,this.movementY=0,this.cancel=!1,this.dragging=!1,this.id=0,this.obj=t,this.obj.container.interactive=!0,this.startEvent()}return t.prototype.stopEvent=function(){var t=this.obj,e=this._onDragStart,i=this._onDragMove,n=this._onDragEnd;this.bound&&(t.stage.removeListener("mousemove",i),t.stage.removeListener("touchmove",i),t.stage.removeListener("mouseup",n),t.stage.removeListener("mouseupoutside",n),t.stage.removeListener("touchend",n),t.stage.removeListener("touchendoutside",n),this.bound=!1),t.container.removeListener("mousedown",e),t.container.removeListener("touchstart",e)},t.prototype.startEvent=function(){var t=this.obj,e=this._onDragStart;t.container.on("mousedown",e),t.container.on("touchstart",e)},t.prototype.onPress=function(t,e){},t.prototype.onDragStart=function(t){},t.prototype.onDragMove=function(t,e){},t.prototype.onDragEnd=function(t){},t}();const s=[],r={add:(t,e)=>(t._dragDropEventId=e.data.identifier,-1===s.indexOf(t)&&(s.push(t),!0)),getItem(t){let e,i=null;for(let n=0;n<s.length;n++)if(s[n]===t){i=s[n],e=n;break}return null!==i&&(s.splice(e,1),i)},getEventItem(t,e){let i,n=null;const u=t.data.identifier;for(let t=0;t<s.length;t++)if(s[t]._dragDropEventId===u){if(e!==s[t].dragGroup)return!1;n=s[t],i=t;break}return null!==n&&(s.splice(i,1),n)}};var h,D=function(t){function i(i,n){var o=t.call(this)||this;return o.container=new e.Container,o.setting=new u,o.children=[],o.stage=null,o.initialized=!1,o.dragInitialized=!1,o.dropInitialized=!1,o.dirty=!0,o._oldWidth=-1,o._oldHeight=-1,o.pixelPerfect=!0,i&&isNaN(i)&&-1!=i.indexOf("%")?o.setting.widthPct=.01*parseFloat(i.replace("%","")):o.setting.widthPct=null,n&&isNaN(n)&&-1!=n.indexOf("%")?o.setting.heightPct=.01*parseFloat(n.replace("%","")):o.setting.heightPct=null,o.setting.width=i||0,o.setting.height=n||0,o._width=0,o._height=0,o._minWidth=null,o._minHeight=null,o._maxWidth=null,o._maxHeight=null,o._anchorLeft=null,o._anchorRight=null,o._anchorTop=null,o._anchorBottom=null,o._left=null,o._right=null,o._top=null,o._bottom=null,o._dragPosition=null,o}return n(i,t),i.prototype.updatesettings=function(t,e){if(!this.initialized){if(null===this.parent||null===this.parent.stage||!this.parent.initialized)return;this.initialize()}e&&this.updateParent(),this.baseupdate(),this.update(),t&&this.updateChildren()},i.prototype.updateParent=function(){null!==this.parent&&this.parent.updatesettings&&this.parent.updatesettings(!1,!0)},i.prototype.baseupdate=function(){if(null!==this.parent){var t,e;this.dirty=!0,this._width=this.actual_width,this._height=this.actual_height,this._minWidth=this.actual_minWidth,this._minHeight=this.actual_minHeight,this._maxWidth=this.actual_maxWidth,this._maxHeight=this.actual_maxHeight,this._anchorLeft=this.actual_anchorLeft,this._anchorRight=this.actual_anchorRight,this._anchorTop=this.actual_anchorTop,this._anchorBottom=this.actual_anchorBottom,this._left=this.actual_left,this._right=this.actual_right,this._top=this.actual_top,this._bottom=this.actual_bottom,this._parentWidth=e=this.parent._width,this._parentHeight=t=this.parent._height,this.dirty=!1;var i=this.pivotX*this._width,n=this.pivotY*this._height;if(this.pixelPerfect&&(i=Math.round(i),n=Math.round(n)),null===this.horizontalAlign){null!==this._anchorLeft&&null===this._anchorRight&&null!==this._right?this._anchorRight=this._right:null===this._anchorLeft&&null!==this._anchorRight&&null!==this._left?this._anchorLeft=this._left:null===this._anchorLeft&&null===this._anchorRight&&null!==this._left&&null!==this._right&&(this._anchorLeft=this._left,this._anchorRight=this._right);var u=null!==this._anchorLeft||null!==this._anchorRight;!u&&(null!==this._left||null!==this._right)?null!==this._left?this.container.position.x=this._left:null!==this._right&&(this.container.position.x=e-this._right):u?(null!==this._anchorLeft&&null===this._anchorRight?this.container.position.x=this._anchorLeft:null===this._anchorLeft&&null!==this._anchorRight?this.container.position.x=e-this._width-this._anchorRight:null!==this._anchorLeft&&null!==this._anchorRight&&(this.container.position.x=this._anchorLeft,this._width=e-this._anchorLeft-this._anchorRight),this.container.position.x+=i):this.container.position.x=0}if(null===this.verticalAlign){null!==this._anchorTop&&null===this._anchorBottom&&null!==this._bottom&&(this._anchorBottom=this._bottom),null===this._anchorTop&&null!==this._anchorBottom&&null!==this._top&&(this._anchorTop=this._top);var o=null!==this._anchorTop||null!==this._anchorBottom;!o&&(null!==this._top||null!==this._bottom)?null!==this._top?this.container.position.y=this._top:null!==this._bottom&&(this.container.position.y=t-this._bottom):o?(null!==this._anchorTop&&null===this._anchorBottom?this.container.position.y=this._anchorTop:null===this._anchorTop&&null!==this._anchorBottom?this.container.position.y=t-this._height-this._anchorBottom:null!==this._anchorTop&&null!==this._anchorBottom&&(this.container.position.y=this._anchorTop,this._height=t-this._anchorTop-this._anchorBottom),this.container.position.y+=n):this.container.position.y=0}null!==this._maxWidth&&this._width>this._maxWidth&&(this._width=this._maxWidth),this._width<this._minWidth&&(this._width=this._minWidth),null!==this._maxHeight&&this._height>this._maxHeight&&(this._height=this._maxHeight),this._height<this._minHeight&&(this._height=this._minHeight),null!==this.horizontalAlign&&("center"==this.horizontalAlign?this.container.position.x=.5*e-.5*this._width:"right"==this.horizontalAlign?this.container.position.x=e-this._width:this.container.position.x=0,this.container.position.x+=i),null!==this.verticalAlign&&("middle"==this.verticalAlign?this.container.position.y=.5*t-.5*this._height:"bottom"==this.verticalAlign?this.container.position.y=t-this._height:this.container.position.y=0,this.container.position.y+=n),this.dragging&&!this.setting.dragRestricted&&(this.container.position.x=this._dragPosition.x,this.container.position.y=this._dragPosition.y),null!==this.setting.scaleX&&(this.container.scale.x=this.setting.scaleX),null!==this.setting.scaleY&&(this.container.scale.y=this.setting.scaleY),null!==this.setting.pivotX&&(this.container.pivot.x=i),null!==this.setting.pivotY&&(this.container.pivot.y=n),null!==this.setting.alpha&&(this.container.alpha=this.setting.alpha),null!==this.setting.rotation&&(this.container.rotation=this.setting.rotation),this.pixelPerfect&&(this._width=Math.round(this._width),this._height=Math.round(this._height),this.container.position.x=Math.round(this.container.position.x),this.container.position.y=Math.round(this.container.position.y))}},i.prototype.updateChildren=function(){for(var t=0;t<this.children.length;t++)this.children[t].updatesettings(!0)},i.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.container.addChild(t.container),this.children.push(t),this.updatesettings(!0,!0);return t},i.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1!==n){var u=t.parent;t.container.parent;t.container.parent.removeChild(t.container),this.children.splice(n,1),t.parent=null,setTimeout((function(){u.updatesettings&&u.updatesettings(!0,!0)}),0)}}},i.prototype.initialize=function(){this.initialized=!0,this.stage=this.parent.stage,this.draggable&&this.initDraggable(),this.droppable&&this.initDroppable()},i.prototype.clearDraggable=function(){this.dragInitialized&&(this.dragInitialized=!1,this.drag.stopEvent())},i.prototype.initDraggable=function(){if(!this.dragInitialized){this.dragInitialized=!0;var t=new e.Point,i=new e.Point,n=this;this._dragPosition=new e.Point,this.drag=new o(this),this.drag.onDragStart=function(e){var n=r.add(this,e);if(!this.dragging&&n){if(this.dragging=!0,this.container.interactive=!1,t.copy(this.container.position),this.dragContainer){var u=this.dragContainer.container?this.dragContainer.container:this.dragContainer;u&&(i.set(u.worldTransform.tx-this.parent.container.worldTransform.tx,u.worldTransform.ty-this.parent.container.worldTransform.ty),u.addChild(this.container))}else i.set(0);this.emit("draggablestart",e)}},this.drag.onDragMove=function(e,n){this.dragging&&(this._dragPosition.set(t.x+n.x-i.x,t.y+n.y-i.y),this.x=this._dragPosition.x,this.y=this._dragPosition.y,this.emit("draggablemove",e))},this.drag.onDragEnd=function(t){this.dragging&&(this.dragging=!1,setTimeout((function(){if(n.container.interactive=!0,r.getItem(n)){var e=n.parent===n.stage?n.stage:n.parent.container;e.toLocal(n.container.position,n.container.parent,n),e!=n.container&&n.parent.addChild(n)}n.emit("draggableend",t)}),0))}}},i.prototype.clearDroppable=function(){this.dropInitialized&&(this.dropInitialized=!1,this.container.removeListener("mouseup",this.onDrop),this.container.removeListener("touchend",this.onDrop))},i.prototype.initDroppable=function(){if(!this.dropInitialized){this.dropInitialized=!0;var t=this.container,e=this;this.container.interactive=!0,this.onDrop=function(t){var i=r.getEventItem(t,e.dropGroup);if(i&&i.dragging){i.dragging=!1,i.container.interactive=!0;var n=null!==e.droppableReparent?e.droppableReparent:e;n.container.toLocal(i.container.position,i.container.parent,i),n.container!=i.container.parent&&n.addChild(i)}},t.on("mouseup",this.onDrop),t.on("touchend",this.onDrop)}},Object.defineProperty(i.prototype,"x",{get:function(){return this.setting.left},set:function(t){this.left=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.setting.top},set:function(t){this.top=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.setting.width},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.widthPct=.01*parseFloat(t.replace("%","")):this.setting.widthPct=null,this.setting.width=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_width",{get:function(){return this.dirty&&(null!==this.setting.widthPct?this._width=this.parent._width*this.setting.widthPct:this._width=this.setting.width),this._width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.setting.height},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.heightPct=.01*parseFloat(t.replace("%","")):this.setting.heightPct=null,this.setting.height=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_height",{get:function(){return this.dirty&&(null!==this.setting.heightPct?this._height=this.parent._height*this.setting.heightPct:this._height=this.setting.height),this._height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minWidth",{get:function(){return this.setting.minWidth},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.minWidthPct=.01*parseFloat(t.replace("%","")):this.setting.minWidthPct=null,this.setting.minWidth=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),i.prototype.actual_minWidth=function(){return this.dirty&&(null!==this.setting.minWidthPct?this._minWidth=this.parent._width*this.setting.minWidthPct:this._minWidth=this.setting.minWidth),this._minWidth},Object.defineProperty(i.prototype,"minHeight",{get:function(){return this.setting.minHeight},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.minHeightPct=.01*parseFloat(t.replace("%","")):this.setting.minHeightPct=null,this.setting.minHeight=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_minHeight",{get:function(){return this.dirty&&(null!==this.setting.minHeightPct?this._minHeight=this.parent._height*this.setting.minHeightPct:this._minHeight=this.setting.minHeight),this._minHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this.setting.maxWidth},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.maxWidthPct=.01*parseFloat(t.replace("%","")):this.setting.maxWidthPct=null,this.setting.maxWidth=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_maxWidth",{get:function(){return this.dirty&&(null!==this.setting.maxWidthPct?this._maxWidth=this.parent._width*this.setting.maxWidthPct:this._maxWidth=this.setting.maxWidth),this._maxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxHeight",{get:function(){return this.setting.maxHeight},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.maxHeightPct=.01*parseFloat(t.replace("%","")):this.setting.maxHeightPct=null,this.setting.maxHeight=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_maxHeight",{get:function(){return this.dirty&&(null!==this.setting.maxHeightPct?this._maxHeight=this.parent._height*this.setting.maxHeightPct:this._maxHeight=this.setting.maxHeight),this._maxHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorLeft",{get:function(){return this.setting.anchorLeft},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.anchorLeftPct=.01*parseFloat(t.replace("%","")):this.setting.anchorLeftPct=null,this.setting.anchorLeft=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_anchorLeft",{get:function(){return this.dirty&&(null!==this.setting.anchorLeftPct?this._anchorLeft=this.parent._width*this.setting.anchorLeftPct:this._anchorLeft=this.setting.anchorLeft),this._anchorLeft},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorRight",{get:function(){return this.setting.anchorRight},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.anchorRightPct=.01*parseFloat(t.replace("%","")):this.setting.anchorRightPct=null,this.setting.anchorRight=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_anchorRight",{get:function(){return this.dirty&&(null!==this.setting.anchorRightPct?this._anchorRight=this.parent._width*this.setting.anchorRightPct:this._anchorRight=this.setting.anchorRight),this._anchorRight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorTop",{get:function(){return this.setting.anchorTop},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.anchorTopPct=.01*parseFloat(t.replace("%","")):this.setting.anchorTopPct=null,this.setting.anchorTop=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_anchorTop",{get:function(){return this.dirty&&(null!==this.setting.anchorTopPct?this._anchorTop=this.parent._height*this.setting.anchorTopPct:this._anchorTop=this.setting.anchorTop),this._anchorTop},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"anchorBottom",{get:function(){return this.setting.anchorBottom},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.anchorBottomPct=.01*parseFloat(t.replace("%","")):this.setting.anchorBottomPct=null,this.setting.anchorBottom=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_anchorBottom",{get:function(){return this.dirty&&(null!==this.setting.anchorBottomPct?this._anchorBottom=this.parent._height*this.setting.anchorBottomPct:this._anchorBottom=this.setting.anchorBottom),this._anchorBottom},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this.setting.left},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.leftPct=.01*parseFloat(t.replace("%","")):this.setting.leftPct=null,this.setting.left=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_left",{get:function(){return this.dirty&&(null!==this.setting.leftPct?this._left=this.parent._width*this.setting.leftPct:this._left=this.setting.left),this._left},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.setting.right},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.rightPct=.01*parseFloat(t.replace("%","")):this.setting.rightPct=null,this.setting.right=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_right",{get:function(){return this.dirty&&(null!==this.setting.rightPct?this._right=this.parent._width*this.setting.rightPct:this._right=this.setting.right),this._right},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.setting.top},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.topPct=.01*parseFloat(t.replace("%","")):this.setting.topPct=null,this.setting.top=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_top",{get:function(){return this.dirty&&(null!==this.setting.topPct?this._top=this.parent._height*this.setting.topPct:this._top=this.setting.top),this._top},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.setting.bottom},set:function(t){isNaN(t)&&-1!==t.indexOf("%")?this.setting.bottomPct=.01*parseFloat(t.replace("%","")):this.setting.bottomPct=null,this.setting.bottom=t,this.updatesettings(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actual_bottom",{get:function(){return this.dirty&&(null!==this.setting.bottomPct?this._bottom=this.parent._height*this.setting.bottomPct:this._bottom=this.setting.bottom),this._bottom},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.setting.verticalAlign},set:function(t){this.setting.verticalAlign=t,this.baseupdate()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valign",{get:function(){return this.setting.verticalAlign},set:function(t){this.setting.verticalAlign=t,this.baseupdate()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontalAlign",{get:function(){return this.setting.horizontalAlign},set:function(t){this.setting.horizontalAlign=t,this.baseupdate()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this.setting.horizontalAlign},set:function(t){this.setting.horizontalAlign=t,this.baseupdate()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this.setting.tint},set:function(t){this.setting.tint=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.setting.alpha},set:function(t){this.setting.alpha=t,this.container.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this.setting.rotation},set:function(t){this.setting.rotation=t,this.container.rotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.setting.blendMode},set:function(t){this.setting.blendMode=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pivotX",{get:function(){return this.setting.pivotX},set:function(t){this.setting.pivotX=t,this.baseupdate(),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pivotY",{get:function(){return this.setting.pivotY},set:function(t){this.setting.pivotY=t,this.baseupdate(),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pivot",{set:function(t){this.setting.pivotX=t,this.setting.pivotY=t,this.baseupdate(),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleX",{get:function(){return this.setting.scaleX},set:function(t){this.setting.scaleX=t,this.container.scale.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaleY",{get:function(){return this.setting.scaleY},set:function(t){this.setting.scaleY=t,this.container.scale.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.setting.scaleX},set:function(t){this.setting.scaleX=t,this.setting.scaleY=t,this.container.scale.x=t,this.container.scale.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"draggable",{get:function(){return this.setting.draggable},set:function(t){this.setting.draggable=t,this.initialized&&(t?this.initDraggable():this.clearDraggable())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragRestricted",{get:function(){return this.setting.dragRestricted},set:function(t){this.setting.dragRestricted=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragRestrictAxis",{get:function(){return this.setting.dragRestrictAxis},set:function(t){this.setting.dragRestrictAxis=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragThreshold",{get:function(){return this.setting.dragThreshold},set:function(t){this.setting.dragThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragGroup",{get:function(){return this.setting.dragGroup},set:function(t){this.setting.dragGroup=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragContainer",{get:function(){return this.setting.dragContainer},set:function(t){this.setting.dragContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"droppable",{get:function(){return this.setting.droppable},set:function(t){this.setting.droppable=!0,this.initialized&&(t?this.initDroppable():this.clearDroppable())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"droppableReparent",{get:function(){return this.setting.droppableReparent},set:function(t){this.setting.droppableReparent=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropGroup",{get:function(){return this.setting.dropGroup},set:function(t){this.setting.dropGroup=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"renderable",{get:function(){return this.container.renderable},set:function(t){this.container.renderable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this.container.visible},set:function(t){this.container.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cacheAsBitmap",{get:function(){return this.container.cacheAsBitmap},set:function(t){this.container.cacheAsBitmap=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onClick",{get:function(){return this.container.click},set:function(t){this.container.click=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interactive",{get:function(){return this.container.interactive},set:function(t){this.container.interactive=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interactiveChildren",{get:function(){return this.container.interactiveChildren},set:function(t){this.container.interactiveChildren=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parentLayer",{get:function(){return this.container.parentLayer},set:function(t){this.container.parentLayer=t},enumerable:!0,configurable:!0}),i}(e.utils.EventEmitter),a=function(){function t(t,i,n,u){var o=this;this._onMouseDown=function(t){var e=o,i=e.obj,n=e.eventname_mouseup,u=e._onMouseUp,s=e.eventname_mouseupoutside,r=e._onMouseUpOutside,h=e.right;if(o.mouse.copyFrom(t.data.global),o.id=t.data.identifier,o.onPress.call(o.obj,t,!0),o.bound||(i.container.on(n,u),i.container.on(s,r),h||(i.container.on("touchend",u),i.container.on("touchendoutside",r)),o.bound=!0),o.double){var D=performance.now();D-o.time<210?o.onClick.call(i,t):o.time=D}t.data.originalEvent.preventDefault()},this._mouseUpAll=function(t){var e=o,i=e.obj,n=e.eventname_mouseup,u=e._onMouseUp,s=e.eventname_mouseupoutside,r=e._onMouseUpOutside;t.data.identifier===o.id&&(o.offset.set(t.data.global.x-o.mouse.x,t.data.global.y-o.mouse.y),o.bound&&(i.container.removeListener(n,u),i.container.removeListener(s,r),o.right||(i.container.removeListener("touchend",u),i.container.removeListener("touchendoutside",r)),o.bound=!1),o.onPress.call(i,t,!1))},this._onMouseUp=function(t){t.data.identifier===o.id&&(o._mouseUpAll(t),o.obj.dragThreshold&&(o.movementX=Math.abs(o.offset.x),o.movementY=Math.abs(o.offset.y),Math.max(o.movementX,o.movementY)>o.obj.dragThreshold)||o.double||o.onClick.call(o.obj,t))},this._onMouseUpOutside=function(t){t.data.identifier===o.id&&o._mouseUpAll(t)},this._onMouseOver=function(t){o.ishover||(o.ishover=!0,o.obj.container.on("mousemove",o._onMouseMove),o.obj.container.on("touchmove",o._onMouseMove),o.onHover.call(o.obj,t,!0))},this._onMouseOut=function(t){o.ishover&&(o.ishover=!1,o.obj.container.removeListener("mousemove",o._onMouseMove),o.obj.container.removeListener("touchmove",o._onMouseMove),o.onHover.call(o.obj,t,!1))},this._onMouseMove=function(t){o.onMove.call(o.obj,t)},this.stopEvent=function(){var t=o,e=t.obj,i=t.eventname_mouseup,n=t._onMouseUp,u=t.eventname_mouseupoutside,s=t._onMouseUpOutside,r=t._onMouseDown,h=t._onMouseOver,D=t._onMouseOut,a=t._onMouseMove;o.bound&&(e.container.removeListener(i,n),e.container.removeListener(u,s),o.right||(e.container.removeListener("touchend",n),e.container.removeListener("touchendoutside",s)),o.bound=!1),e.container.removeListener(eventname_mousedown,r),o.right||e.container.removeListener("touchstart",r),o.hover&&(e.container.removeListener("mouseover",h),e.container.removeListener("mouseout",D),e.container.removeListener("mousemove",a),e.container.removeListener("touchmove",a))},this.startEvent=function(){var t=o,e=t.obj,i=t.eventname_mousedown,n=t._onMouseDown,u=t._onMouseOver,s=t._onMouseOut;e.container.on(i,n),o.right||e.container.on("touchstart",n),o.hover&&(e.container.on("mouseover",u),e.container.on("mouseout",s))},this.bound=!1,this.id=0,this.ishover=!1,this.mouse=new e.Point,this.offset=new e.Point,this.movementX=0,this.movementY=0,this.right=void 0!==n&&n,this.hover=void 0===i||i,this.double=void 0!==u&&u,this.eventname_mousedown=this.right?"rightdown":"mousedown",this.eventname_mouseup=this.right?"rightup":"mouseup",this.eventname_mouseupoutside=this.right?"rightupoutside":"mouseupoutside",t.container.interactive=!0,this.time=0,this.startEvent()}return t.prototype.onHover=function(t,e){},t.prototype.onPress=function(t,e){},t.prototype.onClick=function(t){},t.prototype.onMove=function(t){},t}(),l={},c={},d={},p={registrer:function(t,e,i){var n=i||"default",u=l[n];u||(u=l[n]=[]),-1===u.indexOf(t)&&(t._tabIndex=void 0!==e?e:-1,t._tabGroup=u,u.push(t),u.sort((function(t,e){return t._tabIndex<e._tabIndex?-1:t._tabIndex>e._tabIndex?1:0})))},set:function(t){this.blur(),h=t},clear:function(){h=void 0},blur:function(){h&&"function"==typeof h.blur&&h.blur()},fireTab:function(){if(h){var t=h._tabGroup.indexOf(h)+1;t>=h._tabGroup.length&&(t=0),h._tabGroup[t].focus()}},fireNext:function(){if(h){var t=h._tabGroup.indexOf(h)+1;t>=h._tabGroup.length&&(t=h._tabGroup.length-1),h._tabGroup[t].focus()}},firePrev:function(){if(h){var t=h._tabGroup.indexOf(h)-1;t<0&&(t=0),h._tabGroup[t].focus()}},registrerCheckGroup:function(t){var e=t.checkGroup,i=c[e];i||(i=c[e]={}),i[t.value]=t,t.checked&&(d[e]=t.value)},updateCheckGroupSelected:function(t){var e=c[t.checkGroup];for(var i in e){var n=e[i];n!==t&&(n.checked=!1)}d[t.checkGroup]=t.value},getCheckGroupSelectedValue:function(t){return d[t]?d[t]:""},setCheckGroupSelectedValue:function(t,e){var i=c[t];if(i){var n=i[e];n&&(n.checked=!0)}}},g=function(t){function e(e,i,n,u){var o=t.call(this,e,i)||this;return o.keyDownEvent=function(t){9===t.which?o._useTab&&(p.fireTab(),t.preventDefault()):38===t.which?o._usePrev&&(p.firePrev(),t.preventDefault()):40===t.which&&o._useNext&&(p.fireNext(),t.preventDefault())},o.documentMouseDown=function(){o.__down||o.blur()},o._bindEvents=function(){null!==o.stage&&(o.stage.on("pointerdown",o.documentMouseDown),document.addEventListener("keydown",o.keyDownEvent))},o._clearEvents=function(){null!==o.stage&&(o.stage.off("pointerdown",o.documentMouseDown),document.removeEventListener("keydown",o.keyDownEvent))},o._focused=!1,o._useTab=o._usePrev=o._useNext=!0,o.container.interactive=!0,p.registrer(o,n,u),o.container.on("pointerdown",(function(t){o.focus(),o.__down=!0})),o.container.on("pointerup",(function(t){o.__down=!1})),o.container.on("pointerupoutside",(function(t){o.__down=!1})),o}return n(e,t),e.prototype.blur=function(){this._focused&&(p.clear(),this._focused=!1,this._clearEvents(),this.emit("focusChanged",!1),this.emit("blur"))},e.prototype.focus=function(){this._focused||(this._focused=!0,this._bindEvents(),p.set(this),this.emit("focusChanged",!0),this.emit("focus"))},e}(D),f=function(t){function i(e){var i=t.call(this,e.width||(e.background?e.background.width:100),e.height||(e.background?e.background.height:100),e.tabIndex||0,e.tabGroup||0)||this;return i.background=e.background,i.background&&(i.background.width="100%",i.background.height="100%",i.background.pivot=.5,i.background.verticalAlign="middle",i.background.horizontalAlign="center",i.addChild(i.background)),i.isHover=!1,i.uiText=e.text,i.uiText&&(i.uiText.verticalAlign="middle",i.uiText.horizontalAlign="center",i.addChild(i.uiText)),i.container.buttonMode=!0,i}return n(i,t),i.prototype.setupClick=function(){var i=this,n=new a(this);n.onHover=function(t,e){i.isHover=e,i.emit("hover",e)},n.onPress=function(t,e){e&&(i.focus(),t.data.originalEvent.preventDefault()),i.emit("press",e)},n.onClick=function(t){i.click()},this.click=function(){i.emit("click")},this.focus=function(){i._focused||g.prototype.focus.call(i)},this.blur=function(){i._focused&&g.prototype.blur.call(i)},this.initialize=function(){t.prototype.initialize.call(i),i.container.interactiveChildren=!1,setTimeout((function(){var t=i.container.getLocalBounds();i.container.hitArea=new e.Rectangle(t.x<0?t.x:0,t.y<0?t.y:0,Math.max(t.x+t.width+(t.x<0?-t.x:0),i._width),Math.max(t.y+t.height+(t.y<0?-t.y:0),i._height))}),20)}},Object.defineProperty(i.prototype,"value",{get:function(){return this.uiText?this.uiText.text:""},set:function(t){this.uiText&&(this.uiText.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.uiText},set:function(t){this.value=t},enumerable:!0,configurable:!0}),i}(g),C=function(t){function e(e){var i=t.call(this,e.background.width,e.background.height,e.tabIndex||0,e.tabGroup||0)||this;i._checked=void 0!==e.checked&&e.checked,i._value=e.value||"",i.checkGroup=e.checkgroup||null,i.background=e.background,i.background.width="100%",i.background.height="100%",i.addChild(i.background),i.checkmark=e.checkmark,i.checkmark&&(i.checkmark.verticalAlign="middle",i.checkmark.horizontalAlign="center",i._checked||(i.checkmark.alpha=0),i.addChild(i.checkmark)),i.container.buttonMode=!0,null!==i.checkGroup&&p.registrerCheckGroup(i);var n=new a(i);return n.onHover=function(t,e){i.emit("hover",e)},n.onPress=function(t,e){e&&(i.focus(),t.data.originalEvent.preventDefault()),i.emit("press",e)},n.onClick=function(t){i.click()},i.change=function(t){i.checkmark&&(i.checkmark.alpha=t?1:0)},i.click=function(){i.emit("click"),null!==i.checkGroup&&i.checked||(i.checked=!i.checked,i.emit("change",i.checked))},i.focus=function(){i._focused||t.prototype.focus.call(i)},i.blur=function(){i._focused&&t.prototype.blur.call(i)},i}return n(e,t),e.prototype.update=function(){},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){t!==this._checked&&(null!==this.checkGroup&&t&&p.updateCheckGroupSelected(this),this._checked=t,this.change(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.checked&&p.updateCheckGroupSelected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){return p.getCheckGroupSelectedValue(this.checkGroup)},set:function(t){p.setCheckGroupSelectedValue(this.checkGroup,t)},enumerable:!0,configurable:!0}),e}(g),F=function(t){function i(i,n){var u=t.call(this,i,n)||this;return u.container.hitArea=new e.Rectangle(0,0,0,0),u}return n(i,t),i.prototype.update=function(){this.container.hitArea.width=this._width,this.container.hitArea.height=this._height},i}(D),_=Object.freeze({__proto__:null,Container:F});function m(t){this.respectDirty=!0,this._parent=t||null,this._scale=1,this._align="left",this._fontFamily="Arial",this._fontSize=26,this._fontWeight="normal",this._fontStyle="normal",this._letterSpacing=0,this._lineHeight=0,this._verticalAlign=0,this._rotation=0,this._skew=0,this._tint="#FFFFFF",this._fill="#FFFFFF",this._shadow="",this._stroke=0,this._strokeFill="",this._strokeShadow="",this._wrap=!0,this._breakWords=!1,this._overflowX="visible",this._overflowY="visible",this._ellipsis=!1;let e=null;this.ellipsisSize=function(t){return this.ellipsis?(null===e&&(e=3*(t.getCharObject(".",this).width+this.letterSpacing)),e):0}}function v(){this.style=null,this.data=null,this.space=!1,this.newline=!1,this.emoji=!1,this.charcode=0,this.value="",this.wordIndex=-1,this.lineIndex=-1}m.prototype.clone=function(){const t=new m;return t.merge(this),t},m.prototype.merge=function(t){if("object"==typeof t){this.respectDirty=!1;for(const e in t){"function"!=typeof t[e]&&"respectDirty"!==e&&"_parent"!==e&&(this[e]=t[e])}this.respectDirty=!0,this._dirty=!0}},m.prototype.ctxKey=function(t){return[t,this.fill,this.shadow,this.stroke,this.strokeFill,this.strokeShadow].join("|")},m.prototype.ctxFont=function(){const t=`${Math.min(200,Math.max(1,this.fontSize||26))}px `;return("bold"===this.fontWeight?`${this.fontWeight} `:"")+("italic"===this.fontStyle||"oblique"===this.fontStyle?`${this.fontStyle} `:"")+t+this.fontFamily},m.prototype.constructor=m,Object.defineProperties(m.prototype,{_dirty:{set(t){this.respectDirty&&null!==this._parent&&(this._parent.dirtyStyle=t,this._parent.update())}},scale:{get(){return this._scale},set(t){t!==this._scale&&(this._scale=t,this._dirty=!0)}},align:{get(){return this._align},set(t){t!==this._align&&(this._align=t,this._dirty=!0)}},fontFamily:{get(){return this._fontFamily},set(t){t!==this._fontFamily&&(this._fontFamily=t,this._dirty=!0)}},fontSize:{get(){return this._fontSize},set(t){t!==this._fontSize&&(this._fontSize=t,this._dirty=!0)}},fontWeight:{get(){return this._fontWeight},set(t){t!==this._fontWeight&&(this._fontWeight=t,this._dirty=!0)}},fontStyle:{get(){return this._fontStyle},set(t){t!==this._fontStyle&&(this._fontStyle=t,this._dirty=!0)}},letterSpacing:{get(){return this._letterSpacing},set(t){t!==this._letterSpacing&&(this._letterSpacing=t,this._dirty=!0)}},lineHeight:{get(){return this._lineHeight},set(t){t!==this._lineHeight&&(this._lineHeight=t,this._dirty=!0)}},verticalAlign:{get(){return this._verticalAlign},set(t){t!==this._verticalAlign&&(this._verticalAlign=t,this._dirty=!0)}},rotation:{get(){return this._rotation},set(t){t!==this._rotation&&(this._rotation=t,this._dirty=!0)}},skew:{get(){return this._skew},set(t){t!==this._skew&&(this._skew=t,this._dirty=!0)}},tint:{get(){return this._tint},set(t){t!==this._tint&&(this._tint=t,this._dirty=!0)}},fill:{get(){return this._fill},set(t){t!==this._fill&&(this._fill=t,this._dirty=!0)}},shadow:{get(){return this._shadow},set(t){t!==this._shadow&&(this._shadow=t,this._dirty=!0)}},stroke:{get(){return this._stroke},set(t){t!==this._stroke&&(this._stroke=t,this._dirty=!0)}},strokeFill:{get(){return this._strokeFill},set(t){t!==this._strokeFill&&(this._strokeFill=t,this._dirty=!0)}},strokeShadow:{get(){return this._strokeShadow},set(t){t!==this._strokeShadow&&(this._strokeShadow=t,this._dirty=!0)}},wrap:{get(){return this._wrap},set(t){t!==this._wrap&&(this._wrap=t,this._dirty=!0)}},breakWords:{get(){return this._breakWords},set(t){t!==this._breakWords&&(this._breakWords=t,this._dirty=!0)}},overflowX:{get(){return this._overflowX},set(t){t!==this._overflowX&&(this._overflowX=t,this._dirty=!0)}},overflowY:{get(){return this._overflowY},set(t){t!==this._overflowY&&(this._overflowY=t,this._dirty=!0)}},ellipsis:{get(){return this._ellipsis},set(t){t!==this._ellipsis&&(this._ellipsis=t,this._dirty=!0)}}}),v.prototype.constructor=v;let E=null;function b(t,e){e=e||{},D.call(this,e.width||0,e.height||0),null===E&&(E=new x(1));const i=!e.width,n=!e.height,u=this._style=new m(this);u.merge(e.style);const o=this.chars=[],s=[],r=[],h=new PIXI.Container;this.container.addChild(h),this._inputText=t;let a=0,l=0;this.dirtyText=!0,this.dirtyStyle=!0,this.dirtyRender=!0;const c=[],d=[],p=[],g=[];let f=0,C=0;const F=[],_=[];this.render=function(){let t,e,u=0,o=0,D=-1;if(r.length>f)for(t=f;t<r.length;t++){const e=r[t];e&&(e.visible=!1)}let a=0,l=0,C=0;for(t=0;t<f;t++){if(e=s[t],D!==e.lineIndex){switch(D=e.lineIndex,a=c[D],l=d[D],u+=l,g[D]){case"right":o=this._width-a;break;case"center":o=.5*(this._width-a);break;default:o=0}C=Math.max(a,C)}if(!e.data.texture||e.space||e.newline){r[t]&&(r[t].visible=!1);continue}const i=e.data.texture;let n=r[t];n?n.texture=i:(n=r[t]=new PIXI.Sprite(i),n.anchor.set(.5)),n.visible=!0,n.x=e.x+o+.5*i.width,n.y=e.y+u-.5*i.height-(l-p[D]),n.tint=e.emoji?16777215:I(e.style.tint,16777215),n.rotation=P(e.style.rotation,0),n.skew.x=P(e.style.skew,0),n.parent||h.addChild(n)}i&&(this.width=C),n&&(this.height=u)},this.prepareForRender=function(){const t=new PIXI.Point;let e,n,r=0,h=0,D=0,a=0,l=u.align,m=-1,b=0,y=0,w=!1,x=0,B=!1,I=!1;for(n=0;n<C;n++){const f=o[n],A=o[n-1];if(e=f.style,h=Math.max(h,u.lineHeight||e.lineHeight||f.data.lineHeight),"visible"!==e.overflowY&&h+y>this._height&&"hidden"===e.overflowY)break;f.newline&&(I=!1),f.space||f.newline?r++:f.wordIndex=r,D=Math.max(D,e.fontSize),f.lineIndex=a,e.align!==u.align&&(l=e.align),f.space&&(m=n,b=t.x);const k=Math.round(f.data.width)+P(e.letterSpacing,0);if(!i&&!w&&!f.newline&&t.x+k>this._width){if(e.wrap)if(f.space)w=!0;else{if(-1!==m){x-=n-m,n=m-1,m=-1,t.x=b,w=!0;continue}if(e.breakWords){A&&(t.x-=A.style.letterSpacing,t.x-=A.data.width),n-=2,x--,w=!0;continue}}if("hidden"==e.overflowX&&!w&&(I=!0,e.ellipsis&&!B)){B=!0;let i=F[a];i||(i=F[a]=[new v,new v,new v]);for(let n=0;n<3;n++){const u=i[n];u.value=".",u.data=E.getCharObject(u.value,e),u.style=e,u.x=t.x+f.data.xOffset,u.y=parseFloat(e.verticalAlign)+u.data.yOffset,u.lineIndex=a,t.x+=Math.round(u.data.width)+P(e.letterSpacing,0),s[x]=u,x++}}}I||(f.x=t.x+f.data.xOffset,f.y=parseFloat(e.verticalAlign)+f.data.yOffset,t.x+=k,s[x]=f,x++),(w||f.newline||n===C-1)&&(A&&(t.x-=A.style.letterSpacing),f.space&&(t.x-=f.data.width,t.x-=P(e.letterSpacing,0)),y+=h,_[a]=B,c[a]=t.x,d[a]=h,p[a]=D,g[a]=l,h=t.x=b=D=0,l=u.align,m=-1,a++,w=I=B=!1)}f=x};const y=["</i>","</b>","</font>","</center>"];this.processInputText=function(){const t=[u];let i=0,n=0;const s=Array.from(this._inputText);for(let u=0;u<s.length;u++){style=t[t.length-1];let r=s[u];r.charCodeAt(0);let h=!1,D=!1,a=!1;if(/(?:\r\n|\r|\n)/.test(r))h=!0;else if(/(\s)/.test(r))D=!0;else if(e.allowTags&&"<"===r){let e=this._inputText.substring(n);e=e.slice(0,e.indexOf(">")+1);let i=!0;if(e.length){if("<i>"===e)style=style.clone(),style.fontStyle="italic",t.push(style);else if("<b>"===e)style=style.clone(),style.fontWeight="bold",t.push(style);else if("<center>"===e)style=style.clone(),style.align="center",t.push(style);else if(-1!==y.indexOf(e))t.length>1&&t.splice(t.length-1,1);else if(e.startsWith("<font ")){const i=/(\w+)\s*=\s*((["'])(.*?)\3|([^>\s]*)(?=\s|\/>))(?=[^<]*>)/g;let n=i.exec(e);if(null!==n){for(style=style.clone();null!==n;){switch(n[1]){case"family":n[1]="fontFamily";break;case"size":n[1]="fontSize";break;case"weight":n[1]="fontWeight";break;case"style":n[1]="fontStyle";break;case"valign":n[1]="verticalAlign";break;case"spacing":n[1]="letterSpacing";break;case"color":n[1]="tint"}style[n[1]]=n[4],n=i.exec(e)}t.push(style)}}else i=!1;if(i){n+=e.length,u+=e.length-1;continue}}}else{let t=/\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F/g.exec(r);if(null!==t){for(u--,r="";null!==t&&r!==t[0];)u++,r=t[0],t=/\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F/g.exec(r+s[u+1]);a=!0}}let l=o[i];l||(l=new v,o[i]=l),l.style=style,a&&(l.style=l.style.clone(),l.style.fontFamily=b.settings.defaultEmojiFont),l.data=E.getCharObject(r,l.style),l.value=r,l.space=D,l.newline=h,l.emoji=a,i++,n+=r.length}C=i},this.lazyUpdate=null;const w=this;this.update=function(){null===w.lazyUpdate&&(w.lazyUpdate=setTimeout((function(){const t=!i&&(w._width!=a||w._height!=l||w.dirtyText);(w.dirtyText||w.dirtyStyle)&&(w.dirtyText=w.dirtyStyle=!1,w.dirtyRender=!0,w.processInputText()),(t||w.dirtyRender)&&(w.dirtyRender=!1,a=w._width,l=w.height,w.prepareForRender(),w.render()),w.lazyUpdate=null}),0))}}b.prototype=Object.create(D.prototype),b.prototype.constructor=b,b.settings={debugSpriteSheet:!1,defaultEmojiFont:"Segoe UI Emoji"},Object.defineProperties(b.prototype,{value:{get(){return this._inputText},set(t){t!==this._inputText&&(this._inputText=t,this.dirtyText=!0,this.update())}},text:{get(){return this.value},set(t){this.value=t}},style:{get(){return this._style},set(t){const e=new m(this);e.merge(t),this._style.merge(e),this.dirtyStyle=!0,this.update()}}});const y=document.createElement("canvas"),w=y.getContext("2d");y.width=100,y.height=100;var x=function(t){let e,i,n,u,o,s,r,h=[];var D=function(t,e){const i=this.children=[];this.rect=new PIXI.Rectangle(0,0,t||0,e||0),this.data=null,this.insert=function(t,e,n){if(i.length>0){const u=i[0].insert(t,e,n);return null!==u?u:i[1].insert(t,e,n)}if(null!==this.data)return null;if(t>this.rect.width||e>this.rect.height)return null;if(t==this.rect.width&&e==this.rect.height)return this.data=n,n.frame.x=this.rect.x,n.frame.y=this.rect.y,this;return i.push(new D),i.push(new D),this.rect.width-t>this.rect.height-e?(i[0].rect=new PIXI.Rectangle(this.rect.x,this.rect.y,t,this.rect.height),i[1].rect=new PIXI.Rectangle(this.rect.x+t,this.rect.y,this.rect.width-t,this.rect.height)):(i[0].rect=new PIXI.Rectangle(this.rect.x,this.rect.y,this.rect.width,e),i[1].rect=new PIXI.Rectangle(this.rect.x,this.rect.y+e,this.rect.width,this.rect.height-e)),i[0].insert(t,e,n)}};const a=function(){e=document.createElement("canvas"),i=e.getContext("2d"),r=256,e.width=e.height=r,s=new D(r,r),n=[],u=PIXI.BaseTexture.fromCanvas(e),u.mipmap=!1,u.resolution=1,u.update(),b.settings.debugSpriteSheet&&(e.className="DynamicText_SpriteSheet",document.body.appendChild(e))};this.fontFamilyCache={};const l=function(t,e){e&&u.update();for(let e=0;e<t.length;e++)c(t[e])};var c=function(t){i.drawImage(t._cache,t.frame.x,t.frame.y),t.texture.frame=t.frame,t.texture.update()};this.getCharObject=function(t,i){const n=i.ctxFont();let s=this.fontFamilyCache[n];s||(s={},this.fontFamilyCache[n]=s);const r=i.ctxKey(t);let D=s[r];if(!D){const a=f(t,i);a.rect&&(e.width<a.rect.width||e.height<a.rect.height)&&(e.width=e.height=Math.max(a.rect.width,a.rect.height),u.update()),D={metrics:a,font:n,value:t,frame:a.rect,baseTexture:a.rect?u:null,xOffset:a.bounds?a.bounds.minx:0,yOffset:a.descent||0,width:a.width||0,lineHeight:a.lineHeight||0,_cache:a.canvas,texture:a.rect?new PIXI.Texture(u,a.rect):null},s[r]=D,a.rect&&(h.push(D),void 0===o&&(o=setTimeout((function(){p(),o=void 0}),0)))}return D};const d=function(t,e){return t.frame.height<e.frame.height?1:t.frame.height>e.frame.height?-1:t.frame.width<e.frame.width?1:t.frame.width>e.frame.width?-1:0};var p=function(){h.sort(d);let e=!1,i=!1;for(let o=0;o<h.length;o++){const D=h[o];null===s.insert(D.frame.width+t,D.frame.height+t,D)?(o--,r<2048?(e=!0,g(2*r)):(l(n,e),a(),i=!0,e=!1)):(i&&(D.texture.baseTexture=u),n.push(D))}l(e||i?n:h,e),h=[]},g=function(i){e.width=e.height=r=i,s=new D(i,i),n.sort(d);for(let e=0;e<n.length;e++){const i=n[e];s.insert(i.frame.width+t,i.frame.height+t,i)}},f=function(t,e){const i=Math.max(1,(n=e.fontSize,u=26,isNaN(n)?u:parseInt(n)));var n,u;const o=1.25*i,s={fontSize:i,lineHeight:o,width:0};if(!t||/(?:\r\n|\r|\n)/.test(t))return s;const r=e.ctxFont();if(w.font=r,s.width=Math.round(w.measureText(t).width),/(\s)/.test(t))return s;const h=Math.round(.7*i),D=Math.max(5,Math.round(.7*i));y.width=Math.ceil(s.width)+2*D,y.height=1.5*i;const a=y.width,l=y.height,c=l/2+.5*h;w.font=r,w.clearRect(0,0,a,l),w.save();const d=function(t){const e=t.trim().split(" ");return{color:B(e[0],"#000000"),alpha:P(e[1],.5),xOffset:P(e[2],3),yOffset:P(e[3],3),blur:P(e[4],5)}},p=function(t){const e=t.trim().split(" "),i=B(e[0],"#FFFFFF"),n=P(e[1],1);return{color:i,alpha:n,position:P(e[2],-1),rgba:A(i,n)}},g=function(t){const e=t.split(",").filter((function(t){return""!==t}));let n;for(n=0;n<e.length;n++)e[n]=p(e[n]);switch(e.length){case 0:return"white";case 1:return e[0].rgba?e[0].rgba:e[0].color||"#FFFFFF";default:try{const t=c+o-i,u=w.createLinearGradient(0,t-i,0,t);for(n=0;n<e.length;n++)u.addColorStop(-1!==e[n].position?e[n].position:n/(e.length-1),e[n].rgba||e[n].color);return u}catch(t){return"#FFFFFF"}}},f=function(i,n){const u=i.trim().split(",").filter((function(t){return""!==t}));if(u.length){for(let i=0;i<u.length;i++){const o=d(u[i]);w.globalAlpha=o.alpha,w.shadowColor=o.color,w.shadowOffsetX=o.xOffset+a,w.shadowOffsetY=o.yOffset,w.shadowBlur=o.blur,n?(w.lineWidth=e.stroke,w.strokeText(t,D-a,c)):w.fillText(t,D-a,c)}w.restore()}};e.shadow.length&&f(e.shadow,!1),e.stroke&&e.strokeShadow.length&&f(e.strokeShadow,!0),w.fillStyle=g(B(e.fill,"#000000")),w.fillText(t,D,c),w.restore(),e.stroke&&(w.strokeStyle=g(B(e.strokeFill,"#000000")),w.lineWidth=e.stroke,w.strokeText(t,D,c),w.restore());const C=w.getImageData(0,0,a,l).data;let F=3;const _=4*a,m=C.length;for(;F<m&&!C[F];)F+=4;const v=F/_|0;if(F<m){for(F=m-1;F>0&&!C[F];)F-=4;const t=F/_|0;for(F=3;F<m&&!C[F];)F+=_,F>=m&&(F=F-m+4);const e=F%_/4|0;let i=1;for(F=m-1;F>=0&&!C[F];)F-=_,F<0&&(F=m-1-4*i++);const n=F%_/4+1|0;s.ascent=Math.round(c-v),s.descent=Math.round(t-c),s.height=1+Math.round(t-v),s.bounds={minx:e-D,maxx:n-D,miny:0,maxy:t-v},s.rect={x:s.bounds.minx,y:-s.ascent-2,width:s.bounds.maxx-s.bounds.minx+2,height:s.ascent+s.descent+4},s.canvas=document.createElement("canvas"),s.canvas.width=s.rect.width,s.canvas.height=s.rect.height,s.canvas.getContext("2d").drawImage(y,-D-s.rect.x,-c-s.rect.y),s.rect.x=s.rect.y=0}return s};a()};function P(t,e){return isNaN(t)?e:parseFloat(t)}function B(t,e){return"string"==typeof t&&t.length?t:e}function I(t,e){if("number"==typeof t)return t;const i=parseInt(t.replace("#","0x"));return isNaN(i)?e:i}function A(t,e){const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e=P(e,1),!!i&&`rgba(${parseInt(i[1],16)},${parseInt(i[2],16)},${parseInt(i[3],16)},${e})`}const k={},M=require("./EaseBase"),O=require("./ExponentialEase"),T=.5*Math.PI;function j(t){const e=Object.create(M.prototype);return e.getPosition=t,e}function L(t,e,i){return{easeIn:t,easeOut:e,easeInOut:i}}k.Linear=new M,k.Power0={easeNone:k.Linear},k.Power1=k.Quad=L(new O(1,1,0),new O(1,0,1),new O(1,1,1)),k.Power2=k.Cubic=L(new O(2,1,0),new O(2,0,1),new O(2,1,1)),k.Power3=k.Quart=L(new O(3,1,0),new O(3,0,1),new O(3,1,1)),k.Power4=k.Quint=L(new O(4,1,0),new O(4,0,1),new O(4,1,1)),k.Bounce={BounceIn:j((function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),BounceOut:j((function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),BounceInOut:j((function(t){const e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))},k.Circ={CircIn:j((function(t){return-(Math.sqrt(1-t*t)-1)})),CircOut:j((function(t){return Math.sqrt(1-(t-=1)*t)})),CircInOut:j((function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))},k.Expo={ExpoIn:j((function(t){return Math.pow(2,10*(t-1))-.001})),ExpoOut:j((function(t){return 1-Math.pow(2,-10*t)})),ExpoInOut:j((function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))},k.Sine={SineIn:j((function(t){return 1-Math.cos(t*T)})),SineOut:j((function(t){return Math.sin(t*T)})),SineInOut:j((function(t){return-.5*(Math.cos(Math.PI*t)-1)}))};var S=function(){function t(t,i){var n=this;this.onHoverImpl=function(t){var e=n.onMouseScrollImpl;n.bound||(document.addEventListener("mousewheel",e,!1),document.addEventListener("DOMMouseScroll",e,!1),n.bound=!0)},this.onMouseOutImpl=function(t){var e=n.onMouseScrollImpl;n.bound&&(document.removeEventListener("mousewheel",e),document.removeEventListener("DOMMouseScroll",e),n.bound=!1)},this.onMouseScroll=function(t,e){},this.bound=!1,this.delta=new e.Point,this.obj=t,this.preventDefault=i,this.startEvent()}return t.prototype.onMouseScrollImpl=function(t){var e=this.obj,i=this.preventDefault,n=this.delta;i&&event.preventDefault(),void 0!==t.deltaX?n.set(t.deltaX,t.deltaY):n.set(1===t.axis?60*t.detail:0,2===t.axis?60*t.detail:0),this.onMouseScroll.call(e,event,n)},t.prototype.stopEvent=function(){var t=this.obj,e=this.onMouseScrollImpl,i=this.onHoverImpl,n=this.onMouseOutImpl;this.bound&&(document.removeEventListener("mousewheel",e),document.removeEventListener("DOMMouseScroll",e),this.bound=!1),t.container.removeListener("mouseover",i),t.container.removeListener("mouseout",n)},t.prototype.startEvent=function(){var t=this.obj,e=this.onHoverImpl,i=this.onMouseOutImpl;t.container.on("mouseover",e),t.container.on("mouseout",i)},t}();const X={ClickEvent:a,DragEvent:o,InputController:p,MouseScrollEvent:S};var R={Lerp:function(t,e,i){return i>1?i=1:i<0&&(i=0),t+(e-t)*i},Round:function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},componentToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},rgbToHex:function(t,e,i){return"#"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(i)},rgbToNumber:function(t,e,i){return 65536*t+256*e+i},numberToRgb:function(t){return{r:Math.floor(t/65536),g:Math.floor(t/256)%256,b:t%256}},hexToRgb:function(t){if(null===t&&(t=16777215),!isNaN(t))return this.numberToRgb(t);t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,n){return e+e+i+i+n+n}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},N=require("./Helpers"),H=[],W=[],z={},V={},G=1,Y=function(t){this.object=t,this.tweens={},this.active=!1,this.onUpdate=null},U=function(){function t(){this._ready=!1,this.obj=null,this.parent=null,this.key="",this.time=0,this.callback=null,this.currentTime=0}return t.prototype.remove=function(){this._ready=!0,delete this.parent.tweens[this.key],Object.keys(this.parent.tweens).length||(this.parent.active=!1,this.parent.onUpdate=null,delete V[this.obj._tweenObjectId])},t.prototype.set=function(t,e,i){this.obj=t.object,this.obj._currentCallbackID?this.obj._currentCallbackID++:this.obj._currentCallbackID=1,this.time=i,this.parent=t,this.callback=e,this._ready=!1,this.key="cb_"+this.obj._currentCallbackID,this.currentTime=0,this.parent.active||(this.parent.active=!0,V[this.obj._tweenObjectId]=this.parent)},t.prototype.update=function(t){this.currentTime+=t,this.currentTime>=this.time&&(this.remove(),this.callback.call(this.parent))},t}(),$=function(){function t(){this._ready=!1,this.parent=null,this.obj=null,this.key="",this.from=0,this.to=0,this.time=0,this.ease=0,this.currentTime=0,this.t=0,this.isColor=!1}return t.prototype.remove=function(){this._ready=!0,delete this.parent.tweens[this.key],Object.keys(this.parent.tweens).length||(this.parent.active=!1,delete V[this.obj._tweenObjectId])},t.prototype.set=function(t,e,i,n,u,o){this.isColor=isNaN(i)&&"#"===i[0]||isNaN(n)&&"#"===n[0],this.parent=t,this.obj=t.object,this.key=e,this.surfix=function(t){if(isNaN(t)&&-1!==t.indexOf("%"))return"%"}(n),this.isColor?(this.to=N.hexToRgb(n),this.from=N.hexToRgb(i),this.currentColor={r:this.from.r,g:this.from.g,b:this.from.b}):(this.to=function(t){if(!isNaN(t))return t;if(isNaN(t)&&-1!==t.indexOf("%"))return parseFloat(t.replace("%",""))}(n),this.from=function(t,e,i,n){if(!isNaN(t)&&!isNaN(e))return t;if(isNaN(t)&&isNaN(e)&&-1!==t.indexOf("%")&&-1!==e.indexOf("%"))return parseFloat(t.replace("%",""));if(isNaN(t)&&!isNaN(e)&&-1!==t.indexOf("%"))return-1!==q.indexOf(n)?i.parent._width*(.01*parseFloat(t.replace("%",""))):-1!==Q.indexOf(n)?i.parent._height*(.01*parseFloat(t.replace("%",""))):0;if(!isNaN(t)&&isNaN(e)&&-1!==e.indexOf("%"))return-1!==q.indexOf(n)?t/i.parent._width*100:-1!==Q.indexOf(n)?t/i.parent._height*100:0;return 0}(i,n,this.obj,e)),this.time=u,this.currentTime=0,this.ease=o,this._ready=!1,this.parent.active||(this.parent.active=!0,V[this.obj._tweenObjectId]=this.parent)},t.prototype.update=function(t){if(this.currentTime+=t,this.t=Math.min(this.currentTime,this.time)/this.time,this.ease&&(this.t=this.ease.getPosition(this.t)),this.isColor)this.currentColor.r=Math.round(N.Lerp(this.from.r,this.to.r,this.t)),this.currentColor.g=Math.round(N.Lerp(this.from.g,this.to.g,this.t)),this.currentColor.b=Math.round(N.Lerp(this.from.b,this.to.b,this.t)),this.obj[this.key]=N.rgbToNumber(this.currentColor.r,this.currentColor.g,this.currentColor.b);else{var e=N.Lerp(this.from,this.to,this.t);this.obj[this.key]=this.surfix?e+this.surfix:e}this.currentTime>=this.time&&this.remove()},t}(),q=["width","minWidth","maxWidth","anchorLeft","anchorRight","left","right","x"],Q=["height","minHeight","maxHeight","anchorTop","anchorBottom","top","bottom","y"];function K(t){t._tweenObjectId||(t._tweenObjectId=G,G++);var e=z[t._tweenObjectId];return e||(e=z[t._tweenObjectId]=new Y(t)),e}function J(){for(var t=0;t<H.length;t++)if(H[t]._ready)return H[t];var e=new $;return H.push(e),e}function Z(){for(var t=0;t<W.length;t++)if(W[t]._ready)return W[t];var e=new U;return W.push(e),e}var tt={to:function(t,e,i,n){var u=K(t),o=null;for(var s in i)if("onComplete"!==s)if("onUpdate"!==s){if(e){var r=i[s]===t[s];if(void 0===t[s])continue;r?u.tweens[s]&&u.tweens[s].remove():(u.tweens[s]||(u.tweens[s]=J()),u.tweens[s].set(u,s,t[s],i[s],e,n))}}else o=i[s];else{var h=Z();h.set(u,i[s],e),u.tweens[h.key]=h}e?u.onUpdate=o:this.set(t,i)},from:function(t,e,i,n){var u=K(t),o=null;for(var s in i)if("onComplete"!==s)if("onUpdate"!==s){if(e){var r=i[s]==t[s];if(void 0===t[s])continue;r?u.tweens[s]&&u.tweens[s].remove():(u.tweens[s]||(u.tweens[s]=J()),u.tweens[s].set(u,s,i[s],t[s],e,n))}}else o=i[s];else{var h=Z();h.set(u,i[s],e),u.tweens[h.key]=h}e?u.onUpdate=o:this.set(t,i)},fromTo:function(t,e,i,n,u){var o=K(t),s=null;for(var r in n)if("onComplete"!==r)if("onUpdate"!==r){if(e){var h=i[r]==n[r];if(void 0===t[r]||void 0===i[r])continue;h?(o.tweens[r]&&o.tweens[r].remove(),t[r]=n[r]):(o.tweens[r]||(o.tweens[r]=J()),o.tweens[r].set(o,r,i[r],n[r],e,u))}}else s=n[r];else{var D=Z();D.set(o,n[r],e),o.tweens[D.key]=D}e?o.onUpdate=s:this.set(t,n)},set:function(t,e){var i=K(t);for(var n in e)void 0!==t[n]&&(i.tweens[n]&&i.tweens[n].remove(),t[n]=e[n])},_update:function(t){for(var e in V){var i=V[e];for(var n in i.tweens)i.tweens[n].update(t);i.onUpdate&&i.onUpdate.call(i.object,t)}}},et=Object.freeze({__proto__:null,Tween:tt}),it=function(t){function i(e){var i=t.call(this,0,0)||this;return i._amt=0,i._disabled=!1,i.track=e.track,i.handle=e.handle,i.fill=e.fill||null,i._minValue=e.minValue||0,i._maxValue=e.maxValue||100,i.decimals=e.decimals||0,i.vertical=e.vertical||!1,i.onValueChange=e.onValueChange||null,i.onValueChanging=e.onValueChanging||null,i.value=e.value||50,i.handle.pivot=.5,i.addChild(i.track),i.fill&&i.track.addChild(i.fill),i.addChild(i.handle),i.handle.container.buttonMode=!0,i.vertical?(i.height="100%",i.width=i.track.width,i.track.height="100%",i.handle.horizontalAlign="center",i.fill&&(i.fill.horizontalAlign="center")):(i.width="100%",i.height=i.track.height,i.track.width="100%",i.handle.verticalAlign="middle",i.fill&&(i.fill.verticalAlign="middle")),i}return n(i,t),i.prototype.update=function(t){var e,i;void 0===t&&(t=0),this.vertical?(e=this.handle._height||this.handle.container.height,i=(this._height-e)*this._amt+.5*e,t?(tt.to(this.handle,.3,{top:i},k.Power2.easeOut),this.fill&&tt.to(this.fill,.3,{height:i},k.Power2.easeOut)):(tt.set(this.handle,{top:i}),this.fill&&tt.set(this.fill,{height:i}))):(e=this.handle._width||this.handle.container.width,i=(this._width-e)*this._amt+.5*e,t?(tt.to(this.handle,.3,{left:i},k.Power2.easeOut),this.fill&&tt.to(this.fill,.3,{width:i},k.Power2.easeOut)):(tt.set(this.handle,{left:i}),this.fill&&tt.set(this.fill,{width:i})))},i.prototype.initialize=function(){var i=this;t.prototype.initialize.call(this);var n,u=new e.Point,s=0,r=function(){i.emit("change",i.value),i._lastChange!=i.value&&(i._lastChange=i.value,"function"==typeof i.onValueChange&&i.onValueChange(i.value))},h=function(){i.emit("changing",i.value),i._lastChanging!=i.value&&(i._lastChanging=i.value,"function"==typeof i.onValueChanging&&i.onValueChanging(i.value))},D=function(t,e){i.track.container.toLocal(t,null,u,!0);var n=i.vertical?u.y-.5*i.handle._height:u.x-.5*i.handle._width,o=i.vertical?i._height-i.handle._height:i._width-i.handle._width;i._amt=o?Math.max(0,Math.min(1,n/o)):0,i.update(e),h()},a=new o(this.handle);a.onPress=function(t,e){t.stopPropagation()},a.onDragStart=function(t){s=i._amt,n=i.vertical?i._height-i.handle._height:i._width-i.handle._width},a.onDragMove=function(t,e){i._amt=n?Math.max(0,Math.min(1,s+(i.vertical?e.y:e.x)/n)):0,h(),i.update()},a.onDragEnd=function(){r(),this.update()};var l=new o(this.track);l.onPress=function(t,e){e&&D(t.data.global,!0),t.stopPropagation()},l.onDragMove=function(t){D(t.data.global,!1)},l.onDragEnd=function(){r()}},Object.defineProperty(i.prototype,"value",{get:function(){return R.Round(R.Lerp(this._minValue,this._maxValue,this._amt),this.decimals)},set:function(t){this._amt=(Math.max(this._minValue,Math.min(this._maxValue,t))-this._minValue)/(this._maxValue-this._minValue),"function"==typeof this.onValueChange&&this.onValueChange(this.value),"function"==typeof this.onValueChanging&&this.onValueChanging(this.value),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minValue",{get:function(){return this._minValue},set:function(t){this._minValue=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){this._maxValue=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!==this._disabled&&(this._disabled=t,this.handle.container.buttonMode=!t,this.handle.container.interactive=!t,this.track.container.interactive=!t)},enumerable:!0,configurable:!0}),i}(D),nt=function(t){function e(e){var i=t.call(this,{track:e.track,handle:e.handle,fill:null,vertical:e.vertical})||this;return i.scrollingContainer=e.scrollingContainer,i.autohide=e.autohide,i._hidden=!1,i}return n(e,t),e.prototype.initialize=function(){var e=this;t.prototype.initialize.call(this),this.decimals=3,this.onValueChanging=function(t){(e.scrollingContainer._height/e.scrollingContainer.innerContainer.height||.001)<1&&e.scrollingContainer.forcePctPosition(e.vertical?"y":"x",e._amt)},this.scrollingContainer._scrollBars.push(this)},e.prototype.alignToContainer=function(){var t,e,i=this.vertical?"y":"x",n=this.vertical?"height":"width",u=this.vertical?"top":"left",o=this.scrollingContainer.innerContainer[n]?-this.scrollingContainer.innerContainer[i]/this.scrollingContainer.innerContainer[n]:0,s=this.scrollingContainer.innerContainer[n]?this.scrollingContainer["_"+n]/this.scrollingContainer.innerContainer[n]:1,r=this.scrollingContainer.innerContainer[n]-this.scrollingContainer["_"+n];this._amt=this.scrollingContainer["_"+n]&&r?-this.scrollingContainer.innerContainer[i]/r:0,s>=1?(e=this["_"+n],this.handle[u]=.5*e,this.toggleHidden(!0)):(e=this["_"+n]*s,this._amt>1?e-=(this["_"+n]-e)*(this._amt-1):this._amt<0&&(e-=(this["_"+n]-e)*-this._amt),t=this._amt<0?.5*e:this._amt>1?this["_"+n]-.5*e:o*this.scrollingContainer["_"+n]+.5*e,this.handle[u]=t,this.toggleHidden(!1)),this.handle[n]=e},e.prototype.toggleHidden=function(t){this.autohide&&(t&&!this._hidden?(tt.to(this,.2,{alpha:0}),this._hidden=!0):!t&&this._hidden&&(tt.to(this,.2,{alpha:1}),this._hidden=!1))},e}(it),ut=function(t){function e(i){var n=t.call(this)||this;return n._disabled=!0,n._now=0,n.DeltaTime=0,n.Time=performance.now(),n.Ms=0,i&&(n.disabled=!1),e.shared=n,n}return n(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled?(this._disabled=!1,e.shared=this,this.update(performance.now(),!0)):this._disabled=!0},enumerable:!0,configurable:!0}),e.prototype.update=function(t){e.shared._now=t,e.shared.Ms=e.shared._now-e.shared.Time,e.shared.Time=e.shared._now,e.shared.DeltaTime=.001*e.shared.Ms,e.shared.emit("update",e.shared.DeltaTime),tt._update(e.shared.DeltaTime),e.shared._disabled||requestAnimationFrame(e.shared.update)},e.on=function(t,i,n){e.shared.on(t,i,n)},e.once=function(t,i,n){e.shared.once(t,i,n)},e.removeListener=function(t,i){e.shared.removeListener(t,i)},e}(e.utils.EventEmitter);ut.shared=new ut(!0);var ot=function(t){function i(i){void 0===i&&(i={});var n=t.call(this,i.width,i.height)||this;return n.mask=new e.Graphics,n.innerContainer=new e.Container,n.innerBounds=new e.Rectangle,n.container.addChild(n.mask),n.container.addChild(n.innerContainer),n.container.mask=n.mask,n.scrollX=void 0!==i.scrollX&&i.scrollX,n.scrollY=void 0!==i.scrollY&&i.scrollY,n.dragScrolling=void 0===i.dragScrolling||i.dragScrolling,n.softness=void 0!==i.softness?Math.max(Math.min(i.softness||0,1),0):.5,n.radius=i.radius||0,n.expandMask=i.expandMask||0,n.overflowY=i.overflowY||0,n.overflowX=i.overflowX||0,n.animating=!1,n.scrolling=!1,n._scrollBars=[],n.boundCached=performance.now()-1e3,n}return n(i,t),i.prototype.initialize=function(){t.prototype.initialize.call(this),(this.scrollX||this.scrollY)&&this.initScrolling()},i.prototype.update=function(){if(t.prototype.update.call(this),this._lastWidth!==this._width||this._lastHeight!==this._height){var e=this.expandMask;this.mask.clear(),this.mask.lineStyle(0),this.mask.beginFill(16777215,1),0===this.radius?this.mask.drawRect(-e,-e,this._width+e,this._height+e):this.mask.drawRoundedRect(-e,-e,this._width+e,this.height+e,this.radius),this.mask.endFill(),this._lastWidth=this._width,this._lastHeight=this._height}this.setScrollPosition&&this.setScrollPosition()},i.prototype.addChild=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e.length;if(n>1)for(var u=0;u<n;u++)this.addChild(e[u]);else t.prototype.addChild.call(this,e[0]),this.innerContainer.addChild(e[0].container),this.getInnerBounds(!0);return e[0]},i.prototype.updateScrollBars=function(){for(var t=0;t<this._scrollBars.length;t++)this._scrollBars[t].alignToContainer()},i.prototype.getInnerBounds=function(t){return(t||performance.now()-this.boundCached>1e3)&&(this.innerContainer.getLocalBounds(this.innerBounds),this.innerContainer.getLocalBounds(this.innerBounds),this.innerBounds.height=this.innerBounds.y+this.innerContainer.height,this.innerBounds.width=this.innerBounds.x+this.innerContainer.width,this.boundCached=performance.now()),this.innerBounds},i.prototype.initScrolling=function(){var t,i=this,n=this.innerContainer,u=new e.Point,s=new e.Point,r=new e.Point,h=new e.Point,D=new e.Point;if(this.forcePctPosition=function(t,e){var u=i.getInnerBounds();i.scrollX&&"x"===t&&(n.position[t]=-(u.width-i._width)*e),i.scrollY&&"y"===t&&(n.position[t]=-(u.height-i._height)*e),h[t]=s[t]=n.position[t]},this.focusPosition=function(t){var e,u=i.getInnerBounds();if(i.scrollX){var o=Math.max(0,Math.min(u.width,t.x));o+n.x>i._width?(e=o-i._width,n.x=-e):o+n.x<0&&(e=o+n.x,n.x-=e)}if(i.scrollY){var D=Math.max(0,Math.min(u.height,t.y));D+n.y>i._height?(e=D-i._height,n.y=-e):D+n.y<0&&(e=D+n.y,n.y-=e)}r.copyFrom(n.position),s.copyFrom(n.position),h.copyFrom(n.position),i.updateScrollBars()},this.setScrollPosition=function(t){t&&(D=t),i.animating||(i.animating=!0,r.copyFrom(n.position),s.copyFrom(n.position),ut.on("update",i.updateScrollPosition,i))},this.updateScrollPosition=function(e){t=!0,i.scrollX&&i.updateDirection("x",e),i.scrollY&&i.updateDirection("y",e),t&&(ut.removeListener("update",i.updateScrollPosition),i.animating=!1)},this.updateDirection=function(e,u){var o,a=i.getInnerBounds();if(o="y"===e?Math.round(Math.min(0,i._height-a.height)):Math.round(Math.min(0,i._width-a.width)),i.scrolling||0===Math.round(D[e])||(s[e]+=D[e],D[e]=R.Lerp(D[e],0,(5+2.5/Math.max(i.softness,.01))*u),s[e]>0?s[e]=0:s[e]<o&&(s[e]=o)),!i.scrolling&&0===Math.round(D[e])&&(n[e]>0||n[e]<o)){var l=h[e]>0?0:o;h[e]=R.Lerp(h[e],l,(40-30*i.softness)*u),t=!1}else(i.scrolling||0!==Math.round(D[e]))&&(i.scrolling&&(D[e]=h[e]-r[e],r.copyFrom(h)),s[e]>0?(D[e]=0,h[e]=100*i.softness*(1-Math.exp(s[e]/-200))):s[e]<o?(D[e]=0,h[e]=o-100*i.softness*(1-Math.exp((o-s[e])/-200))):h[e]=s[e],t=!1);n.position[e]=Math.round(h[e]),i.updateScrollBars()},this.dragScrolling){var a=new o(this);a.onDragStart=function(t){i.scrolling||(u.copyFrom(n.position),h.copyFrom(n.position),i.scrolling=!0,i.setScrollPosition(),i.emit("dragStart",t))},a.onDragMove=function(t,e){i.scrollX&&(s.x=u.x+e.x),i.scrollY&&(s.y=u.y+e.y)},a.onDragEnd=function(t){i.scrolling&&(i.scrolling=!1,i.emit("dragEnd",t))}}var l=new e.Point;new S(this,!0).onMouseScroll=function(t,e){l.set(.2*-e.x,.2*-e.y),i.setScrollPosition(l)},this.updateScrollBars()},i}(F);function st(t){return t&&t.default||t}var rt=st(_),ht=st(et);function Dt(t,e,i){rt.call(this),this.desc=void 0!==t&&t,this.tweenTime=e||0,this.tweenEase=i,this.items=[]}Dt.prototype=Object.create(rt.prototype),Dt.prototype.constructor=Dt;var at=Dt;function lt(t,e,i,n,u){let o,s,r,h,a,l,c,d,p,g,f,C,F,_,m,v,E,b;D.call(this,t.width,t.height);const y=e||5,w=void 0===n||n,x=void 0===i||i,P=t.baseTexture,B=t.frame;x&&(this.setting.minWidth=2*e),w&&(this.setting.minHeight=2*e),this.initialize=function(){D.prototype.initialize.apply(this),w&&x?(o=new PIXI.Rectangle(B.x,B.y,y,y),s=new PIXI.Rectangle(B.x+B.width-y,B.y,y,y),r=new PIXI.Rectangle(B.x,B.y+B.height-y,y,y),h=new PIXI.Rectangle(B.x+B.width-y,B.y+B.height-y,y,y),a=new PIXI.Rectangle(B.x+y,B.y,B.width-2*y,y),l=new PIXI.Rectangle(B.x+y,B.y+B.height-y,B.width-2*y,y),c=new PIXI.Rectangle(B.x,B.y+y,y,B.height-2*y),d=new PIXI.Rectangle(B.x+B.width-y,B.y+y,y,B.height-2*y),p=new PIXI.Rectangle(B.x+y,B.y+y,B.width-2*y,B.height-2*y)):x?(c=new PIXI.Rectangle(B.x,B.y,y,B.height),d=new PIXI.Rectangle(B.x+B.width-y,B.y,y,B.height),p=new PIXI.Rectangle(B.x+y,B.y,B.width-2*y,B.height)):(a=new PIXI.Rectangle(B.x,B.y,B.width,y),l=new PIXI.Rectangle(B.x,B.y+B.height-y,B.width,y),p=new PIXI.Rectangle(B.x,B.y+y,B.width,B.height-2*y)),b=u?new PIXI.extras.TilingSprite(new PIXI.Texture(P,p)):new PIXI.Sprite(new PIXI.Texture(P,p)),this.container.addChildAt(b,0),w&&x&&(g=new PIXI.Sprite(new PIXI.Texture(P,o)),f=new PIXI.Sprite(new PIXI.Texture(P,s)),C=new PIXI.Sprite(new PIXI.Texture(P,r)),F=new PIXI.Sprite(new PIXI.Texture(P,h)),this.container.addChildAt(g,0),this.container.addChildAt(f,0),this.container.addChildAt(C,0),this.container.addChildAt(F,0)),x&&(v=u?new PIXI.extras.TilingSprite(new PIXI.Texture(P,c)):new PIXI.Sprite(new PIXI.Texture(P,c)),E=u?new PIXI.extras.TilingSprite(new PIXI.Texture(P,d)):new PIXI.Sprite(new PIXI.Texture(P,d)),this.container.addChildAt(v,0),this.container.addChildAt(E,0)),w&&(_=u?new PIXI.extras.TilingSprite(new PIXI.Texture(P,a)):new PIXI.Sprite(new PIXI.Texture(P,a)),m=u?new PIXI.extras.TilingSprite(new PIXI.Texture(P,l)):new PIXI.Sprite(new PIXI.Texture(P,l)),this.container.addChildAt(_,0),this.container.addChildAt(m,0)),w&&x&&(_.x=m.x=v.y=E.y=g.width=f.width=C.width=F.width=g.height=f.height=C.height=F.height=y),x&&(b.x=v.width=E.width=y),w&&(b.y=_.height=m.height=y)},this.update=function(){this.initialized&&(w&&x?(f.x=F.x=E.x=this._width-y,C.y=F.y=m.y=this._height-y,b.width=_.width=m.width=this._width-2*y,b.height=v.height=E.height=this._height-2*y):x?(E.x=this._width-y,v.height=E.height=b.height=this._height,b.width=this._width-2*y):(m.y=this._height-y,_.width=m.width=b.width=this._width,b.height=this._height-2*y),null!==this.tint&&(b.tint=this.tint,w&&x&&(g.tint=f.tint=C.tint=F.tint=this.tint),x&&(v.tint=E.tint=this.tint),w&&(_.tint=m.tint=this.tint)),null!==this.blendMode&&(b.blendMode=this.blendMode,w&&x&&(g.blendMode=f.blendMode=C.blendMode=F.blendMode=this.blendMode),x&&(v.blendMode=E.blendMode=this.blendMode),w&&(_.blendMode=m.blendMode=this.blendMode)))}}Dt.prototype.addChild=function(t,e,i){rt.prototype.addChild.call(this,t),-1==this.items.indexOf(t)&&this.items.push(t),"function"==typeof e&&(t._sortListValue=e),"function"==typeof i&&(t._sortListThenByValue=i),t._sortListRnd||(t._sortListRnd=Math.random()),this.sort()},Dt.prototype.removeChild=function(t){if(arguments.length>1)for(let t=0;t<arguments.length;t++)this.removeChild(arguments[t]);else{rt.prototype.removeChild.call(this,t);const e=this.items.indexOf(t);-1!=e&&this.items.splice(e,1),this.sort()}},Dt.prototype.sort=function(t){if(clearTimeout(this._sortTimeout),t)return void this._sort();const e=this;this._sortTimeout=setTimeout((function(){e._sort()}),0)},Dt.prototype._sort=function(){const t=this,e=this.desc;let i=0,n=!0;this.items.sort((function(t,i){let n=t._sortListValue()<i._sortListValue()?e?1:-1:t._sortListValue()>i._sortListValue()?e?-1:1:0;return 0===n&&t._sortListThenByValue&&i._sortListThenByValue&&(n=t._sortListThenByValue()<i._sortListThenByValue()?e?1:-1:t._sortListThenByValue()>i._sortListThenByValue()?e?-1:1:0),0===n&&(n=t._sortListRnd>i._sortListRnd?1:t._sortListRnd<i._sortListRnd?-1:0),n}));for(let t=0;t<this.items.length;t++){const e=this.items[t];n=!n,this.tweenTime>0?ht.fromTo(e,this.tweenTime,{x:e.x,y:e.y},{x:0,y:i},this.tweenEase):(e.x=0,e.y=i),i+=e.height,"function"==typeof e.altering&&e.altering(n)}this.tweenTime>0&&setTimeout((function(){t.updatesettings(!1,!0)}),1e3*this.tweenTime)},lt.prototype=Object.create(D.prototype),lt.prototype.constructor=lt;var ct=function(t){function i(i){var n=this,u=new e.Sprite(i);return(n=t.call(this,u.width,u.height)||this).sprite=u,n.container.addChild(n.sprite),n}return n(i,t),i.prototype.update=function(){null!==this.tint&&(this.sprite.tint=this.tint),null!==this.blendMode&&(this.sprite.blendMode=this.blendMode),this.sprite.width=this._width,this.sprite.height=this._height},i.fromImage=function(t){return new i(new e.Texture(new e.BaseTexture(t)))},i}(D);function dt(t,e){PIXI.Container.call(this),this.__width=t,this.__height=e,this.minWidth=0,this.minHeight=0,this.UIChildren=[],this.stage=this,this.interactive=!0,this.hitArea=new PIXI.Rectangle(0,0,0,0),this.initialized=!0,this.resize(t,e)}function pt(t,e){this._text=new PIXI.Text(t,e),D.call(this,this._text.width,this._text.height),this.container.addChild(this._text),this.baseupdate=function(){null===this._anchorLeft||null===this._anchorRight?(this.setting.width=this._text.width,this.setting.widthPct=null):this._text.width=this._width,null===this._anchorTop||null===this._anchorBottom?(this.setting.height=this._text.height,this.setting.heightPct=null):this._text.width=this._width,D.prototype.baseupdate.call(this)},this.update=function(){null!==this.tint&&(this._text.tint=this.tint),null!==this.blendMode&&(this._text.blendMode=this.blendMode)}}function gt(t){"undefined"==typeof _pui_tempInput&&(_pui_tempInput=document.createElement("INPUT"),_pui_tempInput.setAttribute("type","text"),_pui_tempInput.setAttribute("id","_pui_tempInput"),_pui_tempInput.setAttribute("style","position:fixed; left:-10px; top:-10px; width:0px; height: 0px;"),document.body.appendChild(_pui_tempInput));const e=void 0!==t.width?t.width:t.background?t.background.width:150,i=void 0!==t.height?t.height:t.background?t.background.height:150;g.call(this,e,i,t.tabIndex||0,t.tabGroup||0),this._dirtyText=!0,this.maxLength=t.maxLength||0,this._value=this._lastValue=t.value||"",this.maxLength&&(this._value=this._value.slice(0,this.maxLength));const n=this,u=[],s=void 0!==t.multiLine&&t.multiLine,r=t.style&&t.style.fill?t.style.fill:"#000000",h=t.selectedColor||"#ffffff",D=t.selectedBackgroundColor||"#318cfa",a=new PIXI.Text("1",t.style),l=a.height,c=t.lineHeight||l||n._height;a.destroy();const d=n.selection=new PIXI.Graphics;d.visible=!1,d._startIndex=0,d._endIndex=0;const p=n.caret=new PIXI.Graphics;p.visible=!1,p._index=0,p.lineStyle(t.caretWidth||1,"#ffffff",1),p.moveTo(0,0),p.lineTo(0,l),t.background&&(this.background=t.background,this.background.width="100%",this.background.height="100%",this.addChild(this.background));const f=void 0!==t.paddingLeft?t.paddingLeft:void 0!==t.padding?t.padding:3,C=void 0!==t.paddingRight?t.paddingRight:void 0!==t.padding?t.padding:3,F=void 0!==t.paddingBottom?t.paddingBottom:void 0!==t.padding?t.padding:3,_=void 0!==t.paddingTop?t.paddingTop:void 0!==t.padding?t.padding:3,m=this.textContainer=new PIXI.UI.ScrollingContainer({scrollX:!s,scrollY:s,dragScrolling:s,expandMask:2,softness:.2,overflowX:40,overflowY:40});m.anchorTop=_,m.anchorBottom=F,m.anchorLeft=f,m.anchorRight=C,this.addChild(m),s&&(this._useNext=this._usePrev=!1,m.dragRestrictAxis="y",m.dragThreshold=5,this.dragRestrictAxis="x",this.dragThreshold=5);const v=m.innerContainer;let E,b,y,w,x;this.update=function(){this._width!=this._lastWidth&&(this._lastWidth=this._width,s&&(H(),p.visible&&n.setCaretIndex(p._index),T&&ut())),this._dirtyText&&(H(),this._dirtyText=!1)};const P=new PIXI.Point,B=new PIXI.Point,I=new PIXI.Point;let A=!1,k=!1,M=-1,O=-1;var T=!1;let j=performance.now(),L=0,S=0,X=0,R=!1,N=!1;var H=function(){S=0,X=0;let e=0;const i=n._value.length;let o=0,r=.5*(c-l),h=0;if(u.length>i){for(h=u.length-1;h>=i;h--)v.removeChild(u[h]),u[h].destroy();u.splice(i,u.length-i)}let D=!1,a=!1,d=0,g=-1,F=!1;for(h=0;h<n._value.length;h++){(D||a)&&(g=h,d++);let i=n._value[h];D=" "===i,a="\n"===i,a&&(i="");let l=u[h];l?l.text=i:(l=new PIXI.Text(i,t.style),v.addChild(l),u.push(l)),l.scale.x=a?0:1,l.wrapped=F,F=!1,!(a||s&&o+l.width>=n._width-f-C)||(e++,o=0,r+=c,-1==g||a)?(l.lineIndex=e,l.x=o,l.y=r,l.wordIndex=D||a?-1:d,o+=l.width,r>S&&(S=r)):(h=g-1,g=-1,F=!0)}X=e,v.addChild(p),v.cacheAsBitmap&&(v.cacheAsBitmap=!1,v.cacheAsBitmap=!0),m.update()};const W=function(t,e){let i=99999,n=-1,o=!1,s=0;X>0&&(s=Math.max(0,Math.min(X,Math.floor(t.y/c))));for(let e=0;e<u.length;e++){const r=u[e];if(r.lineIndex!=s)continue;const h=Math.abs(t.x-(r.x+.5*r.width));h<i&&(i=h,n=e,o=t.x>r.x+.5*r.width)}e?(b=n,y=o):(w=n,x=o)},z=function(){return!!T&&(n.value=n.value.slice(0,M)+n.value.slice(O+1),n.setCaretIndex(M),!0)},V=function(){for(let t=0;t<u.length;t++)u[t].style.fill=t>=M&&t<=O?h:r},G=new PIXI.Point,Y=function(t){G.copy(t),s&&G.y>=c&&(G.y+=c),m.focusPosition(G)},U=function(){p.visible=!1,clearInterval(E)},$=function(t){if(s||-1==t.indexOf("\n")||(t=t.replace(/\n/g,"")),T&&z(),!n.maxLength||u.length<n.maxLength)if(p._atEnd)n.valueEvent+=t,n.setCaretIndex(u.length);else{const e=Math.min(u.length-1,p._index);n.valueEvent=n.value.slice(0,e)+t+n.value.slice(e),n.setCaretIndex(e+t.length)}},q=function(t){if(17!==t.which&&91!==t.which||(R=!0),16===t.which&&(N=!0),n.emit("keydown",t),!t.defaultPrevented){if(13===t.which)return $("\n"),void t.preventDefault();if(R){if(65===t.which)return n.select(),void t.preventDefault();if(90===t.which)return n.value!=n._lastValue&&(n.valueEvent=n._lastValue),n.setCaretIndex(n._lastValue.length+1),void t.preventDefault()}if(8===t.which)return z()||(p._index>0||1===u.length&&p._atEnd)&&(p._atEnd?(n.valueEvent=n.value.slice(0,u.length-1),n.setCaretIndex(p._index)):(n.valueEvent=n.value.slice(0,p._index-1)+n.value.slice(p._index),n.setCaretIndex(p._index-1))),void t.preventDefault();if(46===t.which)return z()||p._atEnd||(n.valueEvent=n.value.slice(0,p._index)+n.value.slice(p._index+1),n.setCaretIndex(p._index)),void t.preventDefault();if(37!==t.which&&39!==t.which)return!s||38!==t.which&&40!==t.which?void 0:(k=38===t.which,N?T?(I.y=Math.max(0,Math.min(S,I.y+(k?-c:c))),W(I,!1),Math.abs(b-w)<=1?n.setCaretIndex(y?b+1:b):(p._index=(x?w+1:w)+(p._down?-1:0),n.selectRange(p._down?b:b-1,p._index))):(b=p._index,y=!1,I.copy(p),I.y=Math.max(0,Math.min(S,I.y+(k?-c:c))),W(I,!1),p._index=(x?w+1:w)-(k?0:1),n.selectRange(k?b-1:b,p._index),p._down=!k):T?n.setCaretIndex(k?M:O+1):(B.copy(p),B.y+=k?-c:c,B.x+=1,W(B,!0),n.setCaretIndex(y?b+1:b)),void t.preventDefault());if(A=37===t.which,N)if(T){if(M===p._index)if(M===O&&A===p._forward)n.setCaretIndex(p._forward?p._index:p._index+1);else{const t=A?p._index-1:p._index+1;n.selectRange(t,O),p._index=Math.min(u.length-1,Math.max(0,t))}else{const t=A?p._index-1:p._index+1;n.selectRange(M,t),p._index=Math.min(u.length-1,Math.max(0,t))}}else{const t=p._atEnd?p._index+1:p._index,e=A?t-1:t;n.selectRange(e,e),p._index=e,p._forward=!A}else T?n.setCaretIndex(A?M:O+1):n.setCaretIndex(p._index+(A?p._atEnd?0:-1:1));t.preventDefault()}},Q=function(t){17!=t.which&&91!=t.which||(R=!1),16===t.which&&(N=!1),n.emit("keyup",t),t.defaultPrevented},K=function(t){if(n.emit("copy",t),!t.defaultPrevented){if(T){(t.clipboardData||window.clipboardData).setData("Text",n.value.slice(M,O+1))}t.preventDefault()}},J=function(t){n.emit("cut",t),t.defaultPrevented||(T&&(K(t),z()),t.preventDefault())},Z=function(t){if(n.emit("paste",t),t.defaultPrevented)return;const e=t.clipboardData||window.clipboardData;$(e.getData("Text")),t.preventDefault()},tt=function(t){const e=_pui_tempInput.value;e.length&&($(e),_pui_tempInput.value=""),t.preventDefault()},et=function(t){n.blur()},it=new o(this);it.onPress=function(t,e){if(e){const e=performance.now()-j;if(j=performance.now(),e<250)if(L++,L>1)this.select();else{v.toLocal(P,void 0,B,!0),W(B,!0);const t=u[b];t&&(-1!=t.wordIndex?this.selectWord(t.wordIndex):this.selectRange(b,b))}else L=0,P.copy(t.data.global),v.toLocal(P,void 0,B,!0),u.length&&(W(B,!0),n.setCaretIndex(y?b+1:b))}t.data.originalEvent.preventDefault()},it.onDragMove=function(t,e){u.length&&this._focused&&(I.x=P.x+e.x,I.y=P.y+e.y,v.toLocal(I,void 0,I,!0),W(I,!1),b<w?(n.selectRange(y?b+1:b,x?w:w-1),p._index=x?w:w-1):b>w?(n.selectRange(w,y?b:b-1),p._index=w):y===x?n.setCaretIndex(y?b+1:b):(n.selectRange(b,w),p._index=w),p._forward=b<=w,p._down=e.y>0,Y(I))},this.focus=function(){if(!this._focused){g.prototype.focus.call(this);const t=`${this.container.worldTransform.tx}px`,e=`${this.container.worldTransform.ty}px`,i=`${this.container.height}px`,o=`${this.container.width}px`;_pui_tempInput.setAttribute("style",`position:fixed; left:${t}; top:${e}; height:${i}; width:${o};`),_pui_tempInput.value="",_pui_tempInput.focus(),_pui_tempInput.setAttribute("style","position:fixed; left:-10px; top:-10px; width:0px; height: 0px;"),v.cacheAsBitmap=!1,_pui_tempInput.addEventListener("blur",et,!1),document.addEventListener("keydown",q,!1),document.addEventListener("keyup",Q,!1),document.addEventListener("paste",Z,!1),document.addEventListener("copy",K,!1),document.addEventListener("cut",J,!1),_pui_tempInput.addEventListener("input",tt,!1),setTimeout((function(){p.visible||n.selection.visible||s||n.setCaretIndex(u.length)}),0)}},this.blur=function(){this._focused&&(g.prototype.blur.call(this),R=!1,N=!1,U(),this.clearSelection(),u.length>1&&(v.cacheAsBitmap=!0),_pui_tempInput.removeEventListener("blur",et),document.removeEventListener("keydown",q),document.removeEventListener("keyup",Q),document.removeEventListener("paste",Z),document.removeEventListener("copy",K),document.removeEventListener("cut",J),_pui_tempInput.removeEventListener("input",tt),_pui_tempInput.blur()),s||(G.set(0,0),m.focusPosition(G))},this.setCaretIndex=function(t){if(p._atEnd=t>=u.length,p._index=Math.max(0,Math.min(u.length-1,t)),u.length&&t>0){let e=Math.max(0,Math.min(t,u.length-1)),i=u[e];i&&i.wrapped?(p.x=i.x,p.y=i.y):(e=Math.max(0,Math.min(t-1,u.length-1)),i=u[e],p.x=u[e].x+u[e].width,p.y=u[e].lineIndex*c+.5*(c-l))}else p.x=0,p.y=.5*(c-l);Y(p),n.clearSelection(),clearInterval(E),p.alpha=1,p.visible=!0,E=setInterval((function(){p.alpha=0===p.alpha?1:0}),500)},this.select=function(){this.selectRange(0,u.length-1)},this.selectWord=function(t){let e=u.length,i=0;for(let n=0;n<u.length;n++)u[n].wordIndex===t&&(n<e&&(e=n),n>i&&(i=n));this.selectRange(e,i)};const nt=function(t,e,i,u){n.selection.beginFill(`0x${D.slice(1)}`,1),n.selection.moveTo(t,e),n.selection.lineTo(t+i,e),n.selection.lineTo(t+i,e+u),n.selection.lineTo(t,e+u),n.selection.endFill()};var ut=function(){const t=u[M];if(void 0!==t){let e=t.x,i=t.y,o=0;const s=l;let r=t.lineIndex;n.selection.clear();for(let t=M;t<=O;t++){const n=u[t];n.lineIndex!=r&&(nt(e,i,o,s),e=n.x,i=n.y,r=n.lineIndex,o=0),o+=n.width}nt(e,i,o,s),v.addChildAt(n.selection,0)}};this.selectRange=function(t,e){if(t>-1&&e>-1){const i=Math.min(t,e,u.length-1),n=Math.min(Math.max(t,e),u.length-1);i==M&&n==O||(T=!0,this.selection.visible=!0,M=i,O=n,U(),ut(),V()),this.focus()}else n.clearSelection()},this.clearSelection=function(){T&&(T=!1,this.selection.visible=!1,M=-1,O=-1,V())}}dt.prototype=Object.create(PIXI.Container.prototype),dt.prototype.constructor=dt,dt.prototype.addChild=function(t){const e=arguments.length;if(e>1)for(let t=0;t<e;t++)this.addChild(arguments[t]);else null!==t.parent&&t.parent.removeChild(t),t.parent=this,this.UIChildren.push(t),PIXI.Container.prototype.addChild.call(this,t.container),t.updatesettings(!0)},dt.prototype.removeChild=function(t){const e=arguments.length;if(e>1)for(let t=0;t<e;t++)this.removeChild(arguments[t]);else{PIXI.Container.prototype.removeChild.call(this,t.container);const e=this.UIChildren.indexOf(t);-1!=e&&(this.UIChildren.splice(e,1),t.parent=null)}},dt.prototype.resize=function(t,e){if(isNaN(e)||(this.__height=e),isNaN(t)||(this.__width=t),this.minWidth||this.minHeight){let i=1,n=1;t&&t<this.minWidth&&(i=this.minWidth/t),e&&e<this.minHeight&&(n=this.minHeight/e),i>n&&i>1?(this.scale.set(1/i),this.__height*=i,this.__width*=i):n>1?(this.scale.set(1/n),this.__width*=n,this.__height*=n):1!==this.scale.x&&this.scale.set(1)}this.hitArea.width=this.__width,this.hitArea.height=this.__height;for(let t=0;t<this.UIChildren.length;t++)this.UIChildren[t].updatesettings(!0,!1)},Object.defineProperties(dt.prototype,{_width:{get(){return this.__width},set(t){isNaN(t)||(this.__width=t,this.resize())}},_height:{get(){return this.__height},set(t){isNaN(t)||(this.__height=t,this.resize())}}}),pt.prototype=Object.create(D.prototype),pt.prototype.constructor=pt,module.exports=pt,Object.defineProperties(pt.prototype,{value:{get(){return this._text.text},set(t){this._text.text=t,this.updatesettings(!0)}},text:{get(){return this.value},set(t){this.value=t}}}),gt.prototype=Object.create(g.prototype),gt.prototype.constructor=gt,Object.defineProperties(gt.prototype,{valueEvent:{get(){return this._value},set(t){this.maxLength&&(t=t.slice(0,this.maxLength)),this._value!=t&&(this.value=t,this.emit("change"))}},value:{get(){return this._value},set(t){this.maxLength&&(t=t.slice(0,this.maxLength)),this._value!=t&&(this._lastValue=this._value,this._value=t,this._dirtyText=!0,this.update())}},text:{get(){return this.value},set(t){this.value=t}}});var ft=function(t){function i(i,n,u){var o=this,s=new e.extras.TilingSprite(i);return(o=t.call(this,n||s.width,u||s.height)||this).sprite=s,o.container.addChild(o.sprite),o}return n(i,t),i.prototype.update=function(){null!==this.tint&&(this.sprite.tint=this.tint),null!==this.blendMode&&(this.sprite.blendMode=this.blendMode),this.sprite.width=this._width,this.sprite.height=this._height},Object.defineProperty(i.prototype,"tilePosition",{get:function(){return this.sprite.tilePosition},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tilingPosition",{set:function(t){this.sprite.tilePosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tileScale",{get:function(){return this.sprite.tileScale},set:function(t){this.sprite.tileScale=t},enumerable:!0,configurable:!0}),i}(D),Ct=Object.freeze({__proto__:null,UIBase:D,Button:f,CheckBox:C,Container:F,DynamicText:b,DynamicTextStyle:m,Ease:k,Interaction:X,Helpers:R,ScrollBar:nt,ScrollingContainer:ot,__moduleExports:at,Slider:it,SliceSprite:lt,Sprite:ct,Stage:dt,TextInput:gt,TilingSprite:ft,Tween:tt,Ticker:ut});t.UI=Ct,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=pixi-ui.min.js.map
